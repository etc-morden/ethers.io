<html>
    <head>
        <title>ethers.io</title>
        <style type="text/css">
            /* Custom Font; see ./assets/build-font */
            @font-face {
                font-family: "ethers";
                src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAloAA0AAAAADLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAJTAAAABsAAAAcgv+oak9TLzIAAAGgAAAARAAAAGBR9VyoY21hcAAAAiAAAAByAAABchVeKpFjdnQgAAAClAAAAAQAAAAEABEBRGdhc3AAAAlEAAAACAAAAAj//wADZ2x5ZgAAArwAAAUnAAAGrJu3Y0loZWFkAAABMAAAAC8AAAA2Dr2sdmhoZWEAAAFgAAAAHQAAACQEiwJ0aG10eAAAAeQAAAA5AAAARBkkAAZsb2NhAAACmAAAACQAAAAkC3AM9G1heHAAAAGAAAAAHwAAACAAWwCWbmFtZQAAB+QAAAElAAACBBXR7RVwb3N0AAAJDAAAADUAAABEAQ8BYnjaY2BkYGAA4lcCS1bF89t8ZeBmYgCBawu37oHSe///YmBgSgKLczCAKQBfgQwxAHjaY2BkYGBiAAI9pqT/v4DsJAZGBlQgCABFFQMFAAAAeNpjYGRgYBBkSGXgYAABJiBmZACJOTDogQQAD38A8gB42mNgYdzIOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDA4MgQzgTi6jGhqGF8ACQUGBgBzUoIRXjaY9jNIMgAAqsYGBgXAPFZID7w/y/jASA9AYgbGBiYksBi/xl3AjFITcP/XyBxMD7MwAAANrQSMgAAAHjaY2BgYGaAYBkGRgYQyAHyGMF8FoYAIC0AhCB5RwZPBh+gSDBDKEP4//9gEWewSBBE5P+h/wf/7/+/5//u/7v+74SahgIY2RjgwoxMQIIJXQEDYcDMwMLKxs7BycXAwA3k8jDw8jHwA904RAAAjdwWHwAAABEBRAAAACoAKgAqAEoAaACcAMIBZAF0AY4BwAIQAjwCeAKwAuYDVnjaZVRNbNRGFJ7n8c6s7f3zxjtmE+9uYrM2bJo/e20Tkm4I20hAEQVBtqhAG9EKqaraLhIImhYJAm1Q/9RL1TZIKIciVQIO5FCJA1EqDhVSq3Jobz3QCxfUHqpKSECXjh0Ch0r7nme/mfe+mXnfGyQgFSH0DUwjjCgavAZoaHyJiuhP9xpJ/D6+hAU+RNdwBCcieIkSeDS+BBHuqZ7qeKqlnj9x5AhMdy6r4PFsArdhWITbPGMXQnmXacS06wnf8q2CVfAKnj97ZZb/YKxVa7VqcDv++1Y0brVW47vhZ7jL4zPP4vXQoQ7V55fPn1+e/3shXGiGs3B3fnl+fvnKQrDwQjAbcT/+F83ATVhEBPUiFDqez/l0lgVi9ZlDYE+ARz23Al4YjIHj3Tm9e2b3njyWcLHzcZF/1G21hisK+e/yAvYatZ+Ozcy8KbOmpjWZHDbwwABucBp+Wwj1wg/wBx+lUQ4hoM4EMJIFJ2yADjqFUw8OPPxSAnngwIDcLXW+nj4OzYcHHihSdwyB1Lkx3RvlSnIrwRdwFck80zq0Hb2EXkGvoTf4/kmUtQK2wxxNt+o2LYNnEstOEMp0jj4xQiMLaViG0PbLMBFF6IPg2E5Ig5AvdkzbcplThgoksO3UAz2wCWuATclypU+uAlZSSTATgvCqqABgkGDfXjs7UNOzftPCKS2jyHI63Z2vaZKbyakVmtSILBNZlGB7V83oz5Ue8SjApPH92Hjn3q4aLmhUy2nrc5pE/yI9poLlHiFV/AyowFkUSH0qZZWedKJ3a5DtqVULpf37zXz/ZHZbQRVoShYxzoxImJaJAlo/TeqKUhWEDwWmyLs69+58kivspCzH1ueYRPn18zvcAqdhhdd9reorK+3F9paVlRW0Oo+Ew1xaXFGgcx36sYHue/DPOztuTN/YDiNvt2C0fevSpVsQtkcRfvwYVeIaK1zHJR7HCCW2YwdhwGyTaMwN6l2xqj2ua1iBM4cOnRNif9vI5418im1lDPAayP1wPpro3FeupBaVaF+c4wxchwtoGKEqT+/UfTvwuIQCRjNgh1HBmDMIWRgEDmQhMq0sNCAM4PrNHd8mIXCMY8awC/DyngRmsrwTQzWfxxvZOkMQeqsYa17/4c1N57INwruJxAZ/UpgivuMNPLfJ6MNY2FoxBFhXFbCRTguVTLZvQFcIlRJrOl/r5SzqedaNeX726A7C+Oz8Dvy1rj5zsd2+2P7x5En1xIknrd25147AXyJIPYnicz/g9fqI16vKz820qD95e9LY2/UJrtwJCKJGDWPPGxg+EEVbTBDx7NnI26J47pwsV4kYIZGvyvK5U2JKrIrREv5JiWfnZJkvnJvjobI0t/q29HKd3EHdqMaVYtrPQz0YE/x64I24rARe5DRiQSECHd+2RkxaIExKpyXc1Wo0WvGwc1+9kDd6NmzoMXrT0q9SujJ18OBUJR5CpVJxy1AqQTnW3Sqf8z82nemW/ZShBH1PqJ9x9ZdkP5mLWUCK0Kdcg+V6WY0p3FVSzsPbAPXzt+83lOAvCeOKneIvyV6Euqg1wWW06pz4hFnw66ofFjidrbEx4IN+kW8P8+3xScssaPqYEK2klqmHBe5tvmni1s33iOi8X21e/Sqh2Fgyk6l01kgl5zeWDCWpu6SjFovquKEUMsrk8YWkQlhpdHTUiNCMYcDrgrHfm3TByvGgFyltZjp3/cxQMvX55pqbTBVV4+hRtaglM7KYSg6JhrGv1G0WNxkI/Qc4uCcsAHjadY7BaoNAFEXvJMZQCKGf8LpLIMroSrJrU9yFgovsxVgVghOmZhH6CV32P/o7/ZbuetWhdNEK4zvz5r77LoAlPqAwfnd4dKzgo3M8wRxvjqfUfDr24Ku54xlulXbss/9EpfJueHsYpnpWWODZ8YR7Xx1PqXl37FHz5XgGUUvHPhbqHjsYnHGFRYMKNRMKViiwZo2hESHBhpzxveB7TuWR9z3nDLkEduZ8tU1Vd7Iq1hLrKNlI1hR1bo+yN8ZSUtK35t/ihZeuLi1rxkaFC06DKbKyupxyQkrjlgPpsKCiqo8SMoxgy/PbbOwkCKgIfgIjNW2XGluVEodatjKuJCRBHPQJ/4l0cI1miCC06w3DofbrcaCsMa1oHYVaa/nb5xuEx02tAAAAeNpjYGIAg/8HGCQZsAFBIGZkYGJQYVBjUGfQYNBk0GLQZtBh0GcwZjBlMGOwYLACAJEfBHEAAAAAAAAB//8AAnjaY2BgYGQAgqt7bD6A6GsLt+6B0nsBWPgIkAA=) format("woff");
                font-weight: normal;
                font-style: normal;
            }
        </style>
        <style type="text/css">/* ./static/style.css */ .icon-logo:before{content:"L"}.icon-logo{transform:translateY(15%)}.icon-plus:before{content:"A"}.icon-plus{transform:translateY(12%)}.icon-remove:before{content:"R"}.icon-remove{transform:translateY(8%)}.icon-edit:before{content:"E"}.icon-edit{transform:translateY(7%)}.icon-download:before{content:"G"}.icon-download{transform:translateY(9%)}.icon-wallet:before{content:"W"}.icon-locked{transform:translateY(1%)}.icon-home:before{content:"H"}.icon-info:before{content:"I"}html{margin:0}body{background-color:#eee;font-family:sans-serif;margin:0}div{box-sizing:border-box}.icon{display:inline-block;font-family:"ethers";speak:none;font-style:normal;font-size:20px;font-weight:normal;font-variant:normal;text-transform:none;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-big{font-size:40px}.icon-medium{font-sie:20px}.button a{cursor:pointer}.blurb{text-align:center}#templates{display:none}#header{background:#2878e8;border-bottom:2px solid #eaf2fd;box-shadow:0 0 15px rgba(0,0,0,0.5);color:#eaf2fd;height:600px;left:0;overflow:hidden;position:fixed;right:0;transform:translateY(-550px)}body.animated #header{transition:transform .5s ease-out}@keyframes drift{0%{transform:scale(1,1)}100%{transform:scale(5,1)}}#header>img{border:1px solid green;position:absolute;right:300px;bottom:5px;dddopacity:.2;animation:drift 15s infinite;tranform-origin:right center;transition:transform .3s linear}#logo{color:#fff;display:inline-block;height:30px;left:46px;line-height:30px;position:fixed;text-align:center;top:10px;width:30px}#logo .icon{cursor:pointer;position:relative}#logo .button{border-top:1px solid #333;cursor:pointer;margin-top:15px;opacity:.75;padding-top:8px;transition:opacity .1s linear .1s}#logo .button:hover{opacity:1;transition:opacity .1s linear}#logo .accounts .account .nickname{background-color:transparent;border:0;color:#fff;font-size:17px;opacity:.75;outline:0;padding:4px 5px;transition:opacity .1s linear .1s;width:180px}#logo .accounts .account.selected .nickname{opacity:1}#logo .accounts .account:hover .nickname{opacity:1;transition:opacity .1s linear}#logo .accounts .account .lock-state{color:#b7f1be;font-size:12px}#logo .accounts .account .lock-state:before{content:"U"}#logo .accounts .account .lock-state.locked{color:#f4b5b6;font-size:12px}#logo .accounts .account .lock-state.locked:before{content:"S"}body.editing-account #account-list{opacity:1;pointer-events:auto;transform:scale(1)}#account-list{background:#555;border:2px solid #fff;border-radius:15px;box-shadow:0 0 15px #000;color:#fff;display:inline-block;left:-25px;opacity:0;padding:102px 25px 15px;position:absolute;pointer-events:none;transform:scale(0.25);transform-origin:10px 120px;transition:opacity .2s linear .3s,transform .2s ease-out .3s;top:-100px;min-width:330px}body.animated #logo:hover #account-list{opacity:1;pointer-events:auto;transform:scale(1)}#account-list .title{border-bottom:1px solid #333;font-size:18px;font-weight:bold;margin-bottom:15px;padding-bottom:8px;text-align:center}body.no-account #account-list .accounts{display:none}#account-list .accounts>div{margin-bottom:7px;line-height:30px;white-space:nowrap}body:not(.no-account) #account-list .no-accounts{display:none}#account-list .accounts .account .nickname{cursor:pointer}#account-list .accounts .account .action{cursor:pointer;margin-left:10px;opacity:0;pointer-events:none;transition:opacity .2s linear}#account-list .accounts .account.selected.metamask .action{opacity:.2;pointer-events:none}#account-list .accounts .account .action .icon{color:#fff;font-size:14px;text-decoration:none}#account-list .accounts .account.selected .nickname{opactiy:1}#account-list .accounts .account.selected .action{opacity:.5;pointer-events:auto}#account-list .accounts .account.selected .action:hover{opacity:1}#cancel{border:2px solid #fff;border-radius:17px;box-sizing:content-box;color:#fff;font-size:24px;height:30px;line-height:28px;margin:0;padding:0;position:fixed;right:16px;text-align:center;top:16px;width:30px}body.animated #cancel{transition:opacity .5s linear}#cancel:hover{background-color:#fff;color:#2878e8;cursor:pointer}#cancel.hidden{opacity:0;pointer-events:none}body.animated #logo{transition:opacity .3s linear,transform .3s ease-out}#logo.hidden{opacity:0;pointer-events:none;transform:scale(0.001)}#controllers{display:inline-block;transform:translateY(550px);width:100%}body.animated #controllers{transition:transform .5s ease-out}#controllers>div{left:50%;padding:16px 0;position:absolute;top:0;transform:translateX(-50%);width:800px}#controllers>div>div{padding-bottom:30px}#controllers>div>div:last-child{padding-bottom:20px}body.animated #controllers>div{transition:opacity .5s linear,transform .5s ease-out}#controllers>div.hidden{opacity:0;pointer-events:none}#controllers>.left{opacity:0;pointer-events:none;transform:translateX(-90%)}#controllers>.right{opacity:0;pointer-events:none;transform:translateX(-10%)}.fullscreen{bottom:50px;left:0;position:fixed;right:0;top:52px}#app-container.blur{opacity:.2;pointer-events:none}body.animated #app-container{transition:opacity .5s linear}#app-container iframe{background-color:#fff;border:0;height:100%;width:100%}#footer{background:#555;border-top:2px solid #000;bottom:0;box-shadow:0 0 5px rgba(0,0,0,0.5);height:50px;left:0;position:fixed;right:0}#footer .address-bar-container{height:100%;margin-left:50%;transform:translateX(-50%);width:800px}#footer .button a{background-color:#fff;border-radius:18px;color:#444;height:36px;line-height:36px;bottom:7px;position:fixed;text-align:center;width:36px}#footer .button a.wallet{font-size:26px;left:94px}#footer .button a.home{font-size:22px;left:46px}#footer .address-bar{position:relative}#footer .address-bar input{background-color:transparent;border:0;box-sizing:content-box;color:#fff;cursor:pointer;float:left;font-size:18px;line-height:30px;height:30px;margin-top:8px;outline:0;padding:2px 0;width:600px}#footer .address-bar input:focus{opacity:.8}#footer .address-bar input:focus.matches{opacity:1}#footer .address-bar span{color:#fff;cursor:pointer;display:inline-block;float:left;font-size:18px;height:30px;line-height:30px;margin-top:8px;padding:2px 2px 2px 0}#footer .address-bar div{background-color:#fff;border-radius:17px;color:#333;cursor:pointer;font-size:14px;font-weight:bold;height:34px;float:right;line-height:34px;margin-top:8px;opacity:0;text-align:center;transition:opacity .2s linear;width:34px}body.editing-url #footer .address-bar div{opacity:1}.unit{font-size:.9em;opacity:.9}.decimal{font-size:.87em}#controllers .title{font-size:28px;font-weight:bold;text-align:center;padding-bottom:28px}#controllers .title span{border-bottom:1px solid #69a1ef;padding:0 55px 4px}#controllers .button{font-size:18px;font-weight:bold;ddd-padding:0 0 10px;text-align:center;dddmargin-bottom:10px}#controllers .button a{background-color:#fff;border:2px solid #fff;border-radius:20px;color:#2878e8;display:inline-block;line-height:20px;padding:8px 40px;text-decoration:none;width:250px}#controllers .button a:hover{background-color:#2878e8;color:#fff}#controllers .button a.disabled{opacity:.4;pointer-events:none}#controllers .nav-wallet.left{transform:translate(-50%,-50px)}#controllers>div.nav-wallet>div{padding-bottom:0}.nav-wallet .info{float:left;position:relative;width:400px}.nav-wallet .address input{background-color:transparent;border:0;color:#fff;font-family:monospace;dddfont-weight:bold;font-size:14px;height:22px;line-height:22px;outline:0;padding:2px 0;width:100%}.nav-wallet .nickname{background-color:#2878e8;font-size:17px;font-weight:bold;position:absolute;height:26px;line-height:26px;top:-2px;transition:opacity .2s linear;width:100%}body:not(.locked) .nav-wallet .info:hover .nickname{opacity:0;pointer-events:none;transition:opacity .2s linear .6s}.nav-wallet .balance{float:right;font-family:sans-serif;font-size:22px;line-height:22px}.nav-wallet .info .onboard .add-account{cursor:pointer;opacity:.7}.nav-wallet .info .onboard .add-account:hover{opacity:1}.nav-wallet .info .onboard{display:none;position:absolute;top:0;left:0}body.no-account .nav-wallet .info .address{opacity:0;pointer-events:none}body.no-account .nav-wallet .info .nickname{opacity:0;pointer-events:none}body.no-account .nav-wallet .info .onboard{display:block}body.no-account .nav-wallet .balance{display:none}.options-container .arrow{opacity:0;position:absolute;transform:translateX(-200%);transition:opacity .3s linear}.options-container:hover .arrow{opacity:.5}#controllers .options-container{border:1px solid #aaa;height:26px;overflow-y:hidden;position:relative;transform:translate(-14px,-1px)}#controllers .options-container:hover{overflow:visible}#controllers .options-container .options{background-color:#2878e8;border:1px solid transparent;position:relative;transform:translate(0,-1px);transition:transform .3s ease-out}#controllers .options-container:hover .options{border:1px solid white;box-shadow:0 0 10px rgba(0,0,0,0.5)}#controllers .options-container .options .option{cursor:pointer;height:26px;line-height:26px;padding:0 12px;width:100%}#controllers .options-container:hover .options .option{border-bottom:1px solid #fff}#controllers .options-container:hover .options .option:last-child{border-bottom:0}#controllers .options-container .options .option:hover{background-color:#fff;color:#2878e8}#controllers table{color:#eaf2fd;margin-left:50%;transform:translateX(-50%);margin-bottom:20px}.option i{padding-right:100px}.option .price{display:inline-block;font-family:monospace;padding-right:12px;position:absolute;right:0}#controllers table th{text-align:left;line-height:24px;padding-right:50px;white-space:nowrap}.nowrap{white-space:nowrap}#controllers table td{line-height:24px}#controllers .input-container{border:2px solid #eaf2fd;border-radius:100px;margin-left:50%;padding-left:15px;padding-right:15px;position:relative;transform:translateX(-50%);width:400px}#controllers .input-container input{background:transparent;border:0;color:#fff;font-size:20px;height:32px;line-height:20px;outline:0;padding:3px 6px;text-align:center;width:100%}#controllers .input-container .info{position:absolute;right:-45px;line-height:20px;dddheight:20px;padding:5px 0;text-align:center;top:0;width:30px}#controllers .textarea-container{border:2px solid #eaf2fd;border-radius:100px;padding:0 15px;margin-left:50%;position:relative;transform:translateX(-50%);width:400px}#controllers .textarea-container textarea{ddd-background:transparent;border:0;color:#fff;font-size:20px;height:32px;line-height:20px;outline:0;padding:3px 6px;width:100%}.nav-progress .progress-container{border:2px solid #eaf2fd;border-radius:100px;display:inline-block;margin-left:50%;padding:2px;transform:translateX(-50%);width:400px}.nav-progress .progress-bar{background-color:#679ce5;border:1px solid #223;border-radius:100px;box-sizing:border-box;display:inline-block;overflow:hidden;padding:10px 0;position:relative}.nav-progress .percent{font-weight:bold;left:0;padding:10px 0;position:absolute;top:3px;text-align:center;width:100%}.nav-progress .progress-bar.complete{background-color:#67e591;border:1px solid #223325}.nav-progress .progress-bar .highlight{background-color:#fff;height:50%;left:0;opacity:.2;position:absolute;top:0;width:100%}::-webkit-input-placeholder{color:white;font-style:italic;opacity:.5}::-moz-placeholder{color:white;font-style:italic;opacity:.5}:-ms-input-placeholder{color:white;font-style:italic;opacity:.5}:-moz-placeholder{color:white;font-style:italic;opacity:.5}
</style>
    </head>
    <body>
        <div id="templates">

            <!-- Standard Wallet Interface (Navigation Controller 0) -->
            <div class="nav-wallet">
                <div class="info">
                    <div class="address"><input class="populate-address" readonly="readonly" type="text" /></div>
                    <div class="nickname populate-nickname"></div>
                    <div class="onboard">You do not have any accounts &mdash; <span class="add-account">Click here to add one</span></div>
                </div>
                <span>&nbsp;</span>
                <div class="balance"><span class="unit">&Xi;</span> <span class="populate-balance-whole">1</span>.<span class="decimal populate-balance-decimal">1</span></div>
            </div>

            <!-- Transaction Notice -->
            <div class="nav-notice">
                <div class="title"><span class="populate-title">[title]</span></div>
                <div class="blurb"><span class="populate-blurb">[blurb]</span></div>
            </div>

            <!-- Upload JSON Wallet -->
            <div class="nav-button">
                <div class="title"><span class="populate-title">[title]</span></div>
                <div class="blurb"><span class="populate-blurb">[blurb]</span></div>
                <div class="button"><a class="populate-action">[action]</a></div>
            </div>

            <!-- Transaction Summary; Shown if account is locked before unlock workflow -->
            <div class="nav-transaction-summary">
                <div class="title"><span>Send Transaction</span></div>
                <table>
                    <tr>
                        <th><span class="populate-header-address">To:</span></th>
                        <td><span class="populate-address"></span></td>
                    </tr>
                    <tr>
                        <th>Amount:</th>
                        <td class="nowrap"><span class="unit">&Xi;</span> <span class="populate-amount"></span></td>
                    </tr>
                    <tr>
                        <th>Data:</th>
                        <td><span class="nowrap populate-data-length"></span></td>
                    </tr>
                </table>
                <div class="button"><a>UNLOCK ACCOUNT...</a></div>
            </div>

            <!-- Transaction Confirmation -->
            <div class="nav-transaction">
                <div class="title"><span>Send Transaction</span></div>
                <table>
                    <tr>
                        <th><span class="populate-header-address">To:</span></th>
                        <td><span class="populate-address"></span></td>
                    </tr>
                    <tr>
                        <th>Amount:</th>
                        <td class="nowarp"><span class="unit">&Xi; </span> <span class="populate-amount"></span></td>
                    </tr>
                    <tr>
                        <th>Gas Price:</th>
                        <td class="nowrap"><div class="options-container"><div class="arrow">&#9658;</div><div class="options"></div></div></td>
                    </tr>
                    <tr>
                        <th class="populate-header-gas-limit">Gas Limit:</th>
                        <td class="nowrap"><span class="populate-gas-limit">calculating...</span></td>
                    </tr>
                    <tr>
                        <th class="populate-header-fee">Transaction Fee:</th>
                        <td class="nowrap"><span class="unit">&Xi; </span> <span class="populate-fee">calculating...</span></td>
                    </tr>
                    <tr>
                        <th>Data:</th>
                        <td><span class="nowrap populate-data-length"></span></td>
                    </tr>
                </table>
                <div class="button"><a>SEND</a></div>
            </div>

            <!-- Transaction Summary; Shown if account is locked before unlock workflow -->
            <div class="nav-message">
                <div class="title"><span>Sign Message</span></div>
                <table>
                    <tr>
                        <th><span class="populate-header">Message:</span></th>
                        <td><span class="populate-message"></span></td>
                    </tr>
                </table>
                <div class="button"><a class="populate-action">SIGN MESSAGE</a></div>
            </div>

            <!-- Password Entry -->
            <div class="nav-password">
                <div class="title"><span>Enter Password</span></div>
                <div class="blurb"><span class="populate-blurb">&nbsp;</div>
                <div><div class="input-container"><input placeholder="password" type="password" value="" /></div></div>
                <div class="button"><a class="populate-action">SUBMIT</a></div>
            </div>

            <!-- Progress Bar -->
            <div class="nav-progress">
                <div class="title"><span class="populate-title">Progress</span></div>
                <div class="blurb"><span class="populate-blurb">&nbsp;</span></div>
                <div><span class="progress-container"><span class="progress-bar"><span class="highlight"></span>&nbsp;</span><span class="percent populate-percent">0%</span></span></div>
            </div>

            <!-- Add Account -->
            <div class="nav-add-account">
                <div class="title"><span class="populate-title">Add Account</span></div>
                <div class="button"><a data-name="create">Create New Account</a></div>
                <div class="button"><a data-name="import">Import Existing Account</a></div>
            </div>


            <!-- Upload JSON Wallet -->
            <div class="nav-upload">
                <div class="title"><span class="populate-title">Verify Account JSON Wallet</span></div>
                <div class="blurb"><span class="populate-blurb"></span></div>
                <div class="button"><a>Verify</a></div>
            </div>

            <!-- Import Wallet -->
            <div class="nav-import">
                <div class="title"><span class="populate-title">Import Account</span></div>
                <div class="blurb"><span class="populate-blurb">Drag-and-Drop a JSON Wallet, type a 12 word backup phrase or enter a raw private key below.</span></div>
                <div><div class="input-container"><input type="text" placeholder="Select import method" value="" /></div></div>
                <div class="button"><a>Import</a></div>
            </div>

            <!-- Account Item in the #account-list -->
            <div class="account">
                <span class=""><span class="icon lock-state locked populate-locked icon-locked"></span></span>
                <input class="clickable nickname populate-nickname" readonly="readonly" value="foo"/>
                <span class="action edit"><span class="icon icon-edit" title="Edit Name"></span></span>
                <span class="action download"><a class="icon icon-download" title="Download"></a></span>
                <span class="action remove"><span class="icon icon-remove" title="Remove"></span></span>
            </div>

            <!-- Option Item in the gas-limit .options -->
            <div class="option"><b class="populate-name"></b>&nbsp;&nbsp&mdash;&nbsp;&nbsp;<i class="populate-duration"></i><span class="price populate-price"></span></div>

        </div>

        <div id="app-container" class="fullscreen"></div>

        <div id="header">
            <div id="controllers"></div>
        </div>

        <div id="logo">
            <div id="account-list">
                <div class="title">Accounts</div>
                <div class="accounts"></div>
                <div class="no-accounts">no accounts</div>
                <div class="button add-account"><div><span class="icon icon-plus"></span>&nbsp;&nbsp;Add Account</div></div>
            </div>
            <span class="icon icon-logo icon-big"></span>
        </div>
        <div id="cancel" class="hidden"><span>&times;</span></div>

        <div id="footer">
            <div class="address-bar-container">
                <div class="address-bar"><span>https://</span><input type="text" /><div>GO</div></div>
            </div>
            <span class="button"><a class="home icon icon-home" title="Home"></a></span>
            <span class="button"><a class="wallet icon icon-wallet" title="Wallet"></a></span>
        </div>

        <script type="text/javascript">/* ./ethers-app/node_modules/ethers/dist/ethers.js */ (function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ethers=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.version="4.0.13"},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var properties_1=require("./utils/properties");var Signer=function(){function Signer(){properties_1.setType(this,"Signer")}Signer.isSigner=function(value){return properties_1.isType(value,"Signer")};return Signer}();exports.Signer=Signer},{"./utils/properties":72}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bignumber_1=require("./utils/bignumber");var AddressZero="0x0000000000000000000000000000000000000000";exports.AddressZero=AddressZero;var HashZero="0x0000000000000000000000000000000000000000000000000000000000000000";exports.HashZero=HashZero;var EtherSymbol="Îž";exports.EtherSymbol=EtherSymbol;var NegativeOne=bignumber_1.bigNumberify(-1);exports.NegativeOne=NegativeOne;var Zero=bignumber_1.bigNumberify(0);exports.Zero=Zero;var One=bignumber_1.bigNumberify(1);exports.One=One;var Two=bignumber_1.bigNumberify(2);exports.Two=Two;var WeiPerEther=bignumber_1.bigNumberify("1000000000000000000");exports.WeiPerEther=WeiPerEther;var MaxUint256=bignumber_1.bigNumberify("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");exports.MaxUint256=MaxUint256},{"./utils/bignumber":61}],4:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var constants_1=require("./constants");var errors=__importStar(require("./errors"));var abi_coder_1=require("./utils/abi-coder");var address_1=require("./utils/address");var bignumber_1=require("./utils/bignumber");var bytes_1=require("./utils/bytes");var interface_1=require("./utils/interface");var properties_1=require("./utils/properties");var abstract_provider_1=require("./providers/abstract-provider");var abstract_signer_1=require("./abstract-signer");var VoidSigner=function(_super){__extends(VoidSigner,_super);function VoidSigner(address,provider){var _this=_super.call(this)||this;properties_1.defineReadOnly(_this,"address",address);properties_1.defineReadOnly(_this,"provider",provider);return _this}VoidSigner.prototype.getAddress=function(){return Promise.resolve(this.address)};VoidSigner.prototype._fail=function(message,operation){return Promise.resolve().then(function(){errors.throwError(message,errors.UNSUPPORTED_OPERATION,{operation:operation})})};VoidSigner.prototype.signMessage=function(message){return this._fail("VoidSigner cannot sign messages","signMessage")};VoidSigner.prototype.sendTransaction=function(transaction){return this._fail("VoidSigner cannot sign transactions","sendTransaction")};VoidSigner.prototype.connect=function(provider){return new VoidSigner(this.address,provider)};return VoidSigner}(abstract_signer_1.Signer);exports.VoidSigner=VoidSigner;var allowedTransactionKeys={chainId:true,data:true,from:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true};function resolveAddresses(provider,value,paramType){if(Array.isArray(paramType)){var promises_1=[];paramType.forEach(function(paramType,index){var v=null;if(Array.isArray(value)){v=value[index]}else{v=value[paramType.name]}promises_1.push(resolveAddresses(provider,v,paramType))});return Promise.all(promises_1)}if(paramType.type==="address"){return provider.resolveName(value)}if(paramType.type==="tuple"){return resolveAddresses(provider,value,paramType.components)}var isArrayMatch=paramType.type.match(/(.*)(\[[0-9]*\]$)/);if(isArrayMatch){if(!Array.isArray(value)){throw new Error("invalid value for array")}var promises=[];var subParamType={components:paramType.components,type:isArrayMatch[1]};value.forEach(function(v){promises.push(resolveAddresses(provider,v,subParamType))});return Promise.all(promises)}return Promise.resolve(value)}function runMethod(contract,functionName,estimateOnly){var method=contract.interface.functions[functionName];return function(){var _this=this;var params=[];for(var _i=0;_i<arguments.length;_i++){params[_i]=arguments[_i]}var tx={};var blockTag=null;if(params.length===method.inputs.length+1&&typeof params[params.length-1]==="object"){tx=properties_1.shallowCopy(params.pop());if(tx.blockTag!=null){blockTag=tx.blockTag}delete tx.blockTag;for(var key in tx){if(!allowedTransactionKeys[key]){throw new Error("unknown transaction override "+key)}}}if(params.length!=method.inputs.length){throw new Error("incorrect number of arguments")}["data","to"].forEach(function(key){if(tx[key]!=null){errors.throwError("cannot override "+key,errors.UNSUPPORTED_OPERATION,{operation:key})}});tx.to=contract.deployed().then(function(){return contract.addressPromise});return resolveAddresses(contract.provider,params,method.inputs).then(function(params){tx.data=method.encode(params);if(method.type==="call"){if(estimateOnly){return Promise.resolve(constants_1.Zero)}if(!contract.provider){errors.throwError("call (constant functions) require a provider or a signer with a provider",errors.UNSUPPORTED_OPERATION,{operation:"call"})}["gasLimit","gasPrice","value"].forEach(function(key){if(tx[key]!=null){throw new Error("call cannot override "+key)}});if(tx.from==null&&contract.signer){tx.from=contract.signer.getAddress()}return contract.provider.call(tx,blockTag).then(function(value){if(bytes_1.hexDataLength(value)%32===4&&bytes_1.hexDataSlice(value,0,4)==="0x08c379a0"){var reason=abi_coder_1.defaultAbiCoder.decode(["string"],bytes_1.hexDataSlice(value,4));errors.throwError("call revert exception",errors.CALL_EXCEPTION,{address:contract.address,args:params,method:method.signature,errorSignature:"Error(string)",errorArgs:[reason],reason:reason,transaction:tx})}try{var result=method.decode(value);if(method.outputs.length===1){result=result[0]}return result}catch(error){if(value==="0x"&&method.outputs.length>0){errors.throwError("call exception",errors.CALL_EXCEPTION,{address:contract.address,method:method.signature,args:params})}throw error}})}else if(method.type==="transaction"){if(estimateOnly){if(!contract.provider){errors.throwError("estimate gas require a provider or a signer with a provider",errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"})}if(tx.from==null&&contract.signer){tx.from=contract.signer.getAddress()}return contract.provider.estimateGas(tx)}if(tx.gasLimit==null&&method.gas!=null){tx.gasLimit=bignumber_1.bigNumberify(method.gas).add(21e3)}if(!contract.signer){errors.throwError("sending a transaction require a signer",errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"})}if(tx.from!=null){errors.throwError("cannot override from in a transaction",errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"})}return contract.signer.sendTransaction(tx).then(function(tx){var wait=tx.wait.bind(tx);tx.wait=function(confirmations){return wait(confirmations).then(function(receipt){receipt.events=receipt.logs.map(function(log){var event=properties_1.deepCopy(log);var parsed=_this.interface.parseLog(log);if(parsed){event.args=parsed.values;event.decode=parsed.decode;event.event=parsed.name;event.eventSignature=parsed.signature}event.removeListener=function(){return _this.provider};event.getBlock=function(){return _this.provider.getBlock(receipt.blockHash)};event.getTransaction=function(){return _this.provider.getTransaction(receipt.transactionHash)};event.getTransactionReceipt=function(){return Promise.resolve(receipt)};return event});return receipt})};return tx})}throw new Error("invalid type - "+method.type);return null})}}function getEventTag(filter){if(filter.address&&(filter.topics==null||filter.topics.length===0)){return"*"}return(filter.address||"*")+"@"+(filter.topics?filter.topics.join(":"):"")}var Contract=function(){function Contract(addressOrName,contractInterface,signerOrProvider){var _this=this;errors.checkNew(this,Contract);if(interface_1.Interface.isInterface(contractInterface)){properties_1.defineReadOnly(this,"interface",contractInterface)}else{properties_1.defineReadOnly(this,"interface",new interface_1.Interface(contractInterface))}if(abstract_signer_1.Signer.isSigner(signerOrProvider)){properties_1.defineReadOnly(this,"provider",signerOrProvider.provider);properties_1.defineReadOnly(this,"signer",signerOrProvider)}else if(abstract_provider_1.Provider.isProvider(signerOrProvider)){properties_1.defineReadOnly(this,"provider",signerOrProvider);properties_1.defineReadOnly(this,"signer",null)}else{errors.throwError("invalid signer or provider",errors.INVALID_ARGUMENT,{arg:"signerOrProvider",value:signerOrProvider})}properties_1.defineReadOnly(this,"estimate",{});properties_1.defineReadOnly(this,"functions",{});properties_1.defineReadOnly(this,"filters",{});Object.keys(this.interface.events).forEach(function(eventName){var event=_this.interface.events[eventName];properties_1.defineReadOnly(_this.filters,eventName,function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return{address:_this.address,topics:event.encodeTopics(args)}})});this._events=[];properties_1.defineReadOnly(this,"address",addressOrName);if(this.provider){properties_1.defineReadOnly(this,"addressPromise",this.provider.resolveName(addressOrName).then(function(address){if(address==null){throw new Error("name not found")}return address}).catch(function(error){console.log("ERROR: Cannot find Contract - "+addressOrName);throw error}))}else{try{properties_1.defineReadOnly(this,"addressPromise",Promise.resolve(address_1.getAddress(addressOrName)))}catch(error){errors.throwError("provider is required to use non-address contract address",errors.INVALID_ARGUMENT,{argument:"addressOrName",value:addressOrName})}}Object.keys(this.interface.functions).forEach(function(name){var run=runMethod(_this,name,false);if(_this[name]==null){properties_1.defineReadOnly(_this,name,run)}else{console.log("WARNING: Multiple definitions for "+name)}if(_this.functions[name]==null){properties_1.defineReadOnly(_this.functions,name,run);properties_1.defineReadOnly(_this.estimate,name,runMethod(_this,name,true))}})}Contract.prototype.deployed=function(){var _this=this;if(!this._deployed){if(this.deployTransaction){this._deployed=this.deployTransaction.wait().then(function(){return _this})}else{this._deployed=this.provider.getCode(this.address).then(function(code){if(code==="0x"){errors.throwError("contract not deployed",errors.UNSUPPORTED_OPERATION,{contractAddress:_this.address,operation:"getDeployed"})}return _this})}}return this._deployed};Contract.prototype.fallback=function(overrides){var _this=this;if(!this.signer){errors.throwError("sending a transaction require a signer",errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"})}var tx=properties_1.shallowCopy(overrides||{});["from","to"].forEach(function(key){if(tx[key]==null){return}errors.throwError("cannot override "+key,errors.UNSUPPORTED_OPERATION,{operation:key})});tx.to=this.addressPromise;return this.deployed().then(function(){return _this.signer.sendTransaction(tx)})};Contract.prototype.connect=function(signerOrProvider){if(typeof signerOrProvider==="string"){signerOrProvider=new VoidSigner(signerOrProvider,this.provider)}var contract=new Contract(this.address,this.interface,signerOrProvider);if(this.deployTransaction){properties_1.defineReadOnly(contract,"deployTransaction",this.deployTransaction)}return contract};Contract.prototype.attach=function(addressOrName){return new Contract(addressOrName,this.interface,this.signer||this.provider)};Contract.isIndexed=function(value){return interface_1.Interface.isIndexed(value)};Contract.prototype._getEventFilter=function(eventName){var _this=this;if(typeof eventName==="string"){if(eventName==="*"){return{prepareEvent:function(e){var parsed=_this.interface.parseLog(e);if(parsed){e.args=parsed.values;e.decode=parsed.decode;e.event=parsed.name;e.eventSignature=parsed.signature}return[e]},eventTag:"*",filter:{address:this.address}}}if(eventName.indexOf("(")!==-1){eventName=abi_coder_1.formatSignature(abi_coder_1.parseSignature("event "+eventName))}var event_1=this.interface.events[eventName];if(!event_1){errors.throwError("unknown event - "+eventName,errors.INVALID_ARGUMENT,{argumnet:"eventName",value:eventName})}var filter_1={address:this.address,topics:[event_1.topic]};return{prepareEvent:function(e){var args=event_1.decode(e.data,e.topics);e.args=args;var result=Array.prototype.slice.call(args);result.push(e);return result},event:event_1,eventTag:getEventTag(filter_1),filter:filter_1}}var filter={address:this.address};var event=null;if(eventName.topics&&eventName.topics[0]){filter.topics=eventName.topics;for(var name_1 in this.interface.events){if(name_1.indexOf("(")===-1){continue}var e=this.interface.events[name_1];if(e.topic===eventName.topics[0].toLowerCase()){event=e;break}}}return{prepareEvent:function(e){if(!event){return[e]}var args=event.decode(e.data,e.topics);e.args=args;var result=Array.prototype.slice.call(args);result.push(e);return result},event:event,eventTag:getEventTag(filter),filter:filter}};Contract.prototype._addEventListener=function(eventFilter,listener,once){var _this=this;if(!this.provider){errors.throwError("events require a provider or a signer with a provider",errors.UNSUPPORTED_OPERATION,{operation:"once"})}var wrappedListener=function(log){var event=properties_1.deepCopy(log);var args=eventFilter.prepareEvent(event);if(eventFilter.event){event.decode=eventFilter.event.decode;event.event=eventFilter.event.name;event.eventSignature=eventFilter.event.signature}event.removeListener=function(){_this.removeListener(eventFilter.filter,listener)};event.getBlock=function(){return _this.provider.getBlock(log.blockHash)};event.getTransaction=function(){return _this.provider.getTransaction(log.transactionHash)};event.getTransactionReceipt=function(){return _this.provider.getTransactionReceipt(log.transactionHash)};_this.emit.apply(_this,[eventFilter.filter].concat(args))};this.provider.on(eventFilter.filter,wrappedListener);this._events.push({eventFilter:eventFilter,listener:listener,wrappedListener:wrappedListener,once:once})};Contract.prototype.on=function(event,listener){this._addEventListener(this._getEventFilter(event),listener,false);return this};Contract.prototype.once=function(event,listener){this._addEventListener(this._getEventFilter(event),listener,true);return this};Contract.prototype.addListener=function(eventName,listener){return this.on(eventName,listener)};Contract.prototype.emit=function(eventName){var _this=this;var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}if(!this.provider){return false}var result=false;var eventFilter=this._getEventFilter(eventName);this._events=this._events.filter(function(event){if(event.eventFilter.eventTag!==eventFilter.eventTag){return true}setTimeout(function(){event.listener.apply(_this,args)},0);result=true;return!event.once});return result};Contract.prototype.listenerCount=function(eventName){if(!this.provider){return 0}var eventFilter=this._getEventFilter(eventName);return this._events.filter(function(event){return event.eventFilter.eventTag===eventFilter.eventTag}).length};Contract.prototype.listeners=function(eventName){if(!this.provider){return[]}var eventFilter=this._getEventFilter(eventName);return this._events.filter(function(event){return event.eventFilter.eventTag===eventFilter.eventTag}).map(function(event){return event.listener})};Contract.prototype.removeAllListeners=function(eventName){if(!this.provider){return this}var eventFilter=this._getEventFilter(eventName);this._events=this._events.filter(function(event){return event.eventFilter.eventTag!==eventFilter.eventTag});return this};Contract.prototype.removeListener=function(eventName,listener){var _this=this;if(!this.provider){return this}var found=false;var eventFilter=this._getEventFilter(eventName);this._events=this._events.filter(function(event){if(event.eventFilter.eventTag!==eventFilter.eventTag){return true}if(event.listener!==listener){return true}_this.provider.removeListener(event.eventFilter.filter,event.wrappedListener);if(found){return true}found=true;return false});return this};return Contract}();exports.Contract=Contract;var ContractFactory=function(){function ContractFactory(contractInterface,bytecode,signer){var bytecodeHex=null;if(typeof bytecode==="string"){bytecodeHex=bytecode}else if(bytes_1.isArrayish(bytecode)){bytecodeHex=bytes_1.hexlify(bytecode)}else if(typeof bytecode.object==="string"){bytecodeHex=bytecode.object}else{errors.throwError("bytecode must be a valid hex string",errors.INVALID_ARGUMENT,{arg:"bytecode",value:bytecode})}if(bytecodeHex.substring(0,2)!=="0x"){bytecodeHex="0x"+bytecodeHex}if(!bytes_1.isHexString(bytecodeHex)){errors.throwError("bytecode must be a valid hex string",errors.INVALID_ARGUMENT,{arg:"bytecode",value:bytecode})}if(bytecodeHex.length%2!==0){errors.throwError("bytecode must be valid data (even length)",errors.INVALID_ARGUMENT,{arg:"bytecode",value:bytecode})}properties_1.defineReadOnly(this,"bytecode",bytecodeHex);if(interface_1.Interface.isInterface(contractInterface)){properties_1.defineReadOnly(this,"interface",contractInterface)}else{properties_1.defineReadOnly(this,"interface",new interface_1.Interface(contractInterface))}if(signer&&!abstract_signer_1.Signer.isSigner(signer)){errors.throwError("invalid signer",errors.INVALID_ARGUMENT,{arg:"signer",value:null})}properties_1.defineReadOnly(this,"signer",signer||null)}ContractFactory.prototype.getDeployTransaction=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var tx={};if(args.length===this.interface.deployFunction.inputs.length+1){tx=properties_1.shallowCopy(args.pop());for(var key in tx){if(!allowedTransactionKeys[key]){throw new Error("unknown transaction override "+key)}}}["data","from","to"].forEach(function(key){if(tx[key]==null){return}errors.throwError("cannot override "+key,errors.UNSUPPORTED_OPERATION,{operation:key})});errors.checkArgumentCount(args.length,this.interface.deployFunction.inputs.length," in Contract constructor");tx.data=this.interface.deployFunction.encode(this.bytecode,args);return tx};ContractFactory.prototype.deploy=function(){var _this=this;var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var tx=this.getDeployTransaction.apply(this,args);return this.signer.sendTransaction(tx).then(function(tx){var contract=new Contract(address_1.getContractAddress(tx),_this.interface,_this.signer);properties_1.defineReadOnly(contract,"deployTransaction",tx);return contract})};ContractFactory.prototype.attach=function(address){return new Contract(address,this.interface,this.signer)};ContractFactory.prototype.connect=function(signer){return new ContractFactory(this.interface,this.bytecode,signer)};ContractFactory.fromSolidity=function(compilerOutput,signer){if(compilerOutput==null){errors.throwError("missing compiler output",errors.MISSING_ARGUMENT,{argument:"compilerOutput"})}if(typeof compilerOutput==="string"){compilerOutput=JSON.parse(compilerOutput)}var abi=compilerOutput.abi;var bytecode=null;if(compilerOutput.bytecode){bytecode=compilerOutput.bytecode}else if(compilerOutput.evm&&compilerOutput.evm.bytecode){bytecode=compilerOutput.evm.bytecode}return new ContractFactory(abi,bytecode,signer)};return ContractFactory}();exports.ContractFactory=ContractFactory},{"./abstract-signer":2,"./constants":3,"./errors":5,"./providers/abstract-provider":49,"./utils/abi-coder":58,"./utils/address":59,"./utils/bignumber":61,"./utils/bytes":62,"./utils/interface":67,"./utils/properties":72}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _version_1=require("./_version");exports.UNKNOWN_ERROR="UNKNOWN_ERROR";exports.NOT_IMPLEMENTED="NOT_IMPLEMENTED";exports.MISSING_NEW="MISSING_NEW";exports.CALL_EXCEPTION="CALL_EXCEPTION";exports.INVALID_ARGUMENT="INVALID_ARGUMENT";exports.MISSING_ARGUMENT="MISSING_ARGUMENT";exports.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT";exports.NUMERIC_FAULT="NUMERIC_FAULT";exports.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS";exports.NONCE_EXPIRED="NONCE_EXPIRED";exports.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED";exports.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION";var _permanentCensorErrors=false;var _censorErrors=false;function throwError(message,code,params){if(_censorErrors){throw new Error("unknown error")}if(!code){code=exports.UNKNOWN_ERROR}if(!params){params={}}var messageDetails=[];Object.keys(params).forEach(function(key){try{messageDetails.push(key+"="+JSON.stringify(params[key]))}catch(error){messageDetails.push(key+"="+JSON.stringify(params[key].toString()))}});messageDetails.push("version="+_version_1.version);var reason=message;if(messageDetails.length){message+=" ("+messageDetails.join(", ")+")"}var error=new Error(message);error.reason=reason;error.code=code;Object.keys(params).forEach(function(key){error[key]=params[key]});throw error}exports.throwError=throwError;function checkNew(self,kind){if(!(self instanceof kind)){throwError("missing new",exports.MISSING_NEW,{name:kind.name})}}exports.checkNew=checkNew;function checkArgumentCount(count,expectedCount,suffix){if(!suffix){suffix=""}if(count<expectedCount){throwError("missing argument"+suffix,exports.MISSING_ARGUMENT,{count:count,expectedCount:expectedCount})}if(count>expectedCount){throwError("too many arguments"+suffix,exports.UNEXPECTED_ARGUMENT,{count:count,expectedCount:expectedCount})}}exports.checkArgumentCount=checkArgumentCount;function setCensorship(censorship,permanent){if(_permanentCensorErrors){throwError("error censorship permanent",exports.UNSUPPORTED_OPERATION,{operation:"setCersorship"})}_censorErrors=!!censorship;_permanentCensorErrors=!!permanent}exports.setCensorship=setCensorship;function checkNormalize(){try{if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769)){throw new Error("broken")}}catch(error){throwError("platform missing String.prototype.normalize",exports.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize"})}}exports.checkNormalize=checkNormalize},{"./_version":1}],6:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var contract_1=require("./contract");exports.Contract=contract_1.Contract;exports.ContractFactory=contract_1.ContractFactory;exports.VoidSigner=contract_1.VoidSigner;var abstract_signer_1=require("./abstract-signer");exports.Signer=abstract_signer_1.Signer;var wallet_1=require("./wallet");exports.Wallet=wallet_1.Wallet;var constants=__importStar(require("./constants"));exports.constants=constants;var errors=__importStar(require("./errors"));exports.errors=errors;var providers=__importStar(require("./providers"));exports.providers=providers;var utils=__importStar(require("./utils"));exports.utils=utils;var wordlists=__importStar(require("./wordlists"));exports.wordlists=wordlists;var shims_1=require("./utils/shims");exports.platform=shims_1.platform;var _version_1=require("./_version");exports.version=_version_1.version;function getDefaultProvider(network){if(network==null){network="homestead"}var n=utils.getNetwork(network);if(!n||!n._defaultProvider){errors.throwError("unsupported getDefaultProvider network",errors.UNSUPPORTED_OPERATION,{operation:"getDefaultProvider",network:network})}return n._defaultProvider(providers)}exports.getDefaultProvider=getDefaultProvider},{"./_version":1,"./abstract-signer":2,"./constants":3,"./contract":4,"./errors":5,"./providers":53,"./utils":66,"./utils/shims":78,"./wallet":86,"./wordlists":87}],7:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var ethers=__importStar(require("./ethers"));exports.ethers=ethers;__export(require("./ethers"))},{"./ethers":6}],8:[function(require,module,exports){"use strict";(function(root){function checkInt(value){return parseInt(value)===value}function checkInts(arrayish){if(!checkInt(arrayish.length)){return false}for(var i=0;i<arrayish.length;i++){if(!checkInt(arrayish[i])||arrayish[i]<0||arrayish[i]>255){return false}}return true}function coerceArray(arg,copy){if(arg.buffer&&ArrayBuffer.isView(arg)&&arg.name==="Uint8Array"){if(copy){if(arg.slice){arg=arg.slice()}else{arg=Array.prototype.slice.call(arg)}}return arg}if(Array.isArray(arg)){if(!checkInts(arg)){throw new Error("Array contains invalid value: "+arg)}return new Uint8Array(arg)}if(checkInt(arg.length)&&checkInts(arg)){return new Uint8Array(arg)}throw new Error("unsupported array-like object")}function createArray(length){return new Uint8Array(length)}function copyArray(sourceArray,targetArray,targetStart,sourceStart,sourceEnd){if(sourceStart!=null||sourceEnd!=null){if(sourceArray.slice){sourceArray=sourceArray.slice(sourceStart,sourceEnd)}else{sourceArray=Array.prototype.slice.call(sourceArray,sourceStart,sourceEnd)}}targetArray.set(sourceArray,targetStart)}var convertUtf8=function(){function toBytes(text){var result=[],i=0;text=encodeURI(text);while(i<text.length){var c=text.charCodeAt(i++);if(c===37){result.push(parseInt(text.substr(i,2),16));i+=2}else{result.push(c)}}return coerceArray(result)}function fromBytes(bytes){var result=[],i=0;while(i<bytes.length){var c=bytes[i];if(c<128){result.push(String.fromCharCode(c));i++}else if(c>191&&c<224){result.push(String.fromCharCode((c&31)<<6|bytes[i+1]&63));i+=2}else{result.push(String.fromCharCode((c&15)<<12|(bytes[i+1]&63)<<6|bytes[i+2]&63));i+=3}}return result.join("")}return{toBytes:toBytes,fromBytes:fromBytes}}();var convertHex=function(){function toBytes(text){var result=[];for(var i=0;i<text.length;i+=2){result.push(parseInt(text.substr(i,2),16))}return result}var Hex="0123456789abcdef";function fromBytes(bytes){var result=[];for(var i=0;i<bytes.length;i++){var v=bytes[i];result.push(Hex[(v&240)>>4]+Hex[v&15])}return result.join("")}return{toBytes:toBytes,fromBytes:fromBytes}}();var numberOfRounds={16:10,24:12,32:14};var rcon=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145];var S=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var Si=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];var T1=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986];
var T2=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766];var T3=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126];var T4=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436];var T5=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890];var T6=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935];var T7=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600];var T8=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480];var U1=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795];var U2=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855];var U3=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150];var U4=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function convertToInt32(bytes){var result=[];for(var i=0;i<bytes.length;i+=4){result.push(bytes[i]<<24|bytes[i+1]<<16|bytes[i+2]<<8|bytes[i+3])}return result}var AES=function(key){if(!(this instanceof AES)){throw Error("AES must be instanitated with `new`")}Object.defineProperty(this,"key",{value:coerceArray(key,true)});this._prepare()};AES.prototype._prepare=function(){var rounds=numberOfRounds[this.key.length];if(rounds==null){throw new Error("invalid key size (must be 16, 24 or 32 bytes)")}this._Ke=[];this._Kd=[];for(var i=0;i<=rounds;i++){this._Ke.push([0,0,0,0]);this._Kd.push([0,0,0,0])}var roundKeyCount=(rounds+1)*4;var KC=this.key.length/4;var tk=convertToInt32(this.key);var index;for(var i=0;i<KC;i++){index=i>>2;this._Ke[index][i%4]=tk[i];this._Kd[rounds-index][i%4]=tk[i]}var rconpointer=0;var t=KC,tt;while(t<roundKeyCount){tt=tk[KC-1];tk[0]^=S[tt>>16&255]<<24^S[tt>>8&255]<<16^S[tt&255]<<8^S[tt>>24&255]^rcon[rconpointer]<<24;rconpointer+=1;if(KC!=8){for(var i=1;i<KC;i++){tk[i]^=tk[i-1]}}else{for(var i=1;i<KC/2;i++){tk[i]^=tk[i-1]}tt=tk[KC/2-1];tk[KC/2]^=S[tt&255]^S[tt>>8&255]<<8^S[tt>>16&255]<<16^S[tt>>24&255]<<24;for(var i=KC/2+1;i<KC;i++){tk[i]^=tk[i-1]}}var i=0,r,c;while(i<KC&&t<roundKeyCount){r=t>>2;c=t%4;this._Ke[r][c]=tk[i];this._Kd[rounds-r][c]=tk[i++];t++}}for(var r=1;r<rounds;r++){for(var c=0;c<4;c++){tt=this._Kd[r][c];this._Kd[r][c]=U1[tt>>24&255]^U2[tt>>16&255]^U3[tt>>8&255]^U4[tt&255]}}};AES.prototype.encrypt=function(plaintext){if(plaintext.length!=16){throw new Error("invalid plaintext size (must be 16 bytes)")}var rounds=this._Ke.length-1;var a=[0,0,0,0];var t=convertToInt32(plaintext);for(var i=0;i<4;i++){t[i]^=this._Ke[0][i]}for(var r=1;r<rounds;r++){for(var i=0;i<4;i++){
a[i]=T1[t[i]>>24&255]^T2[t[(i+1)%4]>>16&255]^T3[t[(i+2)%4]>>8&255]^T4[t[(i+3)%4]&255]^this._Ke[r][i]}t=a.slice()}var result=createArray(16),tt;for(var i=0;i<4;i++){tt=this._Ke[rounds][i];result[4*i]=(S[t[i]>>24&255]^tt>>24)&255;result[4*i+1]=(S[t[(i+1)%4]>>16&255]^tt>>16)&255;result[4*i+2]=(S[t[(i+2)%4]>>8&255]^tt>>8)&255;result[4*i+3]=(S[t[(i+3)%4]&255]^tt)&255}return result};AES.prototype.decrypt=function(ciphertext){if(ciphertext.length!=16){throw new Error("invalid ciphertext size (must be 16 bytes)")}var rounds=this._Kd.length-1;var a=[0,0,0,0];var t=convertToInt32(ciphertext);for(var i=0;i<4;i++){t[i]^=this._Kd[0][i]}for(var r=1;r<rounds;r++){for(var i=0;i<4;i++){a[i]=T5[t[i]>>24&255]^T6[t[(i+3)%4]>>16&255]^T7[t[(i+2)%4]>>8&255]^T8[t[(i+1)%4]&255]^this._Kd[r][i]}t=a.slice()}var result=createArray(16),tt;for(var i=0;i<4;i++){tt=this._Kd[rounds][i];result[4*i]=(Si[t[i]>>24&255]^tt>>24)&255;result[4*i+1]=(Si[t[(i+3)%4]>>16&255]^tt>>16)&255;result[4*i+2]=(Si[t[(i+2)%4]>>8&255]^tt>>8)&255;result[4*i+3]=(Si[t[(i+1)%4]&255]^tt)&255}return result};var ModeOfOperationECB=function(key){if(!(this instanceof ModeOfOperationECB)){throw Error("AES must be instanitated with `new`")}this.description="Electronic Code Block";this.name="ecb";this._aes=new AES(key)};ModeOfOperationECB.prototype.encrypt=function(plaintext){plaintext=coerceArray(plaintext);if(plaintext.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var ciphertext=createArray(plaintext.length);var block=createArray(16);for(var i=0;i<plaintext.length;i+=16){copyArray(plaintext,block,0,i,i+16);block=this._aes.encrypt(block);copyArray(block,ciphertext,i)}return ciphertext};ModeOfOperationECB.prototype.decrypt=function(ciphertext){ciphertext=coerceArray(ciphertext);if(ciphertext.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var plaintext=createArray(ciphertext.length);var block=createArray(16);for(var i=0;i<ciphertext.length;i+=16){copyArray(ciphertext,block,0,i,i+16);block=this._aes.decrypt(block);copyArray(block,plaintext,i)}return plaintext};var ModeOfOperationCBC=function(key,iv){if(!(this instanceof ModeOfOperationCBC)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Block Chaining";this.name="cbc";if(!iv){iv=createArray(16)}else if(iv.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastCipherblock=coerceArray(iv,true);this._aes=new AES(key)};ModeOfOperationCBC.prototype.encrypt=function(plaintext){plaintext=coerceArray(plaintext);if(plaintext.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var ciphertext=createArray(plaintext.length);var block=createArray(16);for(var i=0;i<plaintext.length;i+=16){copyArray(plaintext,block,0,i,i+16);for(var j=0;j<16;j++){block[j]^=this._lastCipherblock[j]}this._lastCipherblock=this._aes.encrypt(block);copyArray(this._lastCipherblock,ciphertext,i)}return ciphertext};ModeOfOperationCBC.prototype.decrypt=function(ciphertext){ciphertext=coerceArray(ciphertext);if(ciphertext.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var plaintext=createArray(ciphertext.length);var block=createArray(16);for(var i=0;i<ciphertext.length;i+=16){copyArray(ciphertext,block,0,i,i+16);block=this._aes.decrypt(block);for(var j=0;j<16;j++){plaintext[i+j]=block[j]^this._lastCipherblock[j]}copyArray(ciphertext,this._lastCipherblock,0,i,i+16)}return plaintext};var ModeOfOperationCFB=function(key,iv,segmentSize){if(!(this instanceof ModeOfOperationCFB)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Feedback";this.name="cfb";if(!iv){iv=createArray(16)}else if(iv.length!=16){throw new Error("invalid initialation vector size (must be 16 size)")}if(!segmentSize){segmentSize=1}this.segmentSize=segmentSize;this._shiftRegister=coerceArray(iv,true);this._aes=new AES(key)};ModeOfOperationCFB.prototype.encrypt=function(plaintext){if(plaintext.length%this.segmentSize!=0){throw new Error("invalid plaintext size (must be segmentSize bytes)")}var encrypted=coerceArray(plaintext,true);var xorSegment;for(var i=0;i<encrypted.length;i+=this.segmentSize){xorSegment=this._aes.encrypt(this._shiftRegister);for(var j=0;j<this.segmentSize;j++){encrypted[i+j]^=xorSegment[j]}copyArray(this._shiftRegister,this._shiftRegister,0,this.segmentSize);copyArray(encrypted,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return encrypted};ModeOfOperationCFB.prototype.decrypt=function(ciphertext){if(ciphertext.length%this.segmentSize!=0){throw new Error("invalid ciphertext size (must be segmentSize bytes)")}var plaintext=coerceArray(ciphertext,true);var xorSegment;for(var i=0;i<plaintext.length;i+=this.segmentSize){xorSegment=this._aes.encrypt(this._shiftRegister);for(var j=0;j<this.segmentSize;j++){plaintext[i+j]^=xorSegment[j]}copyArray(this._shiftRegister,this._shiftRegister,0,this.segmentSize);copyArray(ciphertext,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return plaintext};var ModeOfOperationOFB=function(key,iv){if(!(this instanceof ModeOfOperationOFB)){throw Error("AES must be instanitated with `new`")}this.description="Output Feedback";this.name="ofb";if(!iv){iv=createArray(16)}else if(iv.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastPrecipher=coerceArray(iv,true);this._lastPrecipherIndex=16;this._aes=new AES(key)};ModeOfOperationOFB.prototype.encrypt=function(plaintext){var encrypted=coerceArray(plaintext,true);for(var i=0;i<encrypted.length;i++){if(this._lastPrecipherIndex===16){this._lastPrecipher=this._aes.encrypt(this._lastPrecipher);this._lastPrecipherIndex=0}encrypted[i]^=this._lastPrecipher[this._lastPrecipherIndex++]}return encrypted};ModeOfOperationOFB.prototype.decrypt=ModeOfOperationOFB.prototype.encrypt;var Counter=function(initialValue){if(!(this instanceof Counter)){throw Error("Counter must be instanitated with `new`")}if(initialValue!==0&&!initialValue){initialValue=1}if(typeof initialValue==="number"){this._counter=createArray(16);this.setValue(initialValue)}else{this.setBytes(initialValue)}};Counter.prototype.setValue=function(value){if(typeof value!=="number"||parseInt(value)!=value){throw new Error("invalid counter value (must be an integer)")}for(var index=15;index>=0;--index){this._counter[index]=value%256;value=value>>8}};Counter.prototype.setBytes=function(bytes){bytes=coerceArray(bytes,true);if(bytes.length!=16){throw new Error("invalid counter bytes size (must be 16 bytes)")}this._counter=bytes};Counter.prototype.increment=function(){for(var i=15;i>=0;i--){if(this._counter[i]===255){this._counter[i]=0}else{this._counter[i]++;break}}};var ModeOfOperationCTR=function(key,counter){if(!(this instanceof ModeOfOperationCTR)){throw Error("AES must be instanitated with `new`")}this.description="Counter";this.name="ctr";if(!(counter instanceof Counter)){counter=new Counter(counter)}this._counter=counter;this._remainingCounter=null;this._remainingCounterIndex=16;this._aes=new AES(key)};ModeOfOperationCTR.prototype.encrypt=function(plaintext){var encrypted=coerceArray(plaintext,true);for(var i=0;i<encrypted.length;i++){if(this._remainingCounterIndex===16){this._remainingCounter=this._aes.encrypt(this._counter._counter);this._remainingCounterIndex=0;this._counter.increment()}encrypted[i]^=this._remainingCounter[this._remainingCounterIndex++]}return encrypted};ModeOfOperationCTR.prototype.decrypt=ModeOfOperationCTR.prototype.encrypt;function pkcs7pad(data){data=coerceArray(data,true);var padder=16-data.length%16;var result=createArray(data.length+padder);copyArray(data,result);for(var i=data.length;i<result.length;i++){result[i]=padder}return result}function pkcs7strip(data){data=coerceArray(data,true);if(data.length<16){throw new Error("PKCS#7 invalid length")}var padder=data[data.length-1];if(padder>16){throw new Error("PKCS#7 padding byte out of range")}var length=data.length-padder;for(var i=0;i<padder;i++){if(data[length+i]!==padder){throw new Error("PKCS#7 invalid padding byte")}}var result=createArray(length);copyArray(data,result,0,0,length);return result}var aesjs={AES:AES,Counter:Counter,ModeOfOperation:{ecb:ModeOfOperationECB,cbc:ModeOfOperationCBC,cfb:ModeOfOperationCFB,ofb:ModeOfOperationOFB,ctr:ModeOfOperationCTR},utils:{hex:convertHex,utf8:convertUtf8},padding:{pkcs7:{pad:pkcs7pad,strip:pkcs7strip}},_arrayTest:{coerceArray:coerceArray,createArray:createArray,copyArray:copyArray}};if(typeof exports!=="undefined"){module.exports=aesjs}else if(typeof define==="function"&&define.amd){define(aesjs)}else{if(root.aesjs){aesjs._aesjs=root.aesjs}root.aesjs=aesjs}})(this)},{}],9:[function(require,module,exports){(function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number)){return number}this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==="le"||base==="be"){endian=base;base=10}this._init(number||0,base||10,endian||"be")}}if(typeof module==="object"){module.exports=BN}else{exports.BN=BN}BN.BN=BN;BN.wordSize=26;var Buffer;try{Buffer=require("buffer").Buffer}catch(e){}BN.isBN=function isBN(num){if(num instanceof BN){return true}return num!==null&&typeof num==="object"&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right};BN.prototype._init=function init(number,base,endian){if(typeof number==="number"){return this._initNumber(number,base,endian)}if(typeof number==="object"){return this._initArray(number,base,endian)}if(base==="hex"){base=16}assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,"");var start=0;if(number[0]==="-"){start++}if(base===16){this._parseHex(number,start)}else{this._parseBase(number,base,start)}if(number[0]==="-"){this.negative=1}this.strip();if(endian!=="le")return;this._initArray(this.toArray(),base,endian)};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number}if(number<67108864){this.words=[number&67108863];this.length=1}else if(number<4503599627370496){this.words=[number&67108863,number/67108864&67108863];this.length=2}else{assert(number<9007199254740992);this.words=[number&67108863,number/67108864&67108863,1];this.length=3}if(endian!=="le")return;this._initArray(this.toArray(),base,endian)};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==="number");if(number.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var j,w;var off=0;if(endian==="be"){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}else if(endian==="le"){for(i=0,j=0;i<number.length;i+=3){w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}return this.strip()};function parseHex(str,start,end){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4;if(c>=49&&c<=54){r|=c-49+10}else if(c>=17&&c<=22){r|=c-17+10}else{r|=c&15}}return r}BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var j,w;var off=0;for(i=number.length-6,j=0;i>=start;i-=6){w=parseHex(number,i,i+6);this.words[j]|=w<<off&67108863;this.words[j+1]|=w>>>26-off&4194303;off+=24;if(off>=26){off-=26;j++}}if(i+6!==start){w=parseHex(number,start,i+6);this.words[j]|=w<<off&67108863;this.words[j+1]|=w>>>26-off&4194303}this.strip()};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){r+=c-49+10}else if(c>=17){r+=c-17+10}else{r+=c}}return r}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base){limbLen++}limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base}this.imuln(pow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i]}dest.length=this.length;dest.negative=this.negative;dest.red=this.red};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0}return this};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==="hex"){out="";var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&16777215).toString(16);carry=w>>>24-off&16777215;if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out}else{out=word+out}off+=2;if(off>=26){off-=26;i--}}if(carry!==0){out=carry.toString(16)+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out="";var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out}else{out=r+out}}if(this.isZero()){out="0"+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}assert(false,"Base should be between 2 and 36")};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){ret+=4503599627370496+this.words[1]*67108864}else if(this.length>2){assert(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-ret:ret};BN.prototype.toJSON=function toJSON(){return this.toString(16)};BN.prototype.toBuffer=function toBuffer(endian,length){assert(typeof Buffer!=="undefined");return this.toArrayLike(Buffer,endian,length)};BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length)};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length");assert(reqLength>0,"Requested array length <= 0");this.strip();var littleEndian=endian==="le";var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++){res[i]=0}for(i=0;!q.isZero();i++){b=q.andln(255);q.iushrn(8);res[reqLength-i-1]=b}}else{for(i=0;!q.isZero();i++){b=q.andln(255);q.iushrn(8);res[i]=b}for(;i<reqLength;i++){res[i]=0}}return res};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w)}}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=4096){r+=13;t>>>=13}if(t>=64){r+=7;t>>>=7}if(t>=8){r+=4;t>>>=4}if(t>=2){r+=2;t>>>=2}return r+t}}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&8191)===0){r+=13;t>>>=13}if((t&127)===0){r+=7;t>>>=7}if((t&15)===0){r+=4;t>>>=4}if((t&3)===0){r+=2;t>>>=2}if((t&1)===0){r++}return r};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break}return r};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1)}return this.clone()};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg()}return this.clone()};BN.prototype.isNeg=function isNeg(){return this.negative!==0};BN.prototype.neg=function neg(){return this.clone().ineg()};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1}return this};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0}for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i]}return this.strip()};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num)};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this)};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this)};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num}else{b=this}for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i]}this.length=b.length;return this.strip()};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num)};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this)};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this)};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i]}if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=a.length;return this.strip()};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num)};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this)};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this)};BN.prototype.inotn=function inotn(width){assert(typeof width==="number"&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--}for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&67108863}if(bitsLeft>0){this.words[i]=~this.words[i]&67108863>>26-bitsLeft}return this.strip()};BN.prototype.notn=function notn(width){return this.clone().inotn(width)};BN.prototype.setn=function setn(bit,val){assert(typeof bit==="number"&&bit>=0);var off=bit/26|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|1<<wbit}else{this.words[off]=this.words[off]&~(1<<wbit)}return this.strip()};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign()}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign()}var a,b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}return this};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res}if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this)};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign()}var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this}var a,b;if(cmp>0){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=Math.max(this.length,i);if(a!==this){this.negative=1}return this.strip()};BN.prototype.sub=function sub(num){return this.clone().isub(num)};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len;len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&67108863;var carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=r/67108864|0;rword=r&67108863}out.words[k]=rword|0;carry=ncarry|0}if(carry!==0){out.words[k]=carry|0}else{out.length--}return out.strip()}var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&8191;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&8191;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&8191;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&8191;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&8191;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&8191;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&8191;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&8191;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&8191;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&8191;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&8191;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&8191;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&8191;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&8191;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&8191;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&8191;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&8191;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&8191;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&8191;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&8191;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid=mid+Math.imul(ah0,bl0)|0;hi=Math.imul(ah0,bh0);var w0=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w0>>>26)|0;w0&=67108863;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid=mid+Math.imul(ah1,bl0)|0;hi=Math.imul(ah1,bh0);lo=lo+Math.imul(al0,bl1)|0;mid=mid+Math.imul(al0,bh1)|0;mid=mid+Math.imul(ah0,bl1)|0;hi=hi+Math.imul(ah0,bh1)|0;var w1=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w1>>>26)|0;w1&=67108863;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid=mid+Math.imul(ah2,bl0)|0;hi=Math.imul(ah2,bh0);lo=lo+Math.imul(al1,bl1)|0;mid=mid+Math.imul(al1,bh1)|0;mid=mid+Math.imul(ah1,bl1)|0;hi=hi+Math.imul(ah1,bh1)|0;lo=lo+Math.imul(al0,bl2)|0;mid=mid+Math.imul(al0,bh2)|0;mid=mid+Math.imul(ah0,bl2)|0;hi=hi+Math.imul(ah0,bh2)|0;var w2=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w2>>>26)|0;w2&=67108863;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid=mid+Math.imul(ah3,bl0)|0;hi=Math.imul(ah3,bh0);lo=lo+Math.imul(al2,bl1)|0;mid=mid+Math.imul(al2,bh1)|0;mid=mid+Math.imul(ah2,bl1)|0;hi=hi+Math.imul(ah2,bh1)|0;lo=lo+Math.imul(al1,bl2)|0;mid=mid+Math.imul(al1,bh2)|0;mid=mid+Math.imul(ah1,bl2)|0;hi=hi+Math.imul(ah1,bh2)|0;lo=lo+Math.imul(al0,bl3)|0;mid=mid+Math.imul(al0,bh3)|0;mid=mid+Math.imul(ah0,bl3)|0;hi=hi+Math.imul(ah0,bh3)|0;var w3=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w3>>>26)|0;w3&=67108863;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid=mid+Math.imul(ah4,bl0)|0;hi=Math.imul(ah4,bh0);lo=lo+Math.imul(al3,bl1)|0;mid=mid+Math.imul(al3,bh1)|0;mid=mid+Math.imul(ah3,bl1)|0;hi=hi+Math.imul(ah3,bh1)|0;lo=lo+Math.imul(al2,bl2)|0;mid=mid+Math.imul(al2,bh2)|0;mid=mid+Math.imul(ah2,bl2)|0;hi=hi+Math.imul(ah2,bh2)|0;lo=lo+Math.imul(al1,bl3)|0;mid=mid+Math.imul(al1,bh3)|0;mid=mid+Math.imul(ah1,bl3)|0;hi=hi+Math.imul(ah1,bh3)|0;lo=lo+Math.imul(al0,bl4)|0;mid=mid+Math.imul(al0,bh4)|0;mid=mid+Math.imul(ah0,bl4)|0;hi=hi+Math.imul(ah0,bh4)|0;var w4=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w4>>>26)|0;w4&=67108863;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid=mid+Math.imul(ah5,bl0)|0;hi=Math.imul(ah5,bh0);lo=lo+Math.imul(al4,bl1)|0;mid=mid+Math.imul(al4,bh1)|0;mid=mid+Math.imul(ah4,bl1)|0;hi=hi+Math.imul(ah4,bh1)|0;lo=lo+Math.imul(al3,bl2)|0;mid=mid+Math.imul(al3,bh2)|0;mid=mid+Math.imul(ah3,bl2)|0;hi=hi+Math.imul(ah3,bh2)|0;lo=lo+Math.imul(al2,bl3)|0;mid=mid+Math.imul(al2,bh3)|0;mid=mid+Math.imul(ah2,bl3)|0;hi=hi+Math.imul(ah2,bh3)|0;lo=lo+Math.imul(al1,bl4)|0;mid=mid+Math.imul(al1,bh4)|0;mid=mid+Math.imul(ah1,bl4)|0;hi=hi+Math.imul(ah1,bh4)|0;lo=lo+Math.imul(al0,bl5)|0;mid=mid+Math.imul(al0,bh5)|0;mid=mid+Math.imul(ah0,bl5)|0;hi=hi+Math.imul(ah0,bh5)|0;var w5=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w5>>>26)|0;w5&=67108863;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid=mid+Math.imul(ah6,bl0)|0;hi=Math.imul(ah6,bh0);lo=lo+Math.imul(al5,bl1)|0;mid=mid+Math.imul(al5,bh1)|0;mid=mid+Math.imul(ah5,bl1)|0;hi=hi+Math.imul(ah5,bh1)|0;lo=lo+Math.imul(al4,bl2)|0;mid=mid+Math.imul(al4,bh2)|0;mid=mid+Math.imul(ah4,bl2)|0;hi=hi+Math.imul(ah4,bh2)|0;lo=lo+Math.imul(al3,bl3)|0;mid=mid+Math.imul(al3,bh3)|0;mid=mid+Math.imul(ah3,bl3)|0;hi=hi+Math.imul(ah3,bh3)|0;lo=lo+Math.imul(al2,bl4)|0;mid=mid+Math.imul(al2,bh4)|0;mid=mid+Math.imul(ah2,bl4)|0;hi=hi+Math.imul(ah2,bh4)|0;lo=lo+Math.imul(al1,bl5)|0;mid=mid+Math.imul(al1,bh5)|0;mid=mid+Math.imul(ah1,bl5)|0;hi=hi+Math.imul(ah1,bh5)|0;lo=lo+Math.imul(al0,bl6)|0;mid=mid+Math.imul(al0,bh6)|0;mid=mid+Math.imul(ah0,bl6)|0;hi=hi+Math.imul(ah0,bh6)|0;var w6=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w6>>>26)|0;w6&=67108863;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid=mid+Math.imul(ah7,bl0)|0;hi=Math.imul(ah7,bh0);lo=lo+Math.imul(al6,bl1)|0;mid=mid+Math.imul(al6,bh1)|0;mid=mid+Math.imul(ah6,bl1)|0;hi=hi+Math.imul(ah6,bh1)|0;lo=lo+Math.imul(al5,bl2)|0;mid=mid+Math.imul(al5,bh2)|0;mid=mid+Math.imul(ah5,bl2)|0;hi=hi+Math.imul(ah5,bh2)|0;lo=lo+Math.imul(al4,bl3)|0;mid=mid+Math.imul(al4,bh3)|0;mid=mid+Math.imul(ah4,bl3)|0;hi=hi+Math.imul(ah4,bh3)|0;lo=lo+Math.imul(al3,bl4)|0;mid=mid+Math.imul(al3,bh4)|0;mid=mid+Math.imul(ah3,bl4)|0;hi=hi+Math.imul(ah3,bh4)|0;lo=lo+Math.imul(al2,bl5)|0;mid=mid+Math.imul(al2,bh5)|0;mid=mid+Math.imul(ah2,bl5)|0;hi=hi+Math.imul(ah2,bh5)|0;lo=lo+Math.imul(al1,bl6)|0;mid=mid+Math.imul(al1,bh6)|0;mid=mid+Math.imul(ah1,bl6)|0;hi=hi+Math.imul(ah1,bh6)|0;lo=lo+Math.imul(al0,bl7)|0;mid=mid+Math.imul(al0,bh7)|0;mid=mid+Math.imul(ah0,bl7)|0;hi=hi+Math.imul(ah0,bh7)|0;var w7=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w7>>>26)|0;w7&=67108863;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid=mid+Math.imul(ah8,bl0)|0;hi=Math.imul(ah8,bh0);lo=lo+Math.imul(al7,bl1)|0;mid=mid+Math.imul(al7,bh1)|0;mid=mid+Math.imul(ah7,bl1)|0;hi=hi+Math.imul(ah7,bh1)|0;lo=lo+Math.imul(al6,bl2)|0;mid=mid+Math.imul(al6,bh2)|0;mid=mid+Math.imul(ah6,bl2)|0;hi=hi+Math.imul(ah6,bh2)|0;lo=lo+Math.imul(al5,bl3)|0;mid=mid+Math.imul(al5,bh3)|0;mid=mid+Math.imul(ah5,bl3)|0;hi=hi+Math.imul(ah5,bh3)|0;lo=lo+Math.imul(al4,bl4)|0;mid=mid+Math.imul(al4,bh4)|0;mid=mid+Math.imul(ah4,bl4)|0;hi=hi+Math.imul(ah4,bh4)|0;lo=lo+Math.imul(al3,bl5)|0;mid=mid+Math.imul(al3,bh5)|0;mid=mid+Math.imul(ah3,bl5)|0;hi=hi+Math.imul(ah3,bh5)|0;lo=lo+Math.imul(al2,bl6)|0;mid=mid+Math.imul(al2,bh6)|0;mid=mid+Math.imul(ah2,bl6)|0;hi=hi+Math.imul(ah2,bh6)|0;lo=lo+Math.imul(al1,bl7)|0;mid=mid+Math.imul(al1,bh7)|0;mid=mid+Math.imul(ah1,bl7)|0;hi=hi+Math.imul(ah1,bh7)|0;lo=lo+Math.imul(al0,bl8)|0;mid=mid+Math.imul(al0,bh8)|0;mid=mid+Math.imul(ah0,bl8)|0;hi=hi+Math.imul(ah0,bh8)|0;var w8=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w8>>>26)|0;w8&=67108863;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid=mid+Math.imul(ah9,bl0)|0;hi=Math.imul(ah9,bh0);lo=lo+Math.imul(al8,bl1)|0;mid=mid+Math.imul(al8,bh1)|0;mid=mid+Math.imul(ah8,bl1)|0;hi=hi+Math.imul(ah8,bh1)|0;lo=lo+Math.imul(al7,bl2)|0;mid=mid+Math.imul(al7,bh2)|0;mid=mid+Math.imul(ah7,bl2)|0;hi=hi+Math.imul(ah7,bh2)|0;lo=lo+Math.imul(al6,bl3)|0;mid=mid+Math.imul(al6,bh3)|0;mid=mid+Math.imul(ah6,bl3)|0;hi=hi+Math.imul(ah6,bh3)|0;lo=lo+Math.imul(al5,bl4)|0;mid=mid+Math.imul(al5,bh4)|0;mid=mid+Math.imul(ah5,bl4)|0;hi=hi+Math.imul(ah5,bh4)|0;lo=lo+Math.imul(al4,bl5)|0;mid=mid+Math.imul(al4,bh5)|0;mid=mid+Math.imul(ah4,bl5)|0;hi=hi+Math.imul(ah4,bh5)|0;lo=lo+Math.imul(al3,bl6)|0;mid=mid+Math.imul(al3,bh6)|0;mid=mid+Math.imul(ah3,bl6)|0;hi=hi+Math.imul(ah3,bh6)|0;lo=lo+Math.imul(al2,bl7)|0;mid=mid+Math.imul(al2,bh7)|0;mid=mid+Math.imul(ah2,bl7)|0;hi=hi+Math.imul(ah2,bh7)|0;lo=lo+Math.imul(al1,bl8)|0;mid=mid+Math.imul(al1,bh8)|0;mid=mid+Math.imul(ah1,bl8)|0;hi=hi+Math.imul(ah1,bh8)|0;lo=lo+Math.imul(al0,bl9)|0;mid=mid+Math.imul(al0,bh9)|0;mid=mid+Math.imul(ah0,bl9)|0;hi=hi+Math.imul(ah0,bh9)|0;var w9=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w9>>>26)|0;w9&=67108863;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid=mid+Math.imul(ah9,bl1)|0;hi=Math.imul(ah9,bh1);lo=lo+Math.imul(al8,bl2)|0;mid=mid+Math.imul(al8,bh2)|0;mid=mid+Math.imul(ah8,bl2)|0;hi=hi+Math.imul(ah8,bh2)|0;lo=lo+Math.imul(al7,bl3)|0;mid=mid+Math.imul(al7,bh3)|0;mid=mid+Math.imul(ah7,bl3)|0;hi=hi+Math.imul(ah7,bh3)|0;lo=lo+Math.imul(al6,bl4)|0;mid=mid+Math.imul(al6,bh4)|0;mid=mid+Math.imul(ah6,bl4)|0;hi=hi+Math.imul(ah6,bh4)|0;lo=lo+Math.imul(al5,bl5)|0;mid=mid+Math.imul(al5,bh5)|0;mid=mid+Math.imul(ah5,bl5)|0;hi=hi+Math.imul(ah5,bh5)|0;lo=lo+Math.imul(al4,bl6)|0;mid=mid+Math.imul(al4,bh6)|0;mid=mid+Math.imul(ah4,bl6)|0;hi=hi+Math.imul(ah4,bh6)|0;lo=lo+Math.imul(al3,bl7)|0;mid=mid+Math.imul(al3,bh7)|0;mid=mid+Math.imul(ah3,bl7)|0;hi=hi+Math.imul(ah3,bh7)|0;lo=lo+Math.imul(al2,bl8)|0;mid=mid+Math.imul(al2,bh8)|0;mid=mid+Math.imul(ah2,bl8)|0;hi=hi+Math.imul(ah2,bh8)|0;lo=lo+Math.imul(al1,bl9)|0;mid=mid+Math.imul(al1,bh9)|0;
mid=mid+Math.imul(ah1,bl9)|0;hi=hi+Math.imul(ah1,bh9)|0;var w10=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w10>>>26)|0;w10&=67108863;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid=mid+Math.imul(ah9,bl2)|0;hi=Math.imul(ah9,bh2);lo=lo+Math.imul(al8,bl3)|0;mid=mid+Math.imul(al8,bh3)|0;mid=mid+Math.imul(ah8,bl3)|0;hi=hi+Math.imul(ah8,bh3)|0;lo=lo+Math.imul(al7,bl4)|0;mid=mid+Math.imul(al7,bh4)|0;mid=mid+Math.imul(ah7,bl4)|0;hi=hi+Math.imul(ah7,bh4)|0;lo=lo+Math.imul(al6,bl5)|0;mid=mid+Math.imul(al6,bh5)|0;mid=mid+Math.imul(ah6,bl5)|0;hi=hi+Math.imul(ah6,bh5)|0;lo=lo+Math.imul(al5,bl6)|0;mid=mid+Math.imul(al5,bh6)|0;mid=mid+Math.imul(ah5,bl6)|0;hi=hi+Math.imul(ah5,bh6)|0;lo=lo+Math.imul(al4,bl7)|0;mid=mid+Math.imul(al4,bh7)|0;mid=mid+Math.imul(ah4,bl7)|0;hi=hi+Math.imul(ah4,bh7)|0;lo=lo+Math.imul(al3,bl8)|0;mid=mid+Math.imul(al3,bh8)|0;mid=mid+Math.imul(ah3,bl8)|0;hi=hi+Math.imul(ah3,bh8)|0;lo=lo+Math.imul(al2,bl9)|0;mid=mid+Math.imul(al2,bh9)|0;mid=mid+Math.imul(ah2,bl9)|0;hi=hi+Math.imul(ah2,bh9)|0;var w11=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w11>>>26)|0;w11&=67108863;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid=mid+Math.imul(ah9,bl3)|0;hi=Math.imul(ah9,bh3);lo=lo+Math.imul(al8,bl4)|0;mid=mid+Math.imul(al8,bh4)|0;mid=mid+Math.imul(ah8,bl4)|0;hi=hi+Math.imul(ah8,bh4)|0;lo=lo+Math.imul(al7,bl5)|0;mid=mid+Math.imul(al7,bh5)|0;mid=mid+Math.imul(ah7,bl5)|0;hi=hi+Math.imul(ah7,bh5)|0;lo=lo+Math.imul(al6,bl6)|0;mid=mid+Math.imul(al6,bh6)|0;mid=mid+Math.imul(ah6,bl6)|0;hi=hi+Math.imul(ah6,bh6)|0;lo=lo+Math.imul(al5,bl7)|0;mid=mid+Math.imul(al5,bh7)|0;mid=mid+Math.imul(ah5,bl7)|0;hi=hi+Math.imul(ah5,bh7)|0;lo=lo+Math.imul(al4,bl8)|0;mid=mid+Math.imul(al4,bh8)|0;mid=mid+Math.imul(ah4,bl8)|0;hi=hi+Math.imul(ah4,bh8)|0;lo=lo+Math.imul(al3,bl9)|0;mid=mid+Math.imul(al3,bh9)|0;mid=mid+Math.imul(ah3,bl9)|0;hi=hi+Math.imul(ah3,bh9)|0;var w12=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w12>>>26)|0;w12&=67108863;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid=mid+Math.imul(ah9,bl4)|0;hi=Math.imul(ah9,bh4);lo=lo+Math.imul(al8,bl5)|0;mid=mid+Math.imul(al8,bh5)|0;mid=mid+Math.imul(ah8,bl5)|0;hi=hi+Math.imul(ah8,bh5)|0;lo=lo+Math.imul(al7,bl6)|0;mid=mid+Math.imul(al7,bh6)|0;mid=mid+Math.imul(ah7,bl6)|0;hi=hi+Math.imul(ah7,bh6)|0;lo=lo+Math.imul(al6,bl7)|0;mid=mid+Math.imul(al6,bh7)|0;mid=mid+Math.imul(ah6,bl7)|0;hi=hi+Math.imul(ah6,bh7)|0;lo=lo+Math.imul(al5,bl8)|0;mid=mid+Math.imul(al5,bh8)|0;mid=mid+Math.imul(ah5,bl8)|0;hi=hi+Math.imul(ah5,bh8)|0;lo=lo+Math.imul(al4,bl9)|0;mid=mid+Math.imul(al4,bh9)|0;mid=mid+Math.imul(ah4,bl9)|0;hi=hi+Math.imul(ah4,bh9)|0;var w13=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w13>>>26)|0;w13&=67108863;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid=mid+Math.imul(ah9,bl5)|0;hi=Math.imul(ah9,bh5);lo=lo+Math.imul(al8,bl6)|0;mid=mid+Math.imul(al8,bh6)|0;mid=mid+Math.imul(ah8,bl6)|0;hi=hi+Math.imul(ah8,bh6)|0;lo=lo+Math.imul(al7,bl7)|0;mid=mid+Math.imul(al7,bh7)|0;mid=mid+Math.imul(ah7,bl7)|0;hi=hi+Math.imul(ah7,bh7)|0;lo=lo+Math.imul(al6,bl8)|0;mid=mid+Math.imul(al6,bh8)|0;mid=mid+Math.imul(ah6,bl8)|0;hi=hi+Math.imul(ah6,bh8)|0;lo=lo+Math.imul(al5,bl9)|0;mid=mid+Math.imul(al5,bh9)|0;mid=mid+Math.imul(ah5,bl9)|0;hi=hi+Math.imul(ah5,bh9)|0;var w14=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w14>>>26)|0;w14&=67108863;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid=mid+Math.imul(ah9,bl6)|0;hi=Math.imul(ah9,bh6);lo=lo+Math.imul(al8,bl7)|0;mid=mid+Math.imul(al8,bh7)|0;mid=mid+Math.imul(ah8,bl7)|0;hi=hi+Math.imul(ah8,bh7)|0;lo=lo+Math.imul(al7,bl8)|0;mid=mid+Math.imul(al7,bh8)|0;mid=mid+Math.imul(ah7,bl8)|0;hi=hi+Math.imul(ah7,bh8)|0;lo=lo+Math.imul(al6,bl9)|0;mid=mid+Math.imul(al6,bh9)|0;mid=mid+Math.imul(ah6,bl9)|0;hi=hi+Math.imul(ah6,bh9)|0;var w15=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w15>>>26)|0;w15&=67108863;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid=mid+Math.imul(ah9,bl7)|0;hi=Math.imul(ah9,bh7);lo=lo+Math.imul(al8,bl8)|0;mid=mid+Math.imul(al8,bh8)|0;mid=mid+Math.imul(ah8,bl8)|0;hi=hi+Math.imul(ah8,bh8)|0;lo=lo+Math.imul(al7,bl9)|0;mid=mid+Math.imul(al7,bh9)|0;mid=mid+Math.imul(ah7,bl9)|0;hi=hi+Math.imul(ah7,bh9)|0;var w16=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w16>>>26)|0;w16&=67108863;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid=mid+Math.imul(ah9,bl8)|0;hi=Math.imul(ah9,bh8);lo=lo+Math.imul(al8,bl9)|0;mid=mid+Math.imul(al8,bh9)|0;mid=mid+Math.imul(ah8,bl9)|0;hi=hi+Math.imul(ah8,bh9)|0;var w17=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w17>>>26)|0;w17&=67108863;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid=mid+Math.imul(ah9,bl9)|0;hi=Math.imul(ah9,bh9);var w18=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w18>>>26)|0;w18&=67108863;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++}return out};if(!Math.imul){comb10MulTo=smallMulTo}function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&67108863;ncarry=ncarry+(r/67108864|0)|0;lo=lo+rword|0;rword=lo&67108863;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=67108863}out.words[k]=rword;carry=ncarry;ncarry=hncarry}if(carry!==0){out.words[k]=carry}else{out.length--}return out.strip()}function jumboMulTo(self,num,out){var fftm=new FFTM;return fftm.mulp(self,num,out)}BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out)}else if(len<63){res=smallMulTo(this,num,out)}else if(len<1024){res=bigMulTo(this,num,out)}else{res=jumboMulTo(this,num,out)}return res};function FFTM(x,y){this.x=x;this.y=y}FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N)}return t};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<l-i-1;x>>=1}return rb};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]]}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++}return 1<<i+1+odd};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*8192+Math.round(ws[2*i]/N)+carry;ws[i]=w&67108863;if(w<67108864){carry=0}else{carry=w/67108864|0}}return ws};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&8191;carry=carry>>>13;rws[2*i+1]=carry&8191;carry=carry>>>13}for(i=2*len;i<N;++i){rws[i]=0}assert(carry===0);assert((carry&~8191)===0)};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0}return ph};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx}this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out.strip()};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out)};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out)};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this)};BN.prototype.imuln=function imuln(num){assert(typeof num==="number");assert(num<67108864);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&67108863)+(carry&67108863);carry>>=26;carry+=w/67108864|0;carry+=lo>>>26;this.words[i]=lo&67108863}if(carry!==0){this.words[i]=carry;this.length++}return this};BN.prototype.muln=function muln(num){return this.clone().imuln(num)};BN.prototype.sqr=function sqr(){return this.mul(this)};BN.prototype.isqr=function isqr(){return this.imul(this.clone())};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break}if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q)}}return res};BN.prototype.iushln=function iushln(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=67108863>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r}if(carry){this.words[i]=carry;this.length++}}if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i]}for(i=0;i<s;i++){this.words[i]=0}this.length+=s}return this.strip()};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits)};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==="number"&&bits>=0);var h;if(hint){h=(hint-hint%26)/26}else{h=0}var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=67108863^67108863>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i]}maskedWords.length=s}if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s]}}else{this.words[0]=0;this.length=1}var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r;carry=word&mask}if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended)};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits)};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits)};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits)};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits)};BN.prototype.testn=function testn(bit){assert(typeof bit==="number"&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q)};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,"imaskn works only with positive numbers");if(this.length<=s){return this}if(r!==0){s++}this.length=Math.min(s,this.length);if(r!==0){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits)};BN.prototype.iaddn=function iaddn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(num);this.negative=1;return this}return this._iaddn(num)};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++){this.words[i]-=67108864;if(i===this.length-1){this.words[i+1]=1}else{this.words[i+1]++}}this.length=Math.max(this.length,i+1);return this};BN.prototype.isubn=function isubn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this}this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=67108864;this.words[i+1]-=1}}return this.strip()};BN.prototype.addn=function addn(num){return this.clone().iaddn(num)};BN.prototype.subn=function subn(num){return this.clone().isubn(num)};BN.prototype.iabs=function iabs(){this.negative=0;return this};BN.prototype.abs=function abs(){return this.clone().iabs()};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&67108863;carry=(w>>26)-(right/67108864|0);this.words[i+shift]=w&67108863}for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&67108863}if(carry===0)return this.strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&67108863}this.negative=1;return this.strip()};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0}var m=a.length-b.length;var q;if(mode!=="mod"){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0}}var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1}}for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*67108864+(a.words[b.length+j-1]|0);qj=Math.min(qj/bhi|0,67108863);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1}}if(q){q.words[j]=qj}}if(q){q.strip()}a.strip();if(mode!=="div"&&shift!==0){a.iushrn(shift)}return{div:q||null,mod:a}};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)}}var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=="mod"){div=res.div.neg()}if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num)}}return{div:div,mod:mod}}if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=="mod"){div=res.div.neg()}return{div:div,mod:res.mod}}if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num)}}return{div:res.div,mod:mod}}if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this}}if(num.length===1){if(mode==="div"){return{div:this.divn(num.words[0]),mod:null}}if(mode==="mod"){return{div:null,mod:new BN(this.modn(num.words[0]))}}return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}}return this._wordDiv(num,mode)};BN.prototype.div=function div(num){return this.divmod(num,"div",false).div};BN.prototype.mod=function mod(num){return this.divmod(num,"mod",false).mod};BN.prototype.umod=function umod(num){return this.divmod(num,"mod",true).mod};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1)};BN.prototype.modn=function modn(num){assert(num<=67108863);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num}return acc};BN.prototype.idivn=function idivn(num){assert(num<=67108863);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*67108864;this.words[i]=w/num|0;carry=w%num}return this.strip()};BN.prototype.divn=function divn(num){return this.clone().idivn(num)};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p)}else{x=x.clone()}var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g}var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){x.iushrn(i);while(i-- >0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp)}A.iushrn(1);B.iushrn(1)}}for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){y.iushrn(j);while(j-- >0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp)}C.iushrn(1);D.iushrn(1)}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D)}else{y.isub(x);C.isub(A);D.isub(B)}}return{a:C,b:D,gcd:y.iushln(g)}};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p)}else{a=a.clone()}var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){a.iushrn(i);while(i-- >0){if(x1.isOdd()){x1.iadd(delta)}x1.iushrn(1)}}for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){b.iushrn(j);while(j-- >0){if(x2.isOdd()){x2.iadd(delta)}x2.iushrn(1)}}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2)}else{b.isub(a);x2.isub(x1)}}var res;if(a.cmpn(1)===0){res=x1}else{res=x2}if(res.cmpn(0)<0){res.iadd(p)}return res};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1)}do{while(a.isEven()){a.iushrn(1)}while(b.isEven()){b.iushrn(1)}var r=a.cmp(b);if(r<0){var t=a;a=b;b=t}else if(r===0||b.cmpn(1)===0){break}a.isub(b)}while(true);return b.iushln(shift)};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num)};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1};BN.prototype.andln=function andln(num){return this.words[0]&num};BN.prototype.bincn=function bincn(bit){assert(typeof bit==="number");var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=67108863;this.words[i]=w}if(carry!==0){this.words[i]=carry;this.length++}return this};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1){res=1}else{if(negative){num=-num}assert(num<=67108863,"Number is too big");var w=this.words[0]|0;res=w===num?0:w<num?-1:1}if(this.negative!==0)return-res|0;return res};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1}else if(a>b){res=1}break}return res};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1};BN.prototype.gt=function gt(num){return this.cmp(num)===1};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0};BN.prototype.gte=function gte(num){return this.cmp(num)>=0};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1};BN.prototype.lt=function lt(num){return this.cmp(num)===-1};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0};BN.prototype.lte=function lte(num){return this.cmp(num)<=0};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0};BN.prototype.eq=function eq(num){return this.cmp(num)===0};BN.red=function red(num){return new Red(num)};BN.prototype.toRed=function toRed(ctx){assert(!this.red,"Already a number in reduction context");assert(this.negative===0,"red works only with positives");return ctx.convertTo(this)._forceRed(ctx)};BN.prototype.fromRed=function fromRed(){assert(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,"Already a number in reduction context");return this._forceRed(ctx)};BN.prototype.redAdd=function redAdd(num){assert(this.red,"redAdd works only with red numbers");return this.red.add(this,num)};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,num)};BN.prototype.redSub=function redSub(num){assert(this.red,"redSub works only with red numbers");return this.red.sub(this,num)};BN.prototype.redISub=function redISub(num){assert(this.red,"redISub works only with red numbers");return this.red.isub(this,num)};BN.prototype.redShl=function redShl(num){assert(this.red,"redShl works only with red numbers");return this.red.shl(this,num)};BN.prototype.redMul=function redMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.mul(this,num)};BN.prototype.redIMul=function redIMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.imul(this,num)};BN.prototype.redSqr=function redSqr(){assert(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};BN.prototype.redISqr=function redISqr(){assert(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};BN.prototype.redSqrt=function redSqrt(){assert(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};BN.prototype.redInvm=function redInvm(){assert(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};BN.prototype.redNeg=function redNeg(){assert(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength()}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1}else if(cmp>0){r.isub(this.p)}else{r.strip()}return r};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out)};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k)};function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=4194303;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i]}output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return}var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next}prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10}else{input.length-=9}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*977;num.words[i]=lo&67108863;lo=w*64+(lo/67108864|0)}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--}}return num};function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}inherits(P224,MPrime);function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}inherits(P192,MPrime);function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*19+carry;var lo=hi&67108863;hi>>>=26;num.words[i]=lo;carry=hi}if(carry!==0){num.words[num.length++]=carry}return num};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==="k256"){prime=new K256}else if(name==="p224"){prime=new P224}else if(name==="p192"){prime=new P192}else if(name==="p25519"){prime=new P25519}else{throw new Error("Unknown prime "+name)}primes[name]=prime;return prime};function Red(m){if(typeof m==="string"){var prime=BN._prime(m);this.m=prime.p;this.prime=prime}else{assert(m.gtn(1),"modulus must be greater than 1");this.m=m;this.prime=null}}Red.prototype._verify1=function _verify1(a){assert(a.negative===0,"red works only with positives");assert(a.red,"red works only with red numbers")};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,"red works only with positives");assert(a.red&&a.red===b.red,"red works only with red numbers")};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.umod(this.m)._forceRed(this)};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone()}return this.m.sub(a)._forceRed(this)};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res._forceRed(this)};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res._forceRed(this)};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num))};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b))};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b))};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone())};Red.prototype.sqr=function sqr(a){return this.mul(a,a)};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1)}assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne)}var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr()}assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i}return r};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg()}else{return this.imod(inv)}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1).toRed(this);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a)}var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26}for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]){res=this.sqr(res)}if(bit===0&&current===0){currentLen=0;continue}current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0}start=26}return res};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res};BN.mont=function mont(num){return new Mont(num)};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift))};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this)}})(typeof module==="undefined"||module,this)},{buffer:11}],10:[function(require,module,exports){(function(global){module.exports=function(length){var result=new Uint8Array(length);(global.crypto||global.msCrypto).getRandomValues(result);return result}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],11:[function(require,module,exports){},{}],12:[function(require,module,exports){"use strict";var elliptic=exports;elliptic.version=require("../package.json").version;elliptic.utils=require("./elliptic/utils");elliptic.rand=require("brorand");elliptic.hmacDRBG=require("./elliptic/hmac-drbg");elliptic.curve=require("./elliptic/curve");elliptic.curves=require("./elliptic/curves");elliptic.ec=require("./elliptic/ec");elliptic.eddsa=require("./elliptic/eddsa")},{"../package.json":26,"./elliptic/curve":15,"./elliptic/curves":18,"./elliptic/ec":19,"./elliptic/eddsa":22,"./elliptic/hmac-drbg":23,"./elliptic/utils":25,brorand:10}],13:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var getNAF=utils.getNAF;
var getJSF=utils.getJSF;var assert=utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new BN(conf.p,16);this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p);this.zero=new BN(0).toRed(this.red);this.one=new BN(1).toRed(this.red);this.two=new BN(2).toRed(this.red);this.n=conf.n&&new BN(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var adjustCount=this.n&&this.p.div(this.n);if(!adjustCount||adjustCount.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function validate(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW)}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];if(nafW===i)b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)b=b.mixedAdd(doubles.points[j].neg())}a=a.add(b)}return a.toP()};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--)k++;if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;var z=naf[i];assert(z!==0);if(p.type==="affine"){if(z>0)acc=acc.mixedAdd(wnd[z-1>>1]);else acc=acc.mixedAdd(wnd[-z-1>>1].neg())}else{if(z>0)acc=acc.add(wnd[z-1>>1]);else acc=acc.add(wnd[-z-1>>1].neg())}}return p.type==="affine"?acc.toP():acc};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points}for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a]);naf[b]=getNAF(coeffs[b],wndWidth[b]);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue}var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg())}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg())}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg())}var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(var j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)zero=false}if(!zero)break;k++;i--}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)continue;else if(z>0)p=wnd[j][z-1>>1];else if(z<0)p=wnd[j][-z-1>>1].neg();if(p.type==="affine")acc=acc.mixedAdd(p);else acc=acc.add(p)}}for(var i=0;i<len;i++)wnd[i]=null;if(jacobianResult)return acc;else return acc.toP()};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function eq(){throw new Error("Not implemented")};BasePoint.prototype.validate=function validate(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((bytes[0]===4||bytes[0]===6||bytes[0]===7)&&bytes.length-1===2*len){if(bytes[0]===6)assert(bytes[bytes.length-1]%2===0);else if(bytes[0]===7)assert(bytes[bytes.length-1]%2===1);var res=this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));return res}else if((bytes[0]===2||bytes[0]===3)&&bytes.length-1===len){return this.pointFromX(bytes.slice(1,1+len),bytes[0]===3)}throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,true)};BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray("be",len);if(compact)return[this.getY().isEven()?2:3].concat(x);return[4].concat(x,this.getY().toArray("be",len))};BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc)};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this};BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return false;var doubles=this.precomputed.doubles;if(!doubles)return false;return doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step)};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc)}return{step:step,points:doubles}};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res}};BasePoint.prototype._getBeta=function _getBeta(){return null};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++)r=r.dbl();return r}},{"../../elliptic":12,"bn.js":9}],14:[function(require,module,exports){module.exports={}},{}],15:[function(require,module,exports){"use strict";var curve=exports;curve.base=require("./base");curve.short=require("./short");curve.mont=require("./mont");curve.edwards=require("./edwards")},{"./base":13,"./edwards":14,"./mont":16,"./short":17}],16:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],17:[function(require,module,exports){"use strict";var curve=require("../curve");var elliptic=require("../../elliptic");var BN=require("bn.js");var inherits=require("inherits");var Base=curve.base;var assert=elliptic.utils.assert;function ShortCurve(conf){Base.call(this,"short",conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var beta;var lambda;if(conf.beta){beta=new BN(conf.beta,16).toRed(this.red)}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red)}if(conf.lambda){lambda=new BN(conf.lambda,16)}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0]}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0)}}var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)}})}else{basis=this._getEndoBasis(lambda)}return{beta:beta,lambda:lambda,basis:basis}};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2]};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x}else if(a1&&++i===2){break}prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y}a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0}if(a1.negative){a1=a1.neg();b1=b1.neg()}if(a2.negative){a2=a2.neg();b2=b2.neg()}return[{a:a1,b:b1},{a:a2,b:b2}]};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2}};ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error("invalid point");var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y)};ShortCurve.prototype.validate=function validate(point){if(point.inf)return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.negative){split.k1.ineg();p=p.neg(true)}if(split.k2.negative){split.k2.ineg();beta=beta.neg(true)}npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2,jacobianResult);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null}return res};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,"affine");if(x===null&&y===null){this.x=null;this.y=null;this.inf=true}else{this.x=new BN(x,16);this.y=new BN(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed)};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red)};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)return;var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==="string")obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red)}var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res};Point.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function isInfinity(){return this.inf};Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)};Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)};Point.prototype.getX=function getX(){return this.x.fromRed()};Point.prototype.getY=function getY(){return this.y.fromRed()};Point.prototype.mul=function mul(k){k=new BN(k,16);if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k)};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs);else return this.curve._wnafMulAdd(1,points,coeffs,2)};Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs,true);else return this.curve._wnafMulAdd(1,points,coeffs,2,true)};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)};Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res};Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,"jacobian");if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN(0)}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=new BN(z,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z)};JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++)r=r.dbl();return r}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.mul=function mul(k,kbase){k=new BN(k,kbase);return this.curve._wnafMul(this,k)};JPoint.prototype.eq=function eq(p){if(p.type==="affine")return this.eq(p.toJ());if(this===p)return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0};JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr();var rx=x.toRed(this.curve.red).redMul(zs);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(zs);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true}return false};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0}},{"../../elliptic":12,"../curve":15,"bn.js":9,inherits:39}],18:[function(require,module,exports){"use strict";var curves=exports;var hash=require("hash.js");var elliptic=require("../elliptic");var assert=elliptic.utils.assert;function PresetCurve(options){if(options.type==="short")this.curve=new elliptic.curve.short(options);else if(options.type==="edwards")this.curve=new elliptic.curve.edwards(options);else this.curve=new elliptic.curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),"Invalid curve");assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve}})}defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:false,g:["9"]});defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var pre;try{pre=require("./precomputed/secp256k1")}catch(e){pre=undefined}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]})},{"../elliptic":12,"./precomputed/secp256k1":24,"hash.js":27}],19:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;var KeyPair=require("./key");var Signature=require("./signature");function EC(options){if(!(this instanceof EC))return new EC(options);if(typeof options==="string"){assert(elliptic.curves.hasOwnProperty(options),"Unknown curve "+options);options=elliptic.curves[options]}if(options instanceof elliptic.curves.PresetCurve)options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash}module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options)};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc)};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc)};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)options={};var drbg=new elliptic.hmacDRBG({hash:this.hash,pers:options.pers,entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));do{var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;priv.iaddn(1);return this.keyFromPrivate(priv)}while(true)};EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)msg=msg.ushrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)return msg.sub(this.n);else return msg};EC.prototype.sign=function sign(msg,key,enc,options){if(typeof enc==="object"){options=enc;enc=null}if(!options)options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray("be",bytes);var nonce=msg.toArray("be",bytes);var drbg=new elliptic.hmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc});var ns1=this.n.sub(new BN(1));for(var iter=0;true;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)continue;var kp=this.g.mul(k);if(kp.isInfinity())continue;var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)===0)continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));s=s.umod(this.n);if(s.cmpn(0)===0)continue;var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)!==0?2:0);if(options.canonical&&s.cmp(this.nh)>0){s=this.n.sub(s);recoveryParam^=1}return new Signature({r:r,s:s,recoveryParam:recoveryParam})}};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,"hex");var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);if(!this.curve._maxwellTrick){var p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.getX().umod(this.n).cmp(r)===0}var p=this.g.jmulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.eqXToP(r)};EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,"The recovery param is more than two bits");signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error("Unable to find sencond key candinate");if(isSecondKey)r=this.curve.pointFromX(r.add(this.curve.n),isYOdd);else r=this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n);var s1=n.sub(e).mul(rInv).umod(n);var s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2);
};EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){signature=new Signature(signature,enc);if(signature.recoveryParam!==null)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error("Unable to find valid recovery factor")}},{"../../elliptic":12,"./key":20,"./signature":21,"bn.js":9}],20:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)this._importPrivate(options.priv,options.privEnc);if(options.pub)this._importPublic(options.pub,options.pubEnc)}module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc})};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)return priv;return new KeyPair(ec,{priv:priv,privEnc:enc})};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())return{result:false,reason:"Invalid public key"};if(!pub.validate())return{result:false,reason:"Public key is not a point"};if(!pub.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(typeof compact==="string"){enc=compact;compact=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!enc)return this.pub;return this.pub.encode(enc,compact)};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16);this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){if(this.ec.curve.type==="mont"){assert(key.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert(key.x&&key.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(key.x,key.y);return}this.pub=this.ec.curve.decodePoint(key,enc)};KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX()};KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options)};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this)};KeyPair.prototype.inspect=function inspect(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":12,"bn.js":9}],21:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;if(this._importDER(options,enc))return;assert(options.r&&options.s,"Signature without r or s");this.r=new BN(options.r,16);this.s=new BN(options.s,16);if(options.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=options.recoveryParam}module.exports=Signature;function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(initial&128)){return initial}var octetLen=initial&15;var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++){val<<=8;val|=buf[off]}p.place=off;return val}function rmPadding(buf){var i=0;var len=buf.length-1;while(!buf[i]&&!(buf[i+1]&128)&&i<len){i++}if(i===0){return buf}return buf.slice(i)}Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position;if(data[p.place++]!==48){return false}var len=getLength(data,p);if(len+p.place!==data.length){return false}if(data[p.place++]!==2){return false}var rlen=getLength(data,p);var r=data.slice(p.place,rlen+p.place);p.place+=rlen;if(data[p.place++]!==2){return false}var slen=getLength(data,p);if(data.length!==slen+p.place){return false}var s=data.slice(p.place,slen+p.place);if(r[0]===0&&r[1]&128){r=r.slice(1)}if(s[0]===0&&s[1]&128){s=s.slice(1)}this.r=new BN(r);this.s=new BN(s);this.recoveryParam=null;return true};function constructLength(arr,len){if(len<128){arr.push(len);return}var octets=1+(Math.log(len)/Math.LN2>>>3);arr.push(octets|128);while(--octets){arr.push(len>>>(octets<<3)&255)}arr.push(len)}Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(s[0]&128)s=[0].concat(s);r=rmPadding(r);s=rmPadding(s);while(!s[0]&&!(s[1]&128)){s=s.slice(1)}var arr=[2];constructLength(arr,r.length);arr=arr.concat(r);arr.push(2);constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[48];constructLength(res,backHalf.length);res=res.concat(backHalf);return utils.encode(res,enc)}},{"../../elliptic":12,"bn.js":9}],22:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],23:[function(require,module,exports){"use strict";var hash=require("hash.js");var elliptic=require("../elliptic");var utils=elliptic.utils;var assert=utils.assert;function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash;this.predResist=!!options.predResist;this.outLen=this.hash.outSize;this.minEntropy=options.minEntropy||this.hash.hmacStrength;this.reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc);var nonce=utils.toArray(options.nonce,options.nonceEnc);var pers=utils.toArray(options.pers,options.persEnc);assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(entropy,nonce,pers)}module.exports=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++){this.K[i]=0;this.V[i]=1}this._update(seed);this.reseed=1;this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0]);if(seed)kmac=kmac.update(seed);this.K=kmac.digest();this.V=this._hmac().update(this.V).digest();if(!seed)return;this.K=this._hmac().update(this.V).update([1]).update(seed).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){if(typeof entropyEnc!=="string"){addEnc=add;add=entropyEnc;entropyEnc=null}entropy=utils.toBuffer(entropy,entropyEnc);add=utils.toBuffer(add,addEnc);assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(entropy.concat(add||[]));this.reseed=1};HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof enc!=="string"){addEnc=add;add=enc;enc=null}if(add){add=utils.toArray(add,addEnc);this._update(add)}var temp=[];while(temp.length<len){this.V=this._hmac().update(this.V).digest();temp=temp.concat(this.V)}var res=temp.slice(0,len);this._update(add);this.reseed++;return utils.encode(res,enc)}},{"../elliptic":12,"hash.js":27}],24:[function(require,module,exports){module.exports=undefined},{}],25:[function(require,module,exports){"use strict";var utils=exports;var BN=require("bn.js");utils.assert=function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")};function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg!=="string"){for(var i=0;i<msg.length;i++)res[i]=msg[i]|0;return res}if(!enc){for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&255;if(hi)res.push(hi,lo);else res.push(lo)}}else if(enc==="hex"){msg=msg.replace(/[^a-z0-9]+/gi,"");if(msg.length%2!==0)msg="0"+msg;for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}return res}utils.toArray=toArray;function zero2(word){if(word.length===1)return"0"+word;else return word}utils.zero2=zero2;function toHex(msg){var res="";for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}utils.toHex=toHex;utils.encode=function encode(arr,enc){if(enc==="hex")return toHex(arr);else return arr};function getNAF(num,w){var naf=[];var ws=1<<w+1;var k=num.clone();while(k.cmpn(1)>=0){var z;if(k.isOdd()){var mod=k.andln(ws-1);if(mod>(ws>>1)-1)z=(ws>>1)-mod;else z=mod;k.isubn(z)}else{z=0}naf.push(z);var shift=k.cmpn(0)!==0&&k.andln(ws-1)===0?w+1:1;for(var i=1;i<shift;i++)naf.push(0);k.iushrn(shift)}return naf}utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;if(m14===3)m14=-1;if(m24===3)m24=-1;var u1;if((m14&1)===0){u1=0}else{var m8=k1.andln(7)+d1&7;if((m8===3||m8===5)&&m24===2)u1=-m14;else u1=m14}jsf[0].push(u1);var u2;if((m24&1)===0){u2=0}else{var m8=k2.andln(7)+d2&7;if((m8===3||m8===5)&&m14===2)u2=-m24;else u2=m24}jsf[1].push(u2);if(2*d1===u1+1)d1=1-d1;if(2*d2===u2+1)d2=1-d2;k1.iushrn(1);k2.iushrn(1)}return jsf}utils.getJSF=getJSF;function cachedProperty(obj,name,computer){var key="_"+name;obj.prototype[name]=function cachedProperty(){return this[key]!==undefined?this[key]:this[key]=computer.call(this)}}utils.cachedProperty=cachedProperty;function parseBytes(bytes){return typeof bytes==="string"?utils.toArray(bytes,"hex"):bytes}utils.parseBytes=parseBytes;function intFromLE(bytes){return new BN(bytes,"hex","le")}utils.intFromLE=intFromLE},{"bn.js":9}],26:[function(require,module,exports){module.exports={version:"6.3.3"}},{}],27:[function(require,module,exports){var hash=exports;hash.utils=require("./hash/utils");hash.common=require("./hash/common");hash.sha=require("./hash/sha");hash.ripemd=require("./hash/ripemd");hash.hmac=require("./hash/hmac");hash.sha1=hash.sha.sha1;hash.sha256=hash.sha.sha256;hash.sha224=hash.sha.sha224;hash.sha384=hash.sha.sha384;hash.sha512=hash.sha.sha512;hash.ripemd160=hash.ripemd.ripemd160},{"./hash/common":28,"./hash/hmac":29,"./hash/ripemd":30,"./hash/sha":31,"./hash/utils":38}],28:[function(require,module,exports){"use strict";var utils=require("./utils");var assert=require("minimalistic-assert");function BlockHash(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}exports.BlockHash=BlockHash;BlockHash.prototype.update=function update(msg,enc){msg=utils.toArray(msg,enc);if(!this.pending)this.pending=msg;else this.pending=this.pending.concat(msg);this.pendingTotal+=msg.length;if(this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length);if(this.pending.length===0)this.pending=null;msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this};BlockHash.prototype.digest=function digest(enc){this.update(this._pad());assert(this.pending===null);return this._digest(enc)};BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-(len+this.padLength)%bytes;var res=new Array(k+this.padLength);res[0]=128;for(var i=1;i<k;i++)res[i]=0;len<<=3;if(this.endian==="big"){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=len>>>24&255;res[i++]=len>>>16&255;res[i++]=len>>>8&255;res[i++]=len&255}else{res[i++]=len&255;res[i++]=len>>>8&255;res[i++]=len>>>16&255;res[i++]=len>>>24&255;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;for(t=8;t<this.padLength;t++)res[i++]=0}return res}},{"./utils":38,"minimalistic-assert":41}],29:[function(require,module,exports){"use strict";var utils=require("./utils");var assert=require("minimalistic-assert");function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash;this.blockSize=hash.blockSize/8;this.outSize=hash.outSize/8;this.inner=null;this.outer=null;this._init(utils.toArray(key,enc))}module.exports=Hmac;Hmac.prototype._init=function init(key){if(key.length>this.blockSize)key=(new this.Hash).update(key).digest();assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(i=0;i<key.length;i++)key[i]^=54;this.inner=(new this.Hash).update(key);for(i=0;i<key.length;i++)key[i]^=106;this.outer=(new this.Hash).update(key)};Hmac.prototype.update=function update(msg,enc){this.inner.update(msg,enc);return this};Hmac.prototype.digest=function digest(enc){this.outer.update(this.inner.digest());return this.outer.digest(enc)}},{"./utils":38,"minimalistic-assert":41}],30:[function(require,module,exports){module.exports={ripemd160:null}},{}],31:[function(require,module,exports){"use strict";exports.sha1=require("./sha/1");exports.sha224=require("./sha/224");exports.sha256=require("./sha/256");exports.sha384=require("./sha/384");exports.sha512=require("./sha/512")},{"./sha/1":32,"./sha/224":33,"./sha/256":34,"./sha/384":35,"./sha/512":36}],32:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],33:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],34:[function(require,module,exports){"use strict";var utils=require("../utils");var common=require("../common");var shaCommon=require("./common");var assert=require("minimalistic-assert");var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var ch32=shaCommon.ch32;var maj32=shaCommon.maj32;var s0_256=shaCommon.s0_256;var s1_256=shaCommon.s1_256;var g0_256=shaCommon.g0_256;var g1_256=shaCommon.g1_256;var BlockHash=common.BlockHash;var sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=sha256_K;this.W=new Array(64)}utils.inherits(SHA256,BlockHash);module.exports=SHA256;SHA256.blockSize=512;SHA256.outSize=256;SHA256.hmacStrength=192;SHA256.padLength=64;SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];assert(this.k.length===W.length);for(i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g;g=f;f=e;e=sum32(d,T1);d=c;c=b;b=a;a=sum32(T1,T2)}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);this.h[5]=sum32(this.h[5],f);this.h[6]=sum32(this.h[6],g);this.h[7]=sum32(this.h[7],h)};SHA256.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")}},{"../common":28,"../utils":38,"./common":37,"minimalistic-assert":41}],35:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],36:[function(require,module,exports){"use strict";var utils=require("../utils");var common=require("../common");var assert=require("minimalistic-assert");var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=common.BlockHash;var sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=sha512_K;this.W=new Array(160)}utils.inherits(SHA512,BlockHash);module.exports=SHA512;SHA512.blockSize=1024;SHA512.outSize=512;SHA512.hmacStrength=192;SHA512.padLength=128;SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}};SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al);c0_lo=s0_512_lo(ah,al);c1_hi=maj64_hi(ah,al,bh,bl,ch,cl);c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;eh=sum64_hi(dh,dl,T1_hi,T1_lo);el=sum64_lo(dl,dl,T1_hi,T1_lo);dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo);al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al);sum64(this.h,2,bh,bl);sum64(this.h,4,ch,cl);sum64(this.h,6,dh,dl);sum64(this.h,8,eh,el);sum64(this.h,10,fh,fl);sum64(this.h,12,gh,gl);sum64(this.h,14,hh,hl)};SHA512.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")};function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;if(r<0)r+=4294967296;return r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;if(r<0)r+=4294967296;return r}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;if(r<0)r+=4294967296;return r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;if(r<0)r+=4294967296;return r}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}},{"../common":28,"../utils":38,"minimalistic-assert":41}],37:[function(require,module,exports){"use strict";var utils=require("../utils");var rotr32=utils.rotr32;function ft_1(s,x,y,z){if(s===0)return ch32(x,y,z);if(s===1||s===3)return p32(x,y,z);if(s===2)return maj32(x,y,z)}exports.ft_1=ft_1;function ch32(x,y,z){return x&y^~x&z}exports.ch32=ch32;function maj32(x,y,z){return x&y^x&z^y&z}exports.maj32=maj32;function p32(x,y,z){return x^y^z}exports.p32=p32;function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)}exports.s0_256=s0_256;function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)}exports.s1_256=s1_256;function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3}exports.g0_256=g0_256;function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10}exports.g1_256=g1_256},{"../utils":38}],38:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");exports.inherits=inherits;function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg==="string"){if(!enc){for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&255;if(hi)res.push(hi,lo);else res.push(lo)}}else if(enc==="hex"){msg=msg.replace(/[^a-z0-9]+/gi,"");if(msg.length%2!==0)msg="0"+msg;for(i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}}else{for(i=0;i<msg.length;i++)res[i]=msg[i]|0}return res}exports.toArray=toArray;function toHex(msg){var res="";for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}exports.toHex=toHex;function htonl(w){var res=w>>>24|w>>>8&65280|w<<8&16711680|(w&255)<<24;return res>>>0}exports.htonl=htonl;function toHex32(msg,endian){var res="";for(var i=0;i<msg.length;i++){var w=msg[i];if(endian==="little")w=htonl(w);res+=zero8(w.toString(16))}return res}exports.toHex32=toHex32;function zero2(word){if(word.length===1)return"0"+word;else return word}exports.zero2=zero2;function zero8(word){if(word.length===7)return"0"+word;else if(word.length===6)return"00"+word;else if(word.length===5)return"000"+word;else if(word.length===4)return"0000"+word;else if(word.length===3)return"00000"+word;else if(word.length===2)return"000000"+word;else if(word.length===1)return"0000000"+word;else return word}exports.zero8=zero8;function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=new Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;if(endian==="big")w=msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3];else w=msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k];res[i]=w>>>0}return res}exports.join32=join32;function split32(msg,endian){var res=new Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];if(endian==="big"){res[k]=m>>>24;res[k+1]=m>>>16&255;res[k+2]=m>>>8&255;res[k+3]=m&255}else{res[k+3]=m>>>24;res[k+2]=m>>>16&255;res[k+1]=m>>>8&255;res[k]=m&255}}return res}exports.split32=split32;function rotr32(w,b){return w>>>b|w<<32-b}exports.rotr32=rotr32;function rotl32(w,b){return w<<b|w>>>32-b}exports.rotl32=rotl32;function sum32(a,b){return a+b>>>0}exports.sum32=sum32;function sum32_3(a,b,c){return a+b+c>>>0}exports.sum32_3=sum32_3;function sum32_4(a,b,c,d){return a+b+c+d>>>0}exports.sum32_4=sum32_4;function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0}exports.sum32_5=sum32_5;function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0;buf[pos+1]=lo}exports.sum64=sum64;function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0}exports.sum64_hi=sum64_hi;function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0}exports.sum64_lo=sum64_lo;function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0}exports.sum64_4_hi=sum64_4_hi;function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0}exports.sum64_4_lo=sum64_4_lo;function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;lo=lo+el>>>0;carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0}exports.sum64_5_hi=sum64_5_hi;function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0}exports.sum64_5_lo=sum64_5_lo;function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0}exports.rotr64_hi=rotr64_hi;function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}exports.rotr64_lo=rotr64_lo;function shr64_hi(ah,al,num){return ah>>>num}exports.shr64_hi=shr64_hi;function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}exports.shr64_lo=shr64_lo},{inherits:39,"minimalistic-assert":41}],39:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],40:[function(require,module,exports){(function(process,global){(function(){"use strict";var root=typeof window==="object"?window:{};var NODE_JS=!root.JS_SHA3_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(NODE_JS){root=global}var COMMON_JS=!root.JS_SHA3_NO_COMMON_JS&&typeof module==="object"&&module.exports;var HEX_CHARS="0123456789abcdef".split("");var SHAKE_PADDING=[31,7936,2031616,520093696];var KECCAK_PADDING=[1,256,65536,16777216];var PADDING=[6,1536,393216,100663296];var SHIFT=[0,8,16,24];var RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var BITS=[224,256,384,512];var SHAKE_BITS=[128,256];var OUTPUT_TYPES=["hex","buffer","arrayBuffer","array"];var createOutputMethod=function(bits,padding,outputType){return function(message){return new Keccak(bits,padding,bits).update(message)[outputType]()}};var createShakeOutputMethod=function(bits,padding,outputType){return function(message,outputBits){return new Keccak(bits,padding,outputBits).update(message)[outputType]()}};var createMethod=function(bits,padding){var method=createOutputMethod(bits,padding,"hex");method.create=function(){return new Keccak(bits,padding,bits)};method.update=function(message){return method.create().update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(bits,padding,type)}return method};var createShakeMethod=function(bits,padding){var method=createShakeOutputMethod(bits,padding,"hex");method.create=function(outputBits){return new Keccak(bits,padding,outputBits)};method.update=function(message,outputBits){return method.create(outputBits).update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createShakeOutputMethod(bits,padding,type)}return method};var algorithms=[{name:"keccak",padding:KECCAK_PADDING,bits:BITS,createMethod:createMethod},{name:"sha3",padding:PADDING,bits:BITS,createMethod:createMethod},{name:"shake",padding:SHAKE_PADDING,bits:SHAKE_BITS,createMethod:createShakeMethod}];var methods={},methodNames=[];for(var i=0;i<algorithms.length;++i){var algorithm=algorithms[i];var bits=algorithm.bits;for(var j=0;j<bits.length;++j){var methodName=algorithm.name+"_"+bits[j];methodNames.push(methodName);methods[methodName]=algorithm.createMethod(bits[j],algorithm.padding)}}function Keccak(bits,padding,outputBits){this.blocks=[];this.s=[];this.padding=padding;this.outputBits=outputBits;this.reset=true;this.block=0;this.start=0;this.blockCount=1600-(bits<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=outputBits>>5;this.extraBytes=(outputBits&31)>>3;for(var i=0;i<50;++i){this.s[i]=0}}Keccak.prototype.update=function(message){var notString=typeof message!=="string";if(notString&&message.constructor===ArrayBuffer){message=new Uint8Array(message)}var length=message.length,blocks=this.blocks,byteCount=this.byteCount,blockCount=this.blockCount,index=0,s=this.s,i,code;while(index<length){if(this.reset){this.reset=false;blocks[0]=this.block;for(i=1;i<blockCount+1;++i){blocks[i]=0}}if(notString){for(i=this.start;index<length&&i<byteCount;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3]}}else{for(i=this.start;index<length&&i<byteCount;++index){code=message.charCodeAt(index);if(code<128){blocks[i>>2]|=code<<SHIFT[i++&3]}else if(code<2048){blocks[i>>2]|=(192|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else if(code<55296||code>=57344){blocks[i>>2]|=(224|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else{code=65536+((code&1023)<<10|message.charCodeAt(++index)&1023);blocks[i>>2]|=(240|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>12&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}}}this.lastByteIndex=i;if(i>=byteCount){this.start=i-byteCount;this.block=blocks[blockCount];for(i=0;i<blockCount;++i){s[i]^=blocks[i]}f(s);
this.reset=true}else{this.start=i}}return this};Keccak.prototype.finalize=function(){var blocks=this.blocks,i=this.lastByteIndex,blockCount=this.blockCount,s=this.s;blocks[i>>2]|=this.padding[i&3];if(this.lastByteIndex===this.byteCount){blocks[0]=blocks[blockCount];for(i=1;i<blockCount+1;++i){blocks[i]=0}}blocks[blockCount-1]|=2147483648;for(i=0;i<blockCount;++i){s[i]^=blocks[i]}f(s)};Keccak.prototype.toString=Keccak.prototype.hex=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var hex="",block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){block=s[i];hex+=HEX_CHARS[block>>4&15]+HEX_CHARS[block&15]+HEX_CHARS[block>>12&15]+HEX_CHARS[block>>8&15]+HEX_CHARS[block>>20&15]+HEX_CHARS[block>>16&15]+HEX_CHARS[block>>28&15]+HEX_CHARS[block>>24&15]}if(j%blockCount===0){f(s);i=0}}if(extraBytes){block=s[i];if(extraBytes>0){hex+=HEX_CHARS[block>>4&15]+HEX_CHARS[block&15]}if(extraBytes>1){hex+=HEX_CHARS[block>>12&15]+HEX_CHARS[block>>8&15]}if(extraBytes>2){hex+=HEX_CHARS[block>>20&15]+HEX_CHARS[block>>16&15]}}return hex};Keccak.prototype.arrayBuffer=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var bytes=this.outputBits>>3;var buffer;if(extraBytes){buffer=new ArrayBuffer(outputBlocks+1<<2)}else{buffer=new ArrayBuffer(bytes)}var array=new Uint32Array(buffer);while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){array[j]=s[i]}if(j%blockCount===0){f(s)}}if(extraBytes){array[i]=s[i];buffer=buffer.slice(0,bytes)}return buffer};Keccak.prototype.buffer=Keccak.prototype.arrayBuffer;Keccak.prototype.digest=Keccak.prototype.array=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var array=[],offset,block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){offset=j<<2;block=s[i];array[offset]=block&255;array[offset+1]=block>>8&255;array[offset+2]=block>>16&255;array[offset+3]=block>>24&255}if(j%blockCount===0){f(s)}}if(extraBytes){offset=j<<2;block=s[i];if(extraBytes>0){array[offset]=block&255}if(extraBytes>1){array[offset+1]=block>>8&255}if(extraBytes>2){array[offset+2]=block>>16&255}}return array};var f=function(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2){c0=s[0]^s[10]^s[20]^s[30]^s[40];c1=s[1]^s[11]^s[21]^s[31]^s[41];c2=s[2]^s[12]^s[22]^s[32]^s[42];c3=s[3]^s[13]^s[23]^s[33]^s[43];c4=s[4]^s[14]^s[24]^s[34]^s[44];c5=s[5]^s[15]^s[25]^s[35]^s[45];c6=s[6]^s[16]^s[26]^s[36]^s[46];c7=s[7]^s[17]^s[27]^s[37]^s[47];c8=s[8]^s[18]^s[28]^s[38]^s[48];c9=s[9]^s[19]^s[29]^s[39]^s[49];h=c8^(c2<<1|c3>>>31);l=c9^(c3<<1|c2>>>31);s[0]^=h;s[1]^=l;s[10]^=h;s[11]^=l;s[20]^=h;s[21]^=l;s[30]^=h;s[31]^=l;s[40]^=h;s[41]^=l;h=c0^(c4<<1|c5>>>31);l=c1^(c5<<1|c4>>>31);s[2]^=h;s[3]^=l;s[12]^=h;s[13]^=l;s[22]^=h;s[23]^=l;s[32]^=h;s[33]^=l;s[42]^=h;s[43]^=l;h=c2^(c6<<1|c7>>>31);l=c3^(c7<<1|c6>>>31);s[4]^=h;s[5]^=l;s[14]^=h;s[15]^=l;s[24]^=h;s[25]^=l;s[34]^=h;s[35]^=l;s[44]^=h;s[45]^=l;h=c4^(c8<<1|c9>>>31);l=c5^(c9<<1|c8>>>31);s[6]^=h;s[7]^=l;s[16]^=h;s[17]^=l;s[26]^=h;s[27]^=l;s[36]^=h;s[37]^=l;s[46]^=h;s[47]^=l;h=c6^(c0<<1|c1>>>31);l=c7^(c1<<1|c0>>>31);s[8]^=h;s[9]^=l;s[18]^=h;s[19]^=l;s[28]^=h;s[29]^=l;s[38]^=h;s[39]^=l;s[48]^=h;s[49]^=l;b0=s[0];b1=s[1];b32=s[11]<<4|s[10]>>>28;b33=s[10]<<4|s[11]>>>28;b14=s[20]<<3|s[21]>>>29;b15=s[21]<<3|s[20]>>>29;b46=s[31]<<9|s[30]>>>23;b47=s[30]<<9|s[31]>>>23;b28=s[40]<<18|s[41]>>>14;b29=s[41]<<18|s[40]>>>14;b20=s[2]<<1|s[3]>>>31;b21=s[3]<<1|s[2]>>>31;b2=s[13]<<12|s[12]>>>20;b3=s[12]<<12|s[13]>>>20;b34=s[22]<<10|s[23]>>>22;b35=s[23]<<10|s[22]>>>22;b16=s[33]<<13|s[32]>>>19;b17=s[32]<<13|s[33]>>>19;b48=s[42]<<2|s[43]>>>30;b49=s[43]<<2|s[42]>>>30;b40=s[5]<<30|s[4]>>>2;b41=s[4]<<30|s[5]>>>2;b22=s[14]<<6|s[15]>>>26;b23=s[15]<<6|s[14]>>>26;b4=s[25]<<11|s[24]>>>21;b5=s[24]<<11|s[25]>>>21;b36=s[34]<<15|s[35]>>>17;b37=s[35]<<15|s[34]>>>17;b18=s[45]<<29|s[44]>>>3;b19=s[44]<<29|s[45]>>>3;b10=s[6]<<28|s[7]>>>4;b11=s[7]<<28|s[6]>>>4;b42=s[17]<<23|s[16]>>>9;b43=s[16]<<23|s[17]>>>9;b24=s[26]<<25|s[27]>>>7;b25=s[27]<<25|s[26]>>>7;b6=s[36]<<21|s[37]>>>11;b7=s[37]<<21|s[36]>>>11;b38=s[47]<<24|s[46]>>>8;b39=s[46]<<24|s[47]>>>8;b30=s[8]<<27|s[9]>>>5;b31=s[9]<<27|s[8]>>>5;b12=s[18]<<20|s[19]>>>12;b13=s[19]<<20|s[18]>>>12;b44=s[29]<<7|s[28]>>>25;b45=s[28]<<7|s[29]>>>25;b26=s[38]<<8|s[39]>>>24;b27=s[39]<<8|s[38]>>>24;b8=s[48]<<14|s[49]>>>18;b9=s[49]<<14|s[48]>>>18;s[0]=b0^~b2&b4;s[1]=b1^~b3&b5;s[10]=b10^~b12&b14;s[11]=b11^~b13&b15;s[20]=b20^~b22&b24;s[21]=b21^~b23&b25;s[30]=b30^~b32&b34;s[31]=b31^~b33&b35;s[40]=b40^~b42&b44;s[41]=b41^~b43&b45;s[2]=b2^~b4&b6;s[3]=b3^~b5&b7;s[12]=b12^~b14&b16;s[13]=b13^~b15&b17;s[22]=b22^~b24&b26;s[23]=b23^~b25&b27;s[32]=b32^~b34&b36;s[33]=b33^~b35&b37;s[42]=b42^~b44&b46;s[43]=b43^~b45&b47;s[4]=b4^~b6&b8;s[5]=b5^~b7&b9;s[14]=b14^~b16&b18;s[15]=b15^~b17&b19;s[24]=b24^~b26&b28;s[25]=b25^~b27&b29;s[34]=b34^~b36&b38;s[35]=b35^~b37&b39;s[44]=b44^~b46&b48;s[45]=b45^~b47&b49;s[6]=b6^~b8&b0;s[7]=b7^~b9&b1;s[16]=b16^~b18&b10;s[17]=b17^~b19&b11;s[26]=b26^~b28&b20;s[27]=b27^~b29&b21;s[36]=b36^~b38&b30;s[37]=b37^~b39&b31;s[46]=b46^~b48&b40;s[47]=b47^~b49&b41;s[8]=b8^~b0&b2;s[9]=b9^~b1&b3;s[18]=b18^~b10&b12;s[19]=b19^~b11&b13;s[28]=b28^~b20&b22;s[29]=b29^~b21&b23;s[38]=b38^~b30&b32;s[39]=b39^~b31&b33;s[48]=b48^~b40&b42;s[49]=b49^~b41&b43;s[0]^=RC[n];s[1]^=RC[n+1]}};if(COMMON_JS){module.exports=methods}else{for(var i=0;i<methodNames.length;++i){root[methodNames[i]]=methods[methodNames[i]]}}})()}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:42}],41:[function(require,module,exports){module.exports=assert;function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}assert.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)}},{}],42:[function(require,module,exports){module.exports={browser:true}},{}],43:[function(require,module,exports){(function(setImmediate){"use strict";(function(root){var MAX_VALUE=2147483647;function SHA256(m){var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var h0=1779033703,h1=3144134277,h2=1013904242,h3=2773480762;var h4=1359893119,h5=2600822924,h6=528734635,h7=1541459225;var w=new Array(64);function blocks(p){var off=0,len=p.length;while(len>=64){var a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7,u,i,j,t1,t2;for(i=0;i<16;i++){j=off+i*4;w[i]=(p[j]&255)<<24|(p[j+1]&255)<<16|(p[j+2]&255)<<8|p[j+3]&255}for(i=16;i<64;i++){u=w[i-2];t1=(u>>>17|u<<32-17)^(u>>>19|u<<32-19)^u>>>10;u=w[i-15];t2=(u>>>7|u<<32-7)^(u>>>18|u<<32-18)^u>>>3;w[i]=(t1+w[i-7]|0)+(t2+w[i-16]|0)|0}for(i=0;i<64;i++){t1=(((e>>>6|e<<32-6)^(e>>>11|e<<32-11)^(e>>>25|e<<32-25))+(e&f^~e&g)|0)+(h+(K[i]+w[i]|0)|0)|0;t2=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&b^a&c^b&c)|0;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0}h0=h0+a|0;h1=h1+b|0;h2=h2+c|0;h3=h3+d|0;h4=h4+e|0;h5=h5+f|0;h6=h6+g|0;h7=h7+h|0;off+=64;len-=64}}blocks(m);var i,bytesLeft=m.length%64,bitLenHi=m.length/536870912|0,bitLenLo=m.length<<3,numZeros=bytesLeft<56?56:120,p=m.slice(m.length-bytesLeft,m.length);p.push(128);for(i=bytesLeft+1;i<numZeros;i++){p.push(0)}p.push(bitLenHi>>>24&255);p.push(bitLenHi>>>16&255);p.push(bitLenHi>>>8&255);p.push(bitLenHi>>>0&255);p.push(bitLenLo>>>24&255);p.push(bitLenLo>>>16&255);p.push(bitLenLo>>>8&255);p.push(bitLenLo>>>0&255);blocks(p);return[h0>>>24&255,h0>>>16&255,h0>>>8&255,h0>>>0&255,h1>>>24&255,h1>>>16&255,h1>>>8&255,h1>>>0&255,h2>>>24&255,h2>>>16&255,h2>>>8&255,h2>>>0&255,h3>>>24&255,h3>>>16&255,h3>>>8&255,h3>>>0&255,h4>>>24&255,h4>>>16&255,h4>>>8&255,h4>>>0&255,h5>>>24&255,h5>>>16&255,h5>>>8&255,h5>>>0&255,h6>>>24&255,h6>>>16&255,h6>>>8&255,h6>>>0&255,h7>>>24&255,h7>>>16&255,h7>>>8&255,h7>>>0&255]}function PBKDF2_HMAC_SHA256_OneIter(password,salt,dkLen){password=password.length<=64?password:SHA256(password);var i;var innerLen=64+salt.length+4;var inner=new Array(innerLen);var outerKey=new Array(64);var dk=[];for(i=0;i<64;i++)inner[i]=54;for(i=0;i<password.length;i++)inner[i]^=password[i];for(i=0;i<salt.length;i++)inner[64+i]=salt[i];for(i=innerLen-4;i<innerLen;i++)inner[i]=0;for(i=0;i<64;i++)outerKey[i]=92;for(i=0;i<password.length;i++)outerKey[i]^=password[i];function incrementCounter(){for(var i=innerLen-1;i>=innerLen-4;i--){inner[i]++;if(inner[i]<=255)return;inner[i]=0}}while(dkLen>=32){incrementCounter();dk=dk.concat(SHA256(outerKey.concat(SHA256(inner))));dkLen-=32}if(dkLen>0){incrementCounter();dk=dk.concat(SHA256(outerKey.concat(SHA256(inner))).slice(0,dkLen))}return dk}function blockmix_salsa8(BY,Yi,r,x,_X){var i;arraycopy(BY,(2*r-1)*16,_X,0,16);for(i=0;i<2*r;i++){blockxor(BY,i*16,_X,16);salsa20_8(_X,x);arraycopy(_X,0,BY,Yi+i*16,16)}for(i=0;i<r;i++){arraycopy(BY,Yi+i*2*16,BY,i*16,16)}for(i=0;i<r;i++){arraycopy(BY,Yi+(i*2+1)*16,BY,(i+r)*16,16)}}function R(a,b){return a<<b|a>>>32-b}function salsa20_8(B,x){arraycopy(B,0,x,0,16);for(var i=8;i>0;i-=2){x[4]^=R(x[0]+x[12],7);x[8]^=R(x[4]+x[0],9);x[12]^=R(x[8]+x[4],13);x[0]^=R(x[12]+x[8],18);x[9]^=R(x[5]+x[1],7);x[13]^=R(x[9]+x[5],9);x[1]^=R(x[13]+x[9],13);x[5]^=R(x[1]+x[13],18);x[14]^=R(x[10]+x[6],7);x[2]^=R(x[14]+x[10],9);x[6]^=R(x[2]+x[14],13);x[10]^=R(x[6]+x[2],18);x[3]^=R(x[15]+x[11],7);x[7]^=R(x[3]+x[15],9);x[11]^=R(x[7]+x[3],13);x[15]^=R(x[11]+x[7],18);x[1]^=R(x[0]+x[3],7);x[2]^=R(x[1]+x[0],9);x[3]^=R(x[2]+x[1],13);x[0]^=R(x[3]+x[2],18);x[6]^=R(x[5]+x[4],7);x[7]^=R(x[6]+x[5],9);x[4]^=R(x[7]+x[6],13);x[5]^=R(x[4]+x[7],18);x[11]^=R(x[10]+x[9],7);x[8]^=R(x[11]+x[10],9);x[9]^=R(x[8]+x[11],13);x[10]^=R(x[9]+x[8],18);x[12]^=R(x[15]+x[14],7);x[13]^=R(x[12]+x[15],9);x[14]^=R(x[13]+x[12],13);x[15]^=R(x[14]+x[13],18)}for(i=0;i<16;++i){B[i]+=x[i]}}function blockxor(S,Si,D,len){for(var i=0;i<len;i++){D[i]^=S[Si+i]}}function arraycopy(src,srcPos,dest,destPos,length){while(length--){dest[destPos++]=src[srcPos++]}}function checkBufferish(o){if(!o||typeof o.length!=="number"){return false}for(var i=0;i<o.length;i++){if(typeof o[i]!=="number"){return false}var v=parseInt(o[i]);if(v!=o[i]||v<0||v>=256){return false}}return true}function ensureInteger(value,name){var intValue=parseInt(value);if(value!=intValue){throw new Error("invalid "+name)}return intValue}function scrypt(password,salt,N,r,p,dkLen,callback){if(!callback){throw new Error("missing callback")}N=ensureInteger(N,"N");r=ensureInteger(r,"r");p=ensureInteger(p,"p");dkLen=ensureInteger(dkLen,"dkLen");if(N===0||(N&N-1)!==0){throw new Error("N must be power of 2")}if(N>MAX_VALUE/128/r){throw new Error("N too large")}if(r>MAX_VALUE/128/p){throw new Error("r too large")}if(!checkBufferish(password)){throw new Error("password must be an array or buffer")}password=Array.prototype.slice.call(password);if(!checkBufferish(salt)){throw new Error("salt must be an array or buffer")}salt=Array.prototype.slice.call(salt);var b=PBKDF2_HMAC_SHA256_OneIter(password,salt,p*128*r);var B=new Uint32Array(p*32*r);for(var i=0;i<B.length;i++){var j=i*4;B[i]=(b[j+3]&255)<<24|(b[j+2]&255)<<16|(b[j+1]&255)<<8|(b[j+0]&255)<<0}var XY=new Uint32Array(64*r);var V=new Uint32Array(32*r*N);var Yi=32*r;var x=new Uint32Array(16);var _X=new Uint32Array(16);var totalOps=p*N*2;var currentOp=0;var lastPercent10=null;var stop=false;var state=0;var i0=0,i1;var Bi;var limit=parseInt(1e3/r);var nextTick=typeof setImmediate!=="undefined"?setImmediate:setTimeout;var incrementalSMix=function(){if(stop){return callback(new Error("cancelled"),currentOp/totalOps)}switch(state){case 0:Bi=i0*32*r;arraycopy(B,Bi,XY,0,Yi);state=1;i1=0;case 1:var steps=N-i1;if(steps>limit){steps=limit}for(var i=0;i<steps;i++){arraycopy(XY,0,V,(i1+i)*Yi,Yi);blockmix_salsa8(XY,Yi,r,x,_X)}i1+=steps;currentOp+=steps;var percent10=parseInt(1e3*currentOp/totalOps);if(percent10!==lastPercent10){stop=callback(null,currentOp/totalOps);if(stop){break}lastPercent10=percent10}if(i1<N){break}i1=0;state=2;case 2:var steps=N-i1;if(steps>limit){steps=limit}for(var i=0;i<steps;i++){var offset=(2*r-1)*16;var j=XY[offset]&N-1;blockxor(V,j*Yi,XY,Yi);blockmix_salsa8(XY,Yi,r,x,_X)}i1+=steps;currentOp+=steps;var percent10=parseInt(1e3*currentOp/totalOps);if(percent10!==lastPercent10){stop=callback(null,currentOp/totalOps);if(stop){break}lastPercent10=percent10}if(i1<N){break}arraycopy(XY,0,B,Bi,Yi);i0++;if(i0<p){state=0;break}b=[];for(var i=0;i<B.length;i++){b.push(B[i]>>0&255);b.push(B[i]>>8&255);b.push(B[i]>>16&255);b.push(B[i]>>24&255)}var derivedKey=PBKDF2_HMAC_SHA256_OneIter(password,b,dkLen);return callback(null,1,derivedKey)}nextTick(incrementalSMix)};incrementalSMix()}if(typeof exports!=="undefined"){module.exports=scrypt}else if(typeof define==="function"&&define.amd){define(scrypt)}else if(root){if(root.scrypt){root._scrypt=root.scrypt}root.scrypt=scrypt}})(this)}).call(this,require("timers").setImmediate)},{timers:45}],44:[function(require,module,exports){(function(process,global){(function(global,undefined){"use strict";if(global.setImmediate){return}var nextHandle=1;var tasksByHandle={};var currentlyRunningATask=false;var doc=global.document;var setImmediate;function addFromSetImmediateArguments(args){tasksByHandle[nextHandle]=partiallyApplied.apply(undefined,args);return nextHandle++}function partiallyApplied(handler){var args=[].slice.call(arguments,1);return function(){if(typeof handler==="function"){handler.apply(undefined,args)}else{new Function(""+handler)()}}}function runIfPresent(handle){if(currentlyRunningATask){setTimeout(partiallyApplied(runIfPresent,handle),0)}else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=true;try{task()}finally{clearImmediate(handle);currentlyRunningATask=false}}}}function clearImmediate(handle){delete tasksByHandle[handle]}function installNextTickImplementation(){setImmediate=function(){var handle=addFromSetImmediateArguments(arguments);process.nextTick(partiallyApplied(runIfPresent,handle));return handle}}function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=true;var oldOnMessage=global.onmessage;global.onmessage=function(){postMessageIsAsynchronous=false};global.postMessage("","*");global.onmessage=oldOnMessage;return postMessageIsAsynchronous}}function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$";var onGlobalMessage=function(event){if(event.source===global&&typeof event.data==="string"&&event.data.indexOf(messagePrefix)===0){runIfPresent(+event.data.slice(messagePrefix.length))}};if(global.addEventListener){global.addEventListener("message",onGlobalMessage,false)}else{global.attachEvent("onmessage",onGlobalMessage)}setImmediate=function(){var handle=addFromSetImmediateArguments(arguments);global.postMessage(messagePrefix+handle,"*");return handle}}function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){var handle=event.data;runIfPresent(handle)};setImmediate=function(){var handle=addFromSetImmediateArguments(arguments);channel.port2.postMessage(handle);return handle}}function installReadyStateChangeImplementation(){var html=doc.documentElement;setImmediate=function(){var handle=addFromSetImmediateArguments(arguments);var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle);script.onreadystatechange=null;html.removeChild(script);script=null};html.appendChild(script);return handle}}function installSetTimeoutImplementation(){setImmediate=function(){var handle=addFromSetImmediateArguments(arguments);setTimeout(partiallyApplied(runIfPresent,handle),0);return handle}}var attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global;if({}.toString.call(global.process)==="[object process]"){installNextTickImplementation()}else if(canUsePostMessage()){installPostMessageImplementation()}else if(global.MessageChannel){installMessageChannelImplementation()}else if(doc&&"onreadystatechange"in doc.createElement("script")){installReadyStateChangeImplementation()}else{installSetTimeoutImplementation()}attachTo.setImmediate=setImmediate;attachTo.clearImmediate=clearImmediate})(typeof self==="undefined"?typeof global==="undefined"?this:global:self)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:42}],45:[function(require,module,exports){(function(global){module.exports={setImmediate:global.setImmediate}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],46:[function(require,module,exports){(function(global){var rng;if(global.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function whatwgRNG(){crypto.getRandomValues(_rnds8);return _rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;_rnds[i]=r>>>((i&3)<<3)&255}return _rnds}}module.exports=rng}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],47:[function(require,module,exports){var _rng=require("./rng");var _byteToHex=[];var _hexToByte={};for(var i=0;i<256;i++){_byteToHex[i]=(i+256).toString(16).substr(1);_hexToByte[_byteToHex[i]]=i}function parse(s,buf,offset){var i=buf&&offset||0,ii=0;buf=buf||[];s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){if(ii<16){buf[i+ii++]=_hexToByte[oct]}});while(ii<16){buf[i+ii++]=0}return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}var _seedBytes=_rng();var _nodeId=[_seedBytes[0]|1,_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]];var _clockseq=(_seedBytes[6]<<8|_seedBytes[7])&16383;var _lastMSecs=0,_lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;var node=options.node||_nodeId;for(var n=0;n<6;n++){b[i+n]=node[n]}return buf?buf:unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options=="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||_rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;ii++){buf[i+ii]=rnds[ii]}}return buf||unparse(rnds)}var uuid=v4;uuid.v1=v1;uuid.v4=v4;uuid.parse=parse;uuid.unparse=unparse;module.exports=uuid},{"./rng":46}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});try{module.exports.XMLHttpRequest=XMLHttpRequest}catch(error){console.log("Warning: XMLHttpRequest is not defined");module.exports.XMLHttpRequest=null}},{}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var properties_1=require("../utils/properties");var Provider=function(){function Provider(){properties_1.setType(this,"Provider")}Provider.isProvider=function(value){return properties_1.isType(value,"Provider")};return Provider}();exports.Provider=Provider},{"../utils/properties":72}],50:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var address_1=require("../utils/address");var bignumber_1=require("../utils/bignumber");var bytes_1=require("../utils/bytes");var hash_1=require("../utils/hash");var networks_1=require("../utils/networks");var properties_1=require("../utils/properties");var rlp_1=require("../utils/rlp");var transaction_1=require("../utils/transaction");var utf8_1=require("../utils/utf8");var web_1=require("../utils/web");var errors=__importStar(require("../errors"));var abstract_provider_1=require("./abstract-provider");function check(format,object){var result={};for(var key in format){try{var value=format[key](object[key]);if(value!==undefined){result[key]=value}}catch(error){error.checkKey=key;error.checkValue=object[key];throw error}}return result}function allowNull(check,nullValue){return function(value){if(value==null){return nullValue}return check(value)}}function allowFalsish(check,replaceValue){return function(value){if(!value){return replaceValue}return check(value)}}function arrayOf(check){return function(array){if(!Array.isArray(array)){throw new Error("not an array")}var result=[];array.forEach(function(value){result.push(check(value))});return result}}function checkHash(hash,requirePrefix){if(typeof hash==="string"){if(!requirePrefix&&hash.substring(0,2)!=="0x"){hash="0x"+hash}if(bytes_1.hexDataLength(hash)===32){return hash.toLowerCase()}}errors.throwError("invalid hash",errors.INVALID_ARGUMENT,{arg:"hash",value:hash});return null}function checkNumber(number){return bignumber_1.bigNumberify(number).toNumber()}function checkDifficulty(value){var v=bignumber_1.bigNumberify(value);try{return v.toNumber()}catch(error){}return null}function checkBoolean(value){if(typeof value==="boolean"){return value}if(typeof value==="string"){if(value==="true"){return true}if(value==="false"){return false}}throw new Error("invaid boolean - "+value)}function checkUint256(uint256){if(!bytes_1.isHexString(uint256)){throw new Error("invalid uint256")}while(uint256.length<66){uint256="0x0"+uint256.substring(2)}return uint256}function checkBlockTag(blockTag){if(blockTag==null){return"latest"}if(blockTag==="earliest"){return"0x0"}if(blockTag==="latest"||blockTag==="pending"){return blockTag}if(typeof blockTag==="number"){return bytes_1.hexStripZeros(bytes_1.hexlify(blockTag))}if(bytes_1.isHexString(blockTag)){return bytes_1.hexStripZeros(blockTag)}throw new Error("invalid blockTag")}var formatTransaction={hash:checkHash,blockHash:allowNull(checkHash,null),blockNumber:allowNull(checkNumber,null),transactionIndex:allowNull(checkNumber,null),confirmations:allowNull(checkNumber,null),from:address_1.getAddress,gasPrice:bignumber_1.bigNumberify,gasLimit:bignumber_1.bigNumberify,to:allowNull(address_1.getAddress,null),value:bignumber_1.bigNumberify,nonce:checkNumber,data:bytes_1.hexlify,r:allowNull(checkUint256),s:allowNull(checkUint256),v:allowNull(checkNumber),creates:allowNull(address_1.getAddress,null),raw:allowNull(bytes_1.hexlify)};function checkTransactionResponse(transaction){if(transaction.gas!=null&&transaction.gasLimit==null){transaction.gasLimit=transaction.gas}if(transaction.to&&bignumber_1.bigNumberify(transaction.to).isZero()){transaction.to="0x0000000000000000000000000000000000000000"}if(transaction.input!=null&&transaction.data==null){transaction.data=transaction.input}if(transaction.to==null&&transaction.creates==null){transaction.creates=address_1.getContractAddress(transaction)}if(!transaction.raw){if(transaction.v&&transaction.r&&transaction.s){var raw=[bytes_1.stripZeros(bytes_1.hexlify(transaction.nonce)),bytes_1.stripZeros(bytes_1.hexlify(transaction.gasPrice)),bytes_1.stripZeros(bytes_1.hexlify(transaction.gasLimit)),transaction.to||"0x",bytes_1.stripZeros(bytes_1.hexlify(transaction.value||"0x")),bytes_1.hexlify(transaction.data||"0x"),bytes_1.stripZeros(bytes_1.hexlify(transaction.v||"0x")),bytes_1.stripZeros(bytes_1.hexlify(transaction.r)),bytes_1.stripZeros(bytes_1.hexlify(transaction.s))];transaction.raw=rlp_1.encode(raw)}}var result=check(formatTransaction,transaction);var networkId=transaction.networkId;if(transaction.chainId!=null&&networkId==null&&result.v==null){networkId=transaction.chainId}if(bytes_1.isHexString(networkId)){networkId=bignumber_1.bigNumberify(networkId).toNumber()}if(typeof networkId!=="number"&&result.v!=null){networkId=(result.v-35)/2;if(networkId<0){networkId=0}networkId=parseInt(networkId)}if(typeof networkId!=="number"){networkId=0}result.networkId=networkId;if(result.blockHash&&result.blockHash.replace(/0/g,"")==="x"){result.blockHash=null}return result}var formatBlock={hash:checkHash,parentHash:checkHash,number:checkNumber,timestamp:checkNumber,nonce:allowNull(bytes_1.hexlify),difficulty:checkDifficulty,gasLimit:bignumber_1.bigNumberify,gasUsed:bignumber_1.bigNumberify,miner:address_1.getAddress,extraData:bytes_1.hexlify,transactions:allowNull(arrayOf(checkHash))};var formatBlockWithTransactions=properties_1.shallowCopy(formatBlock);formatBlockWithTransactions.transactions=allowNull(arrayOf(checkTransactionResponse));function checkBlock(block,includeTransactions){if(block.author!=null&&block.miner==null){block.miner=block.author}return check(includeTransactions?formatBlockWithTransactions:formatBlock,block)}var formatTransactionRequest={from:allowNull(address_1.getAddress),nonce:allowNull(checkNumber),gasLimit:allowNull(bignumber_1.bigNumberify),gasPrice:allowNull(bignumber_1.bigNumberify),to:allowNull(address_1.getAddress),value:allowNull(bignumber_1.bigNumberify),data:allowNull(bytes_1.hexlify)};function checkTransactionRequest(transaction){return check(formatTransactionRequest,transaction)}var formatTransactionReceiptLog={transactionLogIndex:allowNull(checkNumber),transactionIndex:checkNumber,blockNumber:checkNumber,transactionHash:checkHash,address:address_1.getAddress,topics:arrayOf(checkHash),data:bytes_1.hexlify,logIndex:checkNumber,blockHash:checkHash};function checkTransactionReceiptLog(log){return check(formatTransactionReceiptLog,log)}var formatTransactionReceipt={contractAddress:allowNull(address_1.getAddress,null),transactionIndex:checkNumber,root:allowNull(checkHash),gasUsed:bignumber_1.bigNumberify,logsBloom:allowNull(bytes_1.hexlify),blockHash:checkHash,transactionHash:checkHash,logs:arrayOf(checkTransactionReceiptLog),blockNumber:checkNumber,confirmations:allowNull(checkNumber,null),cumulativeGasUsed:bignumber_1.bigNumberify,status:allowNull(checkNumber)};function checkTransactionReceipt(transactionReceipt){var result=check(formatTransactionReceipt,transactionReceipt);result.logs.forEach(function(entry,index){if(entry.transactionLogIndex==null){entry.transactionLogIndex=index}});if(transactionReceipt.status!=null){result.byzantium=true}return result}function checkTopics(topics){if(Array.isArray(topics)){topics.forEach(function(topic){checkTopics(topic)})}else if(topics!=null){checkHash(topics)}return topics}var formatFilter={fromBlock:allowNull(checkBlockTag,undefined),toBlock:allowNull(checkBlockTag,undefined),address:allowNull(address_1.getAddress,undefined),topics:allowNull(checkTopics,undefined)};function checkFilter(filter){return check(formatFilter,filter)}var formatLog={blockNumber:allowNull(checkNumber),blockHash:allowNull(checkHash),transactionIndex:checkNumber,removed:allowNull(checkBoolean),address:address_1.getAddress,data:allowFalsish(bytes_1.hexlify,"0x"),topics:arrayOf(checkHash),transactionHash:checkHash,logIndex:checkNumber};function checkLog(log){return check(formatLog,log)}function serializeTopics(topics){return topics.map(function(topic){if(typeof topic==="string"){return topic}else if(Array.isArray(topic)){topic.forEach(function(topic){if(topic!==null&&bytes_1.hexDataLength(topic)!==32){errors.throwError("invalid topic",errors.INVALID_ARGUMENT,{argument:"topic",value:topic})}});return topic.join(",")}else if(topic===null){return""}return errors.throwError("invalid topic value",errors.INVALID_ARGUMENT,{argument:"topic",value:topic})}).join("&")}function deserializeTopics(data){return data.split(/&/g).map(function(topic){var comps=topic.split(",");if(comps.length===1){if(comps[0]===""){return null}return topic}return comps.map(function(topic){if(topic===""){return null}return topic})})}function getEventTag(eventName){if(typeof eventName==="string"){if(bytes_1.hexDataLength(eventName)===20){return"address:"+address_1.getAddress(eventName)}eventName=eventName.toLowerCase();if(bytes_1.hexDataLength(eventName)===32){return"tx:"+eventName}if(eventName.indexOf(":")===-1){return eventName}}else if(Array.isArray(eventName)){return"filter::"+serializeTopics(eventName)}else if(eventName&&typeof eventName==="object"){return"filter:"+(eventName.address||"")+":"+serializeTopics(eventName.topics||[])}throw new Error("invalid event - "+eventName)}function getTime(){return(new Date).getTime()}var BaseProvider=function(_super){__extends(BaseProvider,_super);function BaseProvider(network){var _this=_super.call(this)||this;errors.checkNew(_this,abstract_provider_1.Provider);if(network instanceof Promise){properties_1.defineReadOnly(_this,"ready",network.then(function(network){properties_1.defineReadOnly(_this,"_network",network);return network}))}else{var knownNetwork=networks_1.getNetwork(network==null?"homestead":network);if(knownNetwork){properties_1.defineReadOnly(_this,"_network",knownNetwork);properties_1.defineReadOnly(_this,"ready",Promise.resolve(_this._network))}else{errors.throwError("invalid network",errors.INVALID_ARGUMENT,{arg:"network",value:network})}}_this._lastBlockNumber=-2;_this._balances={};_this._events=[];_this._pollingInterval=4e3;_this._emitted={block:-2};_this._fastQueryDate=0;return _this}BaseProvider.prototype._doPoll=function(){var _this=this;this.getBlockNumber().then(function(blockNumber){_this._setFastBlockNumber(blockNumber);if(blockNumber===_this._lastBlockNumber){return}if(_this._emitted.block===-2){_this._emitted.block=blockNumber-1}for(var i=_this._emitted.block+1;i<=blockNumber;i++){_this.emit("block",i)}if(_this._emitted.block!==blockNumber){_this._emitted.block=blockNumber;Object.keys(_this._emitted).forEach(function(key){if(key==="block"){return}var eventBlockNumber=_this._emitted[key];if(eventBlockNumber==="pending"){return}if(blockNumber-eventBlockNumber>12){delete _this._emitted[key]}})}if(_this._lastBlockNumber===-2){_this._lastBlockNumber=blockNumber-1;
}var newBalances={};_this._events.forEach(function(event){var comps=event.tag.split(":");switch(comps[0]){case"tx":{var hash_2=comps[1];_this.getTransactionReceipt(hash_2).then(function(receipt){if(!receipt||receipt.blockNumber==null){return null}_this._emitted["t:"+hash_2]=receipt.blockNumber;_this.emit(hash_2,receipt);return null}).catch(function(error){_this.emit("error",error)});break}case"address":{var address_2=comps[1];if(_this._balances[address_2]){newBalances[address_2]=_this._balances[address_2]}_this.getBalance(address_2,"latest").then(function(balance){var lastBalance=_this._balances[address_2];if(lastBalance&&balance.eq(lastBalance)){return}_this._balances[address_2]=balance;_this.emit(address_2,balance);return null}).catch(function(error){_this.emit("error",error)});break}case"filter":{var topics=deserializeTopics(comps[2]);var filter_1={address:comps[1],fromBlock:_this._lastBlockNumber+1,toBlock:blockNumber,topics:topics};if(!filter_1.address){delete filter_1.address}_this.getLogs(filter_1).then(function(logs){if(logs.length===0){return}logs.forEach(function(log){_this._emitted["b:"+log.blockHash]=log.blockNumber;_this._emitted["t:"+log.transactionHash]=log.blockNumber;_this.emit(filter_1,log)});return null}).catch(function(error){_this.emit("error",error)});break}}});_this._lastBlockNumber=blockNumber;_this._balances=newBalances;return null}).catch(function(error){});this.doPoll()};BaseProvider.prototype.resetEventsBlock=function(blockNumber){this._lastBlockNumber=blockNumber-1;if(this.polling){this._doPoll()}};Object.defineProperty(BaseProvider.prototype,"network",{get:function(){return this._network},enumerable:true,configurable:true});BaseProvider.prototype.getNetwork=function(){return this.ready};Object.defineProperty(BaseProvider.prototype,"blockNumber",{get:function(){return this._fastBlockNumber},enumerable:true,configurable:true});Object.defineProperty(BaseProvider.prototype,"polling",{get:function(){return this._poller!=null},set:function(value){var _this=this;setTimeout(function(){if(value&&!_this._poller){_this._poller=setInterval(_this._doPoll.bind(_this),_this.pollingInterval)}else if(!value&&_this._poller){clearInterval(_this._poller);_this._poller=null}},0)},enumerable:true,configurable:true});Object.defineProperty(BaseProvider.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(value){var _this=this;if(typeof value!=="number"||value<=0||parseInt(String(value))!=value){throw new Error("invalid polling interval")}this._pollingInterval=value;if(this._poller){clearInterval(this._poller);this._poller=setInterval(function(){_this._doPoll()},this._pollingInterval)}},enumerable:true,configurable:true});BaseProvider.prototype._getFastBlockNumber=function(){var _this=this;var now=getTime();if(now-this._fastQueryDate>2*this._pollingInterval){this._fastQueryDate=now;this._fastBlockNumberPromise=this.getBlockNumber().then(function(blockNumber){if(_this._fastBlockNumber==null||blockNumber>_this._fastBlockNumber){_this._fastBlockNumber=blockNumber}return _this._fastBlockNumber})}return this._fastBlockNumberPromise};BaseProvider.prototype._setFastBlockNumber=function(blockNumber){if(this._fastBlockNumber!=null&&blockNumber<this._fastBlockNumber){return}this._fastQueryDate=getTime();if(this._fastBlockNumber==null||blockNumber>this._fastBlockNumber){this._fastBlockNumber=blockNumber;this._fastBlockNumberPromise=Promise.resolve(blockNumber)}};BaseProvider.prototype.waitForTransaction=function(transactionHash,confirmations){var _this=this;if(confirmations==null){confirmations=1}return web_1.poll(function(){return _this.getTransactionReceipt(transactionHash).then(function(receipt){if(confirmations===0){return receipt}if(receipt==null||receipt.confirmations<confirmations){return undefined}return receipt})},{onceBlock:this})};BaseProvider.prototype.getBlockNumber=function(){var _this=this;return this.ready.then(function(){return _this.perform("getBlockNumber",{}).then(function(result){var value=parseInt(result);if(value!=result){throw new Error("invalid response - getBlockNumber")}_this._setFastBlockNumber(value);return value})})};BaseProvider.prototype.getGasPrice=function(){var _this=this;return this.ready.then(function(){return _this.perform("getGasPrice",{}).then(function(result){return bignumber_1.bigNumberify(result)})})};BaseProvider.prototype.getBalance=function(addressOrName,blockTag){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({addressOrName:addressOrName,blockTag:blockTag}).then(function(_a){var addressOrName=_a.addressOrName,blockTag=_a.blockTag;return _this.resolveName(addressOrName).then(function(address){var params={address:address,blockTag:checkBlockTag(blockTag)};return _this.perform("getBalance",params).then(function(result){return bignumber_1.bigNumberify(result)})})})})};BaseProvider.prototype.getTransactionCount=function(addressOrName,blockTag){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({addressOrName:addressOrName,blockTag:blockTag}).then(function(_a){var addressOrName=_a.addressOrName,blockTag=_a.blockTag;return _this.resolveName(addressOrName).then(function(address){var params={address:address,blockTag:checkBlockTag(blockTag)};return _this.perform("getTransactionCount",params).then(function(result){return bignumber_1.bigNumberify(result).toNumber()})})})})};BaseProvider.prototype.getCode=function(addressOrName,blockTag){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({addressOrName:addressOrName,blockTag:blockTag}).then(function(_a){var addressOrName=_a.addressOrName,blockTag=_a.blockTag;return _this.resolveName(addressOrName).then(function(address){var params={address:address,blockTag:checkBlockTag(blockTag)};return _this.perform("getCode",params).then(function(result){return bytes_1.hexlify(result)})})})})};BaseProvider.prototype.getStorageAt=function(addressOrName,position,blockTag){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({addressOrName:addressOrName,position:position,blockTag:blockTag}).then(function(_a){var addressOrName=_a.addressOrName,position=_a.position,blockTag=_a.blockTag;return _this.resolveName(addressOrName).then(function(address){var params={address:address,blockTag:checkBlockTag(blockTag),position:bytes_1.hexStripZeros(bytes_1.hexlify(position))};return _this.perform("getStorageAt",params).then(function(result){return bytes_1.hexlify(result)})})})})};BaseProvider.prototype.sendTransaction=function(signedTransaction){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({signedTransaction:signedTransaction}).then(function(_a){var signedTransaction=_a.signedTransaction;var params={signedTransaction:bytes_1.hexlify(signedTransaction)};return _this.perform("sendTransaction",params).then(function(hash){return _this._wrapTransaction(transaction_1.parse(signedTransaction),hash)},function(error){error.transaction=transaction_1.parse(signedTransaction);if(error.transaction.hash){error.transactionHash=error.transaction.hash}throw error})})})};BaseProvider.prototype._wrapTransaction=function(tx,hash){var _this=this;if(hash!=null&&bytes_1.hexDataLength(hash)!==32){throw new Error("invalid response - sendTransaction")}var result=tx;if(hash!=null&&tx.hash!==hash){errors.throwError("Transaction hash mismatch from Provider.sendTransaction.",errors.UNKNOWN_ERROR,{expectedHash:tx.hash,returnedHash:hash})}result.wait=function(confirmations){if(confirmations!==0){_this._emitted["t:"+tx.hash]="pending"}return _this.waitForTransaction(tx.hash,confirmations).then(function(receipt){if(receipt==null&&confirmations===0){return null}_this._emitted["t:"+tx.hash]=receipt.blockNumber;if(receipt.status===0){errors.throwError("transaction failed",errors.CALL_EXCEPTION,{transactionHash:tx.hash,transaction:tx})}return receipt})};return result};BaseProvider.prototype.call=function(transaction,blockTag){var _this=this;var tx=properties_1.shallowCopy(transaction);return this.ready.then(function(){return properties_1.resolveProperties({blockTag:blockTag,tx:tx}).then(function(_a){var blockTag=_a.blockTag,tx=_a.tx;return _this._resolveNames(tx,["to","from"]).then(function(tx){var params={blockTag:checkBlockTag(blockTag),transaction:checkTransactionRequest(tx)};return _this.perform("call",params).then(function(result){return bytes_1.hexlify(result)})})})})};BaseProvider.prototype.estimateGas=function(transaction){var _this=this;var tx={to:transaction.to,from:transaction.from,data:transaction.data,gasPrice:transaction.gasPrice,value:transaction.value};return this.ready.then(function(){return properties_1.resolveProperties(tx).then(function(tx){return _this._resolveNames(tx,["to","from"]).then(function(tx){var params={transaction:checkTransactionRequest(tx)};return _this.perform("estimateGas",params).then(function(result){return bignumber_1.bigNumberify(result)})})})})};BaseProvider.prototype.getBlock=function(blockHashOrBlockTag,includeTransactions){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({blockHashOrBlockTag:blockHashOrBlockTag}).then(function(_a){var blockHashOrBlockTag=_a.blockHashOrBlockTag;try{var blockHash_1=bytes_1.hexlify(blockHashOrBlockTag);if(bytes_1.hexDataLength(blockHash_1)===32){return web_1.poll(function(){return _this.perform("getBlock",{blockHash:blockHash_1,includeTransactions:!!includeTransactions}).then(function(block){if(block==null){if(_this._emitted["b:"+blockHash_1]==null){return null}return undefined}return checkBlock(block,includeTransactions)})},{onceBlock:_this})}}catch(error){}try{var blockNumber_1=-128;var blockTag_1=checkBlockTag(blockHashOrBlockTag);if(bytes_1.isHexString(blockTag_1)){blockNumber_1=parseInt(blockTag_1.substring(2),16)}return web_1.poll(function(){return _this.perform("getBlock",{blockTag:blockTag_1,includeTransactions:!!includeTransactions}).then(function(block){if(block==null){if(blockNumber_1<=_this._emitted.block){return undefined}return null}return checkBlock(block,includeTransactions)})},{onceBlock:_this})}catch(error){}throw new Error("invalid block hash or block tag")})})};BaseProvider.prototype.getTransaction=function(transactionHash){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({transactionHash:transactionHash}).then(function(_a){var transactionHash=_a.transactionHash;var params={transactionHash:checkHash(transactionHash,true)};return web_1.poll(function(){return _this.perform("getTransaction",params).then(function(result){if(result==null){if(_this._emitted["t:"+transactionHash]==null){return null}return undefined}var tx=BaseProvider.checkTransactionResponse(result);if(tx.blockNumber==null){tx.confirmations=0}else if(tx.confirmations==null){return _this._getFastBlockNumber().then(function(blockNumber){var confirmations=blockNumber-tx.blockNumber+1;if(confirmations<=0){confirmations=1}tx.confirmations=confirmations;return _this._wrapTransaction(tx)})}return _this._wrapTransaction(tx)})},{onceBlock:_this})})})};BaseProvider.prototype.getTransactionReceipt=function(transactionHash){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties({transactionHash:transactionHash}).then(function(_a){var transactionHash=_a.transactionHash;var params={transactionHash:checkHash(transactionHash,true)};return web_1.poll(function(){return _this.perform("getTransactionReceipt",params).then(function(result){if(result==null){if(_this._emitted["t:"+transactionHash]==null){return null}return undefined}if(result.blockHash==null){return undefined}var receipt=checkTransactionReceipt(result);if(receipt.blockNumber==null){receipt.confirmations=0}else if(receipt.confirmations==null){return _this._getFastBlockNumber().then(function(blockNumber){var confirmations=blockNumber-receipt.blockNumber+1;if(confirmations<=0){confirmations=1}receipt.confirmations=confirmations;return receipt})}return receipt})},{onceBlock:_this})})})};BaseProvider.prototype.getLogs=function(filter){var _this=this;return this.ready.then(function(){return properties_1.resolveProperties(filter).then(function(filter){return _this._resolveNames(filter,["address"]).then(function(filter){var params={filter:checkFilter(filter)};return _this.perform("getLogs",params).then(function(result){return arrayOf(checkLog)(result)})})})})};BaseProvider.prototype.getEtherPrice=function(){var _this=this;return this.ready.then(function(){return _this.perform("getEtherPrice",{}).then(function(result){return result})})};BaseProvider.prototype._resolveNames=function(object,keys){var promises=[];var result=properties_1.shallowCopy(object);keys.forEach(function(key){if(result[key]==null){return}promises.push(this.resolveName(result[key]).then(function(address){result[key]=address;return}))},this);return Promise.all(promises).then(function(){return result})};BaseProvider.prototype._getResolver=function(name){var _this=this;return this.getNetwork().then(function(network){if(!network.ensAddress){errors.throwError("network does support ENS",errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:network.name})}var data="0x0178b8bf"+hash_1.namehash(name).substring(2);var transaction={to:network.ensAddress,data:data};return _this.call(transaction).then(function(data){if(bytes_1.hexDataLength(data)!==32){return null}return address_1.getAddress(bytes_1.hexDataSlice(data,12))})})};BaseProvider.prototype.resolveName=function(name){var _this=this;if(name instanceof Promise){return name.then(function(addressOrName){return _this.resolveName(addressOrName)})}try{return Promise.resolve(address_1.getAddress(name))}catch(error){}var self=this;var nodeHash=hash_1.namehash(name);return this._getResolver(name).then(function(resolverAddress){var data="0x3b3b57de"+nodeHash.substring(2);var transaction={to:resolverAddress,data:data};return self.call(transaction)}).then(function(data){if(bytes_1.hexDataLength(data)!==32){return null}var address=address_1.getAddress(bytes_1.hexDataSlice(data,12));if(address==="0x0000000000000000000000000000000000000000"){return null}return address})};BaseProvider.prototype.lookupAddress=function(address){var _this=this;if(address instanceof Promise){return address.then(function(address){return _this.lookupAddress(address)})}address=address_1.getAddress(address);var name=address.substring(2)+".addr.reverse";var nodehash=hash_1.namehash(name);var self=this;return this._getResolver(name).then(function(resolverAddress){if(!resolverAddress){return null}var data="0x691f3431"+nodehash.substring(2);var transaction={to:resolverAddress,data:data};return self.call(transaction)}).then(function(data){data=data.substring(2);if(data.length<64){return null}data=data.substring(64);if(data.length<64){return null}var length=bignumber_1.bigNumberify("0x"+data.substring(0,64)).toNumber();data=data.substring(64);if(2*length>data.length){return null}var name=utf8_1.toUtf8String("0x"+data.substring(0,2*length));return self.resolveName(name).then(function(addr){if(addr!=address){return null}return name})})};BaseProvider.checkTransactionResponse=function(transaction){return checkTransactionResponse(transaction)};BaseProvider.prototype.doPoll=function(){};BaseProvider.prototype.perform=function(method,params){errors.throwError(method+" not implemented",errors.NOT_IMPLEMENTED,{operation:method});return null};BaseProvider.prototype._startPending=function(){console.log("WARNING: this provider does not support pending events")};BaseProvider.prototype._stopPending=function(){};BaseProvider.prototype._addEventListener=function(eventName,listener,once){this._events.push({tag:getEventTag(eventName),listener:listener,once:once});if(eventName==="pending"){this._startPending()}this.polling=true};BaseProvider.prototype.on=function(eventName,listener){this._addEventListener(eventName,listener,false);return this};BaseProvider.prototype.once=function(eventName,listener){this._addEventListener(eventName,listener,true);return this};BaseProvider.prototype.addEventListener=function(eventName,listener){return this.on(eventName,listener)};BaseProvider.prototype.emit=function(eventName){var _this=this;var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var result=false;var eventTag=getEventTag(eventName);this._events=this._events.filter(function(event){if(event.tag!==eventTag){return true}setTimeout(function(){event.listener.apply(_this,args)},0);result=true;return!event.once});if(this.listenerCount()===0){this.polling=false}return result};BaseProvider.prototype.listenerCount=function(eventName){if(!eventName){return this._events.length}var eventTag=getEventTag(eventName);return this._events.filter(function(event){return event.tag===eventTag}).length};BaseProvider.prototype.listeners=function(eventName){var eventTag=getEventTag(eventName);return this._events.filter(function(event){return event.tag===eventTag}).map(function(event){return event.listener})};BaseProvider.prototype.removeAllListeners=function(eventName){var eventTag=getEventTag(eventName);this._events=this._events.filter(function(event){return event.tag!==eventTag});if(eventName==="pending"){this._stopPending()}if(this._events.length===0){this.polling=false}return this};BaseProvider.prototype.removeListener=function(eventName,listener){var found=false;var eventTag=getEventTag(eventName);this._events=this._events.filter(function(event){if(event.tag!==eventTag){return true}if(found){return true}found=false;return false});if(eventName==="pending"&&this.listenerCount("pending")===0){this._stopPending()}if(this.listenerCount()===0){this.polling=false}return this};return BaseProvider}(abstract_provider_1.Provider);exports.BaseProvider=BaseProvider;properties_1.defineReadOnly(abstract_provider_1.Provider,"inherits",properties_1.inheritable(abstract_provider_1.Provider))},{"../errors":5,"../utils/address":59,"../utils/bignumber":61,"../utils/bytes":62,"../utils/hash":63,"../utils/networks":70,"../utils/properties":72,"../utils/rlp":74,"../utils/transaction":81,"../utils/utf8":83,"../utils/web":84,"./abstract-provider":49}],51:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var base_provider_1=require("./base-provider");var bytes_1=require("../utils/bytes");var properties_1=require("../utils/properties");var web_1=require("../utils/web");var errors=__importStar(require("../errors"));function getTransactionString(transaction){var result=[];for(var key in transaction){if(transaction[key]==null){continue}var value=bytes_1.hexlify(transaction[key]);if({gasLimit:true,gasPrice:true,nonce:true,value:true}[key]){value=bytes_1.hexStripZeros(value)}result.push(key+"="+value)}return result.join("&")}function getResult(result){if(result.status==0&&(result.message==="No records found"||result.message==="No transactions found")){return result.result}if(result.status!=1||result.message!="OK"){var error=new Error("invalid response");error.result=JSON.stringify(result);throw error}return result.result}function getJsonResult(result){if(result.jsonrpc!="2.0"){var error=new Error("invalid response");error.result=JSON.stringify(result);throw error}if(result.error){var error=new Error(result.error.message||"unknown error");if(result.error.code){error.code=result.error.code}if(result.error.data){error.data=result.error.data}throw error}return result.result}function checkLogTag(blockTag){if(blockTag==="pending"){throw new Error("pending not supported")}if(blockTag==="latest"){return blockTag}return parseInt(blockTag.substring(2),16)}var EtherscanProvider=function(_super){__extends(EtherscanProvider,_super);function EtherscanProvider(network,apiKey){var _this=_super.call(this,network)||this;errors.checkNew(_this,EtherscanProvider);var name="invalid";if(_this.network){name=_this.network.name}var baseUrl=null;switch(name){case"homestead":baseUrl="https://api.etherscan.io";break;case"ropsten":baseUrl="https://api-ropsten.etherscan.io";break;case"rinkeby":baseUrl="https://api-rinkeby.etherscan.io";break;case"kovan":baseUrl="https://api-kovan.etherscan.io";break;default:throw new Error("unsupported network")}properties_1.defineReadOnly(_this,"baseUrl",baseUrl);properties_1.defineReadOnly(_this,"apiKey",apiKey);return _this}EtherscanProvider.prototype.perform=function(method,params){var _this=this;var url=this.baseUrl;var apiKey="";if(this.apiKey){apiKey+="&apikey="+this.apiKey}var get=function(url,procFunc){return web_1.fetchJson(url,null,procFunc||getJsonResult).then(function(result){_this.emit("debug",{action:"perform",request:url,response:result,provider:_this});return result})};switch(method){case"getBlockNumber":url+="/api?module=proxy&action=eth_blockNumber"+apiKey;return get(url);case"getGasPrice":url+="/api?module=proxy&action=eth_gasPrice"+apiKey;return get(url);case"getBalance":url+="/api?module=account&action=balance&address="+params.address;url+="&tag="+params.blockTag+apiKey;return get(url,getResult);case"getTransactionCount":url+="/api?module=proxy&action=eth_getTransactionCount&address="+params.address;url+="&tag="+params.blockTag+apiKey;return get(url);case"getCode":url+="/api?module=proxy&action=eth_getCode&address="+params.address;url+="&tag="+params.blockTag+apiKey;return get(url,getJsonResult);case"getStorageAt":url+="/api?module=proxy&action=eth_getStorageAt&address="+params.address;url+="&position="+params.position;url+="&tag="+params.blockTag+apiKey;return get(url,getJsonResult);case"sendTransaction":url+="/api?module=proxy&action=eth_sendRawTransaction&hex="+params.signedTransaction;url+=apiKey;return get(url).catch(function(error){if(error.responseText){if(error.responseText.toLowerCase().indexOf("insufficient funds")>=0){errors.throwError("insufficient funds",errors.INSUFFICIENT_FUNDS,{})}if(error.responseText.indexOf("same hash was already imported")>=0){errors.throwError("nonce has already been used",errors.NONCE_EXPIRED,{})}if(error.responseText.indexOf("another transaction with same nonce")>=0){errors.throwError("replacement fee too low",errors.REPLACEMENT_UNDERPRICED,{})}}throw error});case"getBlock":if(params.blockTag){url+="/api?module=proxy&action=eth_getBlockByNumber&tag="+params.blockTag;if(params.includeTransactions){url+="&boolean=true"}else{url+="&boolean=false"}url+=apiKey;return get(url)}throw new Error("getBlock by blockHash not implmeneted");case"getTransaction":url+="/api?module=proxy&action=eth_getTransactionByHash&txhash="+params.transactionHash;url+=apiKey;return get(url);case"getTransactionReceipt":url+="/api?module=proxy&action=eth_getTransactionReceipt&txhash="+params.transactionHash;url+=apiKey;return get(url);case"call":{var transaction=getTransactionString(params.transaction);if(transaction){transaction="&"+transaction}url+="/api?module=proxy&action=eth_call"+transaction;if(params.blockTag!=="latest"){throw new Error("EtherscanProvider does not support blockTag for call")}url+=apiKey;return get(url)}case"estimateGas":{var transaction=getTransactionString(params.transaction);if(transaction){transaction="&"+transaction}url+="/api?module=proxy&action=eth_estimateGas&"+transaction;url+=apiKey;return get(url)}case"getLogs":url+="/api?module=logs&action=getLogs";try{if(params.filter.fromBlock){url+="&fromBlock="+checkLogTag(params.filter.fromBlock)}if(params.filter.toBlock){url+="&toBlock="+checkLogTag(params.filter.toBlock)}if(params.filter.address){url+="&address="+params.filter.address}if(params.filter.topics&&params.filter.topics.length>0){if(params.filter.topics.length>1){throw new Error("unsupported topic format")}var topic0=params.filter.topics[0];if(typeof topic0!=="string"||topic0.length!==66){throw new Error("unsupported topic0 format")}url+="&topic0="+topic0}}catch(error){return Promise.reject(error)}url+=apiKey;var self=this;return get(url,getResult).then(function(logs){var txs={};var seq=Promise.resolve();logs.forEach(function(log){seq=seq.then(function(){if(log.blockHash!=null){return null}log.blockHash=txs[log.transactionHash];if(log.blockHash==null){return self.getTransaction(log.transactionHash).then(function(tx){txs[log.transactionHash]=tx.blockHash;log.blockHash=tx.blockHash;return null})}return null})});return seq.then(function(){return logs})});case"getEtherPrice":if(this.network.name!=="homestead"){return Promise.resolve(0)}url+="/api?module=stats&action=ethprice";url+=apiKey;return get(url,getResult).then(function(result){return parseFloat(result.ethusd)});default:break}return _super.prototype.perform.call(this,method,params)};EtherscanProvider.prototype.getHistory=function(addressOrName,startBlock,endBlock){var _this=this;var url=this.baseUrl;var apiKey="";if(this.apiKey){apiKey+="&apikey="+this.apiKey}if(startBlock==null){startBlock=0}if(endBlock==null){endBlock=99999999}return this.resolveName(addressOrName).then(function(address){url+="/api?module=account&action=txlist&address="+address;url+="&startblock="+startBlock;url+="&endblock="+endBlock;url+="&sort=asc"+apiKey;return web_1.fetchJson(url,null,getResult).then(function(result){_this.emit("debug",{action:"getHistory",request:url,response:result,provider:_this});var output=[];result.forEach(function(tx){["contractAddress","to"].forEach(function(key){if(tx[key]==""){delete tx[key]}});if(tx.creates==null&&tx.contractAddress!=null){tx.creates=tx.contractAddress}var item=base_provider_1.BaseProvider.checkTransactionResponse(tx);if(tx.timeStamp){item.timestamp=parseInt(tx.timeStamp)}output.push(item)});return output})})};return EtherscanProvider}(base_provider_1.BaseProvider);exports.EtherscanProvider=EtherscanProvider},{"../errors":5,"../utils/bytes":62,"../utils/properties":72,"../utils/web":84,"./base-provider":50}],52:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var base_provider_1=require("./base-provider");var errors=__importStar(require("../errors"));function checkNetworks(networks){var result=true;var check=null;networks.forEach(function(network){if(network==null){result=false;return}if(check==null){check=network;return}if(check.name===network.name&&check.chainId===network.chainId&&(check.ensAddress===network.ensAddress||check.ensAddress==null&&network.ensAddress==null)){return}errors.throwError("provider mismatch",errors.INVALID_ARGUMENT,{arg:"networks",value:networks})});return result}var FallbackProvider=function(_super){__extends(FallbackProvider,_super);function FallbackProvider(providers){var _this=this;if(providers.length===0){throw new Error("no providers")}var ready=checkNetworks(providers.map(function(p){return p.network}));if(ready){_this=_super.call(this,providers[0].network)||this}else{var ready_1=Promise.all(providers.map(function(p){return p.getNetwork()})).then(function(networks){if(!checkNetworks(networks)){errors.throwError("getNetwork returned null",errors.UNKNOWN_ERROR,{})}return networks[0]});_this=_super.call(this,ready_1)||this}errors.checkNew(_this,FallbackProvider);_this._providers=providers.slice(0);return _this}Object.defineProperty(FallbackProvider.prototype,"providers",{get:function(){return this._providers.slice(0)},enumerable:true,configurable:true});FallbackProvider.prototype.perform=function(method,params){var providers=this.providers;return new Promise(function(resolve,reject){var firstError=null;function next(){if(!providers.length){reject(firstError);return}var provider=providers.shift();provider.perform(method,params).then(function(result){return resolve(result)}).catch(function(error){if(!firstError){firstError=error}setTimeout(next,0)})}next()})};return FallbackProvider}(base_provider_1.BaseProvider);exports.FallbackProvider=FallbackProvider},{"../errors":5,"./base-provider":50}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var abstract_provider_1=require("./abstract-provider");exports.Provider=abstract_provider_1.Provider;var base_provider_1=require("./base-provider");exports.BaseProvider=base_provider_1.BaseProvider;var etherscan_provider_1=require("./etherscan-provider");exports.EtherscanProvider=etherscan_provider_1.EtherscanProvider;var fallback_provider_1=require("./fallback-provider");exports.FallbackProvider=fallback_provider_1.FallbackProvider;var ipc_provider_1=require("./ipc-provider");exports.IpcProvider=ipc_provider_1.IpcProvider;var infura_provider_1=require("./infura-provider");exports.InfuraProvider=infura_provider_1.InfuraProvider;var json_rpc_provider_1=require("./json-rpc-provider");exports.JsonRpcProvider=json_rpc_provider_1.JsonRpcProvider;exports.JsonRpcSigner=json_rpc_provider_1.JsonRpcSigner;var web3_provider_1=require("./web3-provider");exports.Web3Provider=web3_provider_1.Web3Provider},{"./abstract-provider":49,"./base-provider":50,"./etherscan-provider":51,"./fallback-provider":52,"./infura-provider":54,"./ipc-provider":55,"./json-rpc-provider":56,"./web3-provider":57}],54:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var json_rpc_provider_1=require("./json-rpc-provider");var networks_1=require("../utils/networks");var properties_1=require("../utils/properties");var errors=__importStar(require("../errors"));var InfuraProvider=function(_super){__extends(InfuraProvider,_super);function InfuraProvider(network,apiAccessToken){var _this=this;network=networks_1.getNetwork(network==null?"homestead":network);var host=null;switch(network.name){case"homestead":host="mainnet.infura.io";break;case"ropsten":host="ropsten.infura.io";break;case"rinkeby":host="rinkeby.infura.io";break;case"kovan":host="kovan.infura.io";break;default:throw new Error("unsupported network")}_this=_super.call(this,"https://"+host+"/"+(apiAccessToken||""),network)||this;errors.checkNew(_this,InfuraProvider);properties_1.defineReadOnly(_this,"apiAccessToken",apiAccessToken||null);return _this}InfuraProvider.prototype._startPending=function(){console.log("WARNING: INFURA does not support pending filters")};InfuraProvider.prototype.getSigner=function(address){errors.throwError("INFURA does not support signing",errors.UNSUPPORTED_OPERATION,{operation:"getSigner"});return null};InfuraProvider.prototype.listAccounts=function(){return Promise.resolve([]);
};return InfuraProvider}(json_rpc_provider_1.JsonRpcProvider);exports.InfuraProvider=InfuraProvider},{"../errors":5,"../utils/networks":70,"../utils/properties":72,"./json-rpc-provider":56}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],56:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var base_provider_1=require("./base-provider");var abstract_signer_1=require("../abstract-signer");var errors=__importStar(require("../errors"));var address_1=require("../utils/address");var bytes_1=require("../utils/bytes");var networks_1=require("../utils/networks");var properties_1=require("../utils/properties");var transaction_1=require("../utils/transaction");var utf8_1=require("../utils/utf8");var web_1=require("../utils/web");function timer(timeout){return new Promise(function(resolve){setTimeout(function(){resolve()},timeout)})}function getResult(payload){if(payload.error){var error=new Error(payload.error.message);error.code=payload.error.code;error.data=payload.error.data;throw error}return payload.result}function getLowerCase(value){if(value){return value.toLowerCase()}return value}var _constructorGuard={};var JsonRpcSigner=function(_super){__extends(JsonRpcSigner,_super);function JsonRpcSigner(constructorGuard,provider,addressOrIndex){var _this=_super.call(this)||this;errors.checkNew(_this,JsonRpcSigner);if(constructorGuard!==_constructorGuard){throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner")}properties_1.defineReadOnly(_this,"provider",provider);if(addressOrIndex){if(typeof addressOrIndex==="string"){properties_1.defineReadOnly(_this,"_address",address_1.getAddress(addressOrIndex))}else if(typeof addressOrIndex==="number"){properties_1.defineReadOnly(_this,"_index",addressOrIndex)}else{errors.throwError("invalid address or index",errors.INVALID_ARGUMENT,{argument:"addressOrIndex",value:addressOrIndex})}}else{properties_1.defineReadOnly(_this,"_index",0)}return _this}JsonRpcSigner.prototype.getAddress=function(){var _this=this;if(this._address){return Promise.resolve(this._address)}return this.provider.send("eth_accounts",[]).then(function(accounts){if(accounts.length<=_this._index){errors.throwError("unknown account #"+_this._index,errors.UNSUPPORTED_OPERATION,{operation:"getAddress"})}_this._address=address_1.getAddress(accounts[_this._index]);return _this._address})};JsonRpcSigner.prototype.getBalance=function(blockTag){return this.provider.getBalance(this.getAddress(),blockTag)};JsonRpcSigner.prototype.getTransactionCount=function(blockTag){return this.provider.getTransactionCount(this.getAddress(),blockTag)};JsonRpcSigner.prototype.sendTransaction=function(transaction){var _this=this;var from=null;var getAddress=this.getAddress().then(function(address){if(address){from=address.toLowerCase()}return from});return transaction_1.populateTransaction(transaction,this.provider,getAddress).then(function(tx){var hexTx=JsonRpcProvider.hexlifyTransaction(tx);hexTx.from=from;return _this.provider.send("eth_sendTransaction",[hexTx]).then(function(hash){return web_1.poll(function(){return _this.provider.getTransaction(hash).then(function(tx){if(tx===null){return undefined}return _this.provider._wrapTransaction(tx,hash)})},{onceBlock:_this.provider}).catch(function(error){error.transactionHash=hash;throw error})},function(error){if(error.responseText){if(error.responseText.indexOf("insufficient funds")>=0){errors.throwError("insufficient funds",errors.INSUFFICIENT_FUNDS,{transaction:tx})}if(error.responseText.indexOf("nonce too low")>=0){errors.throwError("nonce has already been used",errors.NONCE_EXPIRED,{transaction:tx})}if(error.responseText.indexOf("replacement transaction underpriced")>=0){errors.throwError("replacement fee too low",errors.REPLACEMENT_UNDERPRICED,{transaction:tx})}}throw error})})};JsonRpcSigner.prototype.signMessage=function(message){var _this=this;var data=typeof message==="string"?utf8_1.toUtf8Bytes(message):message;return this.getAddress().then(function(address){return _this.provider.send("eth_sign",[address.toLowerCase(),bytes_1.hexlify(data)])})};JsonRpcSigner.prototype.unlock=function(password){var provider=this.provider;return this.getAddress().then(function(address){return provider.send("personal_unlockAccount",[address.toLowerCase(),password,null])})};return JsonRpcSigner}(abstract_signer_1.Signer);exports.JsonRpcSigner=JsonRpcSigner;var allowedTransactionKeys={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true};var JsonRpcProvider=function(_super){__extends(JsonRpcProvider,_super);function JsonRpcProvider(url,network){var _this=this;if(typeof url==="string"){if(network===null&&networks_1.getNetwork(url)){network=url;url=null}}if(network){_this=_super.call(this,network)||this}else{var ready=new Promise(function(resolve,reject){setTimeout(function(){_this.send("net_version",[]).then(function(result){return resolve(networks_1.getNetwork(parseInt(result)))}).catch(function(error){reject(error)})})});_this=_super.call(this,ready)||this}errors.checkNew(_this,JsonRpcProvider);if(!url){url="http://localhost:8545"}if(typeof url==="string"){_this.connection={url:url}}else{_this.connection=url}return _this}JsonRpcProvider.prototype.getSigner=function(addressOrIndex){return new JsonRpcSigner(_constructorGuard,this,addressOrIndex)};JsonRpcProvider.prototype.listAccounts=function(){return this.send("eth_accounts",[]).then(function(accounts){return accounts.map(function(a){return address_1.getAddress(a)})})};JsonRpcProvider.prototype.send=function(method,params){var _this=this;var request={method:method,params:params,id:42,jsonrpc:"2.0"};return web_1.fetchJson(this.connection,JSON.stringify(request),getResult).then(function(result){_this.emit("debug",{action:"send",request:request,response:result,provider:_this});return result})};JsonRpcProvider.prototype.perform=function(method,params){switch(method){case"getBlockNumber":return this.send("eth_blockNumber",[]);case"getGasPrice":return this.send("eth_gasPrice",[]);case"getBalance":return this.send("eth_getBalance",[getLowerCase(params.address),params.blockTag]);case"getTransactionCount":return this.send("eth_getTransactionCount",[getLowerCase(params.address),params.blockTag]);case"getCode":return this.send("eth_getCode",[getLowerCase(params.address),params.blockTag]);case"getStorageAt":return this.send("eth_getStorageAt",[getLowerCase(params.address),params.position,params.blockTag]);case"sendTransaction":return this.send("eth_sendRawTransaction",[params.signedTransaction]).catch(function(error){if(error.responseText){if(error.responseText.indexOf("insufficient funds")>0){errors.throwError("insufficient funds",errors.INSUFFICIENT_FUNDS,{})}if(error.responseText.indexOf("nonce too low")>0){errors.throwError("nonce has already been used",errors.NONCE_EXPIRED,{})}if(error.responseText.indexOf("replacement transaction underpriced")>0){errors.throwError("replacement fee too low",errors.REPLACEMENT_UNDERPRICED,{})}}throw error});case"getBlock":if(params.blockTag){return this.send("eth_getBlockByNumber",[params.blockTag,!!params.includeTransactions])}else if(params.blockHash){return this.send("eth_getBlockByHash",[params.blockHash,!!params.includeTransactions])}return Promise.reject(new Error("invalid block tag or block hash"));case"getTransaction":return this.send("eth_getTransactionByHash",[params.transactionHash]);case"getTransactionReceipt":return this.send("eth_getTransactionReceipt",[params.transactionHash]);case"call":return this.send("eth_call",[JsonRpcProvider.hexlifyTransaction(params.transaction,{from:true}),params.blockTag]);case"estimateGas":return this.send("eth_estimateGas",[JsonRpcProvider.hexlifyTransaction(params.transaction,{from:true})]);case"getLogs":if(params.filter&&params.filter.address!=null){params.filter.address=getLowerCase(params.filter.address)}return this.send("eth_getLogs",[params.filter]);default:break}errors.throwError(method+" not implemented",errors.NOT_IMPLEMENTED,{operation:method});return null};JsonRpcProvider.prototype._startPending=function(){if(this._pendingFilter!=null){return}var self=this;var pendingFilter=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=pendingFilter;pendingFilter.then(function(filterId){function poll(){self.send("eth_getFilterChanges",[filterId]).then(function(hashes){if(self._pendingFilter!=pendingFilter){return null}var seq=Promise.resolve();hashes.forEach(function(hash){self._emitted["t:"+hash.toLowerCase()]="pending";seq=seq.then(function(){return self.getTransaction(hash).then(function(tx){self.emit("pending",tx);return null})})});return seq.then(function(){return timer(1e3)})}).then(function(){if(self._pendingFilter!=pendingFilter){self.send("eth_uninstallFilter",[filterId]);return}setTimeout(function(){poll()},0);return null}).catch(function(error){})}poll();return filterId}).catch(function(error){})};JsonRpcProvider.prototype._stopPending=function(){this._pendingFilter=null};JsonRpcProvider.hexlifyTransaction=function(transaction,allowExtra){var allowed=properties_1.shallowCopy(allowedTransactionKeys);if(allowExtra){for(var key in allowExtra){if(allowExtra[key]){allowed[key]=true}}}properties_1.checkProperties(transaction,allowed);var result={};["gasLimit","gasPrice","nonce","value"].forEach(function(key){if(transaction[key]==null){return}var value=bytes_1.hexStripZeros(bytes_1.hexlify(transaction[key]));if(key==="gasLimit"){key="gas"}result[key]=value});["from","to","data"].forEach(function(key){if(transaction[key]==null){return}result[key]=bytes_1.hexlify(transaction[key])});return result};return JsonRpcProvider}(base_provider_1.BaseProvider);exports.JsonRpcProvider=JsonRpcProvider},{"../abstract-signer":2,"../errors":5,"../utils/address":59,"../utils/bytes":62,"../utils/networks":70,"../utils/properties":72,"../utils/transaction":81,"../utils/utf8":83,"../utils/web":84,"./base-provider":50}],57:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var json_rpc_provider_1=require("./json-rpc-provider");var properties_1=require("../utils/properties");var errors=__importStar(require("../errors"));var Web3Provider=function(_super){__extends(Web3Provider,_super);function Web3Provider(web3Provider,network){var _this=_super.call(this,web3Provider.host||web3Provider.path||"",network)||this;errors.checkNew(_this,Web3Provider);if(web3Provider){if(web3Provider.sendAsync){_this._sendAsync=web3Provider.sendAsync.bind(web3Provider)}else if(web3Provider.send){_this._sendAsync=web3Provider.send.bind(web3Provider)}}if(!web3Provider||!_this._sendAsync){errors.throwError("invalid web3Provider",errors.INVALID_ARGUMENT,{arg:"web3Provider",value:web3Provider})}properties_1.defineReadOnly(_this,"_web3Provider",web3Provider);return _this}Web3Provider.prototype.send=function(method,params){var _this=this;if(method=="eth_sign"&&this._web3Provider.isMetaMask){method="personal_sign";params=[params[1],params[0]]}return new Promise(function(resolve,reject){var request={method:method,params:params,id:42,jsonrpc:"2.0"};_this._sendAsync(request,function(error,result){if(error){reject(error);return}if(result.error){var error=new Error(result.error.message);error.code=result.error.code;error.data=result.error.data;reject(error);return}resolve(result.result)})})};return Web3Provider}(json_rpc_provider_1.JsonRpcProvider);exports.Web3Provider=Web3Provider},{"../errors":5,"../utils/properties":72,"./json-rpc-provider":56}],58:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var constants_1=require("../constants");var errors=__importStar(require("../errors"));var address_1=require("./address");var bignumber_1=require("./bignumber");var bytes_1=require("./bytes");var utf8_1=require("./utf8");var properties_1=require("./properties");var paramTypeBytes=new RegExp(/^bytes([0-9]*)$/);var paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);var paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);exports.defaultCoerceFunc=function(type,value){var match=type.match(paramTypeNumber);if(match&&parseInt(match[2])<=48){return value.toNumber()}return value};var regexParen=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var regexIdentifier=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$");function verifyType(type){if(type.match(/^uint($|[^1-9])/)){type="uint256"+type.substring(4)}else if(type.match(/^int($|[^1-9])/)){type="int256"+type.substring(3)}return type}function parseParam(param,allowIndexed){function throwError(i){throw new Error('unexpected character "'+param[i]+'" at position '+i+' in "'+param+'"')}var parent={type:"",name:"",state:{allowType:true}};var node=parent;for(var i=0;i<param.length;i++){var c=param[i];switch(c){case"(":if(!node.state.allowParams){throwError(i)}node.state.allowType=false;node.type=verifyType(node.type);node.components=[{type:"",name:"",parent:node,state:{allowType:true}}];node=node.components[0];break;case")":delete node.state;if(allowIndexed&&node.name==="indexed"){node.indexed=true;node.name=""}node.type=verifyType(node.type);var child=node;node=node.parent;if(!node){throwError(i)}delete child.parent;node.state.allowParams=false;node.state.allowName=true;node.state.allowArray=true;break;case",":delete node.state;if(allowIndexed&&node.name==="indexed"){node.indexed=true;node.name=""}node.type=verifyType(node.type);var sibling={type:"",name:"",parent:node.parent,state:{allowType:true}};node.parent.components.push(sibling);delete node.parent;node=sibling;break;case" ":if(node.state.allowType){if(node.type!==""){node.type=verifyType(node.type);delete node.state.allowType;node.state.allowName=true;node.state.allowParams=true}}if(node.state.allowName){if(node.name!==""){if(allowIndexed&&node.name==="indexed"){node.indexed=true;node.name=""}else{node.state.allowName=false}}}break;case"[":if(!node.state.allowArray){throwError(i)}node.type+=c;node.state.allowArray=false;node.state.allowName=false;node.state.readArray=true;break;case"]":if(!node.state.readArray){throwError(i)}node.type+=c;node.state.readArray=false;node.state.allowArray=true;node.state.allowName=true;break;default:if(node.state.allowType){node.type+=c;node.state.allowParams=true;node.state.allowArray=true}else if(node.state.allowName){node.name+=c;delete node.state.allowArray}else if(node.state.readArray){node.type+=c}else{throwError(i)}}}if(node.parent){throw new Error("unexpected eof")}delete parent.state;if(allowIndexed&&node.name==="indexed"){node.indexed=true;node.name=""}parent.type=verifyType(parent.type);return parent}function parseSignatureEvent(fragment){var abi={anonymous:false,inputs:[],name:"",type:"event"};var match=fragment.match(regexParen);if(!match){throw new Error("invalid event: "+fragment)}abi.name=match[1].trim();splitNesting(match[2]).forEach(function(param){param=parseParam(param,true);param.indexed=!!param.indexed;abi.inputs.push(param)});match[3].split(" ").forEach(function(modifier){switch(modifier){case"anonymous":abi.anonymous=true;break;case"":break;default:console.log("unknown modifier: "+modifier)}});if(abi.name&&!abi.name.match(regexIdentifier)){throw new Error('invalid identifier: "'+abi.name+'"')}return abi}function parseSignatureFunction(fragment){var abi={constant:false,gas:null,inputs:[],name:"",outputs:[],payable:false,stateMutability:null,type:"function"};var comps=fragment.split("@");if(comps.length!==1){if(comps.length>2){throw new Error("invalid signature")}if(!comps[1].match(/^[0-9]+$/)){throw new Error("invalid signature gas")}abi.gas=bignumber_1.bigNumberify(comps[1]);fragment=comps[0]}comps=fragment.split(" returns ");var left=comps[0].match(regexParen);if(!left){throw new Error("invalid signature")}abi.name=left[1].trim();if(!abi.name.match(regexIdentifier)){throw new Error('invalid identifier: "'+left[1]+'"')}splitNesting(left[2]).forEach(function(param){abi.inputs.push(parseParam(param))});left[3].split(" ").forEach(function(modifier){switch(modifier){case"constant":abi.constant=true;break;case"payable":abi.payable=true;abi.stateMutability="payable";break;case"pure":abi.constant=true;abi.stateMutability="pure";break;case"view":abi.constant=true;abi.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+modifier)}});if(comps.length>1){var right=comps[1].match(regexParen);if(right[1].trim()!=""||right[3].trim()!=""){throw new Error("unexpected tokens")}splitNesting(right[2]).forEach(function(param){abi.outputs.push(parseParam(param))})}if(abi.name==="constructor"){abi.type="constructor";if(abi.outputs.length){throw new Error("constructor may not have outputs")}delete abi.name;delete abi.outputs}return abi}function parseParamType(type){return parseParam(type,true)}exports.parseParamType=parseParamType;function formatParamType(paramType){return getParamCoder(exports.defaultCoerceFunc,paramType).type}exports.formatParamType=formatParamType;function formatSignature(fragment){return fragment.name+"("+fragment.inputs.map(function(i){return formatParamType(i)}).join(",")+")"}exports.formatSignature=formatSignature;function parseSignature(fragment){if(typeof fragment==="string"){fragment=fragment.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ");fragment=fragment.trim();if(fragment.substring(0,6)==="event "){return parseSignatureEvent(fragment.substring(6).trim())}else{if(fragment.substring(0,9)==="function "){fragment=fragment.substring(9)}return parseSignatureFunction(fragment.trim())}}throw new Error("unknown signature")}exports.parseSignature=parseSignature;var Coder=function(){function Coder(coerceFunc,name,type,localName,dynamic){this.coerceFunc=coerceFunc;this.name=name;this.type=type;this.localName=localName;this.dynamic=dynamic}return Coder}();var CoderAnonymous=function(_super){__extends(CoderAnonymous,_super);function CoderAnonymous(coder){var _this=_super.call(this,coder.coerceFunc,coder.name,coder.type,undefined,coder.dynamic)||this;properties_1.defineReadOnly(_this,"coder",coder);return _this}CoderAnonymous.prototype.encode=function(value){return this.coder.encode(value)};CoderAnonymous.prototype.decode=function(data,offset){return this.coder.decode(data,offset)};return CoderAnonymous}(Coder);var CoderNull=function(_super){__extends(CoderNull,_super);function CoderNull(coerceFunc,localName){return _super.call(this,coerceFunc,"null","",localName,false)||this}CoderNull.prototype.encode=function(value){return bytes_1.arrayify([])};CoderNull.prototype.decode=function(data,offset){if(offset>data.length){throw new Error("invalid null")}return{consumed:0,value:this.coerceFunc("null",undefined)}};return CoderNull}(Coder);var CoderNumber=function(_super){__extends(CoderNumber,_super);function CoderNumber(coerceFunc,size,signed,localName){var _this=this;var name=(signed?"int":"uint")+size*8;_this=_super.call(this,coerceFunc,name,name,localName,false)||this;_this.size=size;_this.signed=signed;return _this}CoderNumber.prototype.encode=function(value){try{var v=bignumber_1.bigNumberify(value);if(this.signed){var bounds=constants_1.MaxUint256.maskn(this.size*8-1);if(v.gt(bounds)){throw new Error("out-of-bounds")}bounds=bounds.add(constants_1.One).mul(constants_1.NegativeOne);if(v.lt(bounds)){throw new Error("out-of-bounds")}}else if(v.lt(constants_1.Zero)||v.gt(constants_1.MaxUint256.maskn(this.size*8))){throw new Error("out-of-bounds")}v=v.toTwos(this.size*8).maskn(this.size*8);if(this.signed){v=v.fromTwos(this.size*8).toTwos(256)}return bytes_1.padZeros(bytes_1.arrayify(v),32)}catch(error){errors.throwError("invalid number value",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:value})}return null};CoderNumber.prototype.decode=function(data,offset){if(data.length<offset+32){errors.throwError("insufficient data for "+this.name+" type",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:bytes_1.hexlify(data.slice(offset,offset+32))})}var junkLength=32-this.size;var value=bignumber_1.bigNumberify(data.slice(offset+junkLength,offset+32));if(this.signed){value=value.fromTwos(this.size*8)}else{value=value.maskn(this.size*8)}return{consumed:32,value:this.coerceFunc(this.name,value)}};return CoderNumber}(Coder);var uint256Coder=new CoderNumber(function(type,value){return value},32,false,"none");var CoderBoolean=function(_super){__extends(CoderBoolean,_super);function CoderBoolean(coerceFunc,localName){return _super.call(this,coerceFunc,"bool","bool",localName,false)||this}CoderBoolean.prototype.encode=function(value){return uint256Coder.encode(!!value?1:0)};CoderBoolean.prototype.decode=function(data,offset){try{var result=uint256Coder.decode(data,offset)}catch(error){if(error.reason==="insufficient data for uint256 type"){errors.throwError("insufficient data for boolean type",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"boolean",value:error.value})}throw error}return{consumed:result.consumed,value:this.coerceFunc("bool",!result.value.isZero())}};return CoderBoolean}(Coder);var CoderFixedBytes=function(_super){__extends(CoderFixedBytes,_super);function CoderFixedBytes(coerceFunc,length,localName){var _this=this;var name="bytes"+length;_this=_super.call(this,coerceFunc,name,name,localName,false)||this;_this.length=length;return _this}CoderFixedBytes.prototype.encode=function(value){var result=new Uint8Array(32);try{var data=bytes_1.arrayify(value);if(data.length!==this.length){throw new Error("incorrect data length")}result.set(data)}catch(error){errors.throwError("invalid "+this.name+" value",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:error.value||value})}return result};CoderFixedBytes.prototype.decode=function(data,offset){if(data.length<offset+32){errors.throwError("insufficient data for "+name+" type",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:bytes_1.hexlify(data.slice(offset,offset+32))})}return{consumed:32,value:this.coerceFunc(this.name,bytes_1.hexlify(data.slice(offset,offset+this.length)))}};return CoderFixedBytes}(Coder);var CoderAddress=function(_super){__extends(CoderAddress,_super);function CoderAddress(coerceFunc,localName){return _super.call(this,coerceFunc,"address","address",localName,false)||this}CoderAddress.prototype.encode=function(value){var result=new Uint8Array(32);try{result.set(bytes_1.arrayify(address_1.getAddress(value)),12)}catch(error){errors.throwError("invalid address",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:value})}return result};CoderAddress.prototype.decode=function(data,offset){if(data.length<offset+32){errors.throwError("insufficuent data for address type",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:bytes_1.hexlify(data.slice(offset,offset+32))})}return{consumed:32,value:this.coerceFunc("address",address_1.getAddress(bytes_1.hexlify(data.slice(offset+12,offset+32))))}};return CoderAddress}(Coder);function _encodeDynamicBytes(value){var dataLength=32*Math.ceil(value.length/32);var padding=new Uint8Array(dataLength-value.length);return bytes_1.concat([uint256Coder.encode(value.length),value,padding])}function _decodeDynamicBytes(data,offset,localName){if(data.length<offset+32){errors.throwError("insufficient data for dynamicBytes length",errors.INVALID_ARGUMENT,{arg:localName,coderType:"dynamicBytes",value:bytes_1.hexlify(data.slice(offset,offset+32))})}var length=uint256Coder.decode(data,offset).value;try{length=length.toNumber()}catch(error){errors.throwError("dynamic bytes count too large",errors.INVALID_ARGUMENT,{arg:localName,coderType:"dynamicBytes",value:length.toString()})}if(data.length<offset+32+length){errors.throwError("insufficient data for dynamicBytes type",errors.INVALID_ARGUMENT,{arg:localName,coderType:"dynamicBytes",value:bytes_1.hexlify(data.slice(offset,offset+32+length))})}return{consumed:32+32*Math.ceil(length/32),value:data.slice(offset+32,offset+32+length)}}var CoderDynamicBytes=function(_super){__extends(CoderDynamicBytes,_super);function CoderDynamicBytes(coerceFunc,localName){return _super.call(this,coerceFunc,"bytes","bytes",localName,true)||this}CoderDynamicBytes.prototype.encode=function(value){try{return _encodeDynamicBytes(bytes_1.arrayify(value))}catch(error){errors.throwError("invalid bytes value",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"bytes",value:error.value})}return null};CoderDynamicBytes.prototype.decode=function(data,offset){var result=_decodeDynamicBytes(data,offset,this.localName);result.value=this.coerceFunc("bytes",bytes_1.hexlify(result.value));return result};return CoderDynamicBytes}(Coder);var CoderString=function(_super){__extends(CoderString,_super);function CoderString(coerceFunc,localName){return _super.call(this,coerceFunc,"string","string",localName,true)||this}CoderString.prototype.encode=function(value){if(typeof value!=="string"){errors.throwError("invalid string value",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"string",value:value})}return _encodeDynamicBytes(utf8_1.toUtf8Bytes(value))};CoderString.prototype.decode=function(data,offset){var result=_decodeDynamicBytes(data,offset,this.localName);result.value=this.coerceFunc("string",utf8_1.toUtf8String(result.value));return result};return CoderString}(Coder);function alignSize(size){return 32*Math.ceil(size/32)}function pack(coders,values){if(Array.isArray(values)){}else if(values&&typeof values==="object"){var arrayValues=[];coders.forEach(function(coder){arrayValues.push(values[coder.localName])});values=arrayValues}else{errors.throwError("invalid tuple value",errors.INVALID_ARGUMENT,{coderType:"tuple",value:values})}if(coders.length!==values.length){errors.throwError("types/value length mismatch",errors.INVALID_ARGUMENT,{coderType:"tuple",value:values})}var parts=[];coders.forEach(function(coder,index){parts.push({dynamic:coder.dynamic,value:coder.encode(values[index])})});var staticSize=0,dynamicSize=0;parts.forEach(function(part){if(part.dynamic){staticSize+=32;dynamicSize+=alignSize(part.value.length)}else{staticSize+=alignSize(part.value.length)}});var offset=0,dynamicOffset=staticSize;var data=new Uint8Array(staticSize+dynamicSize);parts.forEach(function(part){if(part.dynamic){data.set(uint256Coder.encode(dynamicOffset),offset);offset+=32;data.set(part.value,dynamicOffset);dynamicOffset+=alignSize(part.value.length)}else{data.set(part.value,offset);offset+=alignSize(part.value.length)}});return data}function unpack(coders,data,offset){var baseOffset=offset;var consumed=0;var value=[];coders.forEach(function(coder){if(coder.dynamic){var dynamicOffset=uint256Coder.decode(data,offset);var result=coder.decode(data,baseOffset+dynamicOffset.value.toNumber());result.consumed=dynamicOffset.consumed}else{var result=coder.decode(data,offset)}if(result.value!=undefined){value.push(result.value)}offset+=result.consumed;consumed+=result.consumed});coders.forEach(function(coder,index){var name=coder.localName;if(!name){return}if(name==="length"){name="_length"}if(value[name]!=null){return}value[name]=value[index]});return{value:value,consumed:consumed}}var CoderArray=function(_super){__extends(CoderArray,_super);function CoderArray(coerceFunc,coder,length,localName){var _this=this;var type=coder.type+"["+(length>=0?length:"")+"]";var dynamic=length===-1||coder.dynamic;_this=_super.call(this,coerceFunc,"array",type,localName,dynamic)||this;_this.coder=coder;_this.length=length;return _this}CoderArray.prototype.encode=function(value){if(!Array.isArray(value)){errors.throwError("expected array value",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:value})}var count=this.length;var result=new Uint8Array(0);if(count===-1){count=value.length;result=uint256Coder.encode(count)}errors.checkArgumentCount(count,value.length," in coder array"+(this.localName?" "+this.localName:""));var coders=[];for(var i=0;i<value.length;i++){coders.push(this.coder)}return bytes_1.concat([result,pack(coders,value)])};CoderArray.prototype.decode=function(data,offset){var consumed=0;var count=this.length;if(count===-1){try{var decodedLength=uint256Coder.decode(data,offset)}catch(error){errors.throwError("insufficient data for dynamic array length",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:error.value})}try{count=decodedLength.value.toNumber()}catch(error){errors.throwError("array count too large",errors.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:decodedLength.value.toString()})}consumed+=decodedLength.consumed;offset+=decodedLength.consumed}var coders=[];for(var i=0;i<count;i++){coders.push(new CoderAnonymous(this.coder))}var result=unpack(coders,data,offset);result.consumed+=consumed;result.value=this.coerceFunc(this.type,result.value);return result};return CoderArray}(Coder);var CoderTuple=function(_super){__extends(CoderTuple,_super);function CoderTuple(coerceFunc,coders,localName){var _this=this;var dynamic=false;var types=[];coders.forEach(function(coder){if(coder.dynamic){dynamic=true}types.push(coder.type)});var type="tuple("+types.join(",")+")";_this=_super.call(this,coerceFunc,"tuple",type,localName,dynamic)||this;_this.coders=coders;return _this}CoderTuple.prototype.encode=function(value){return pack(this.coders,value)};CoderTuple.prototype.decode=function(data,offset){var result=unpack(this.coders,data,offset);result.value=this.coerceFunc(this.type,result.value);return result};return CoderTuple}(Coder);function splitNesting(value){value=value.trim();var result=[];var accum="";var depth=0;for(var offset=0;offset<value.length;offset++){var c=value[offset];if(c===","&&depth===0){result.push(accum);accum=""}else{accum+=c;if(c==="("){depth++}else if(c===")"){depth--;if(depth===-1){throw new Error("unbalanced parenthsis")}}}}if(accum){result.push(accum)}return result}var paramTypeSimple={address:CoderAddress,bool:CoderBoolean,string:CoderString,bytes:CoderDynamicBytes};function getTupleParamCoder(coerceFunc,components,localName){if(!components){components=[]}var coders=[];components.forEach(function(component){coders.push(getParamCoder(coerceFunc,component))});return new CoderTuple(coerceFunc,coders,localName)}function getParamCoder(coerceFunc,param){
var coder=paramTypeSimple[param.type];if(coder){return new coder(coerceFunc,param.name)}var match=param.type.match(paramTypeNumber);if(match){var size=parseInt(match[2]||"256");if(size===0||size>256||size%8!==0){errors.throwError("invalid "+match[1]+" bit length",errors.INVALID_ARGUMENT,{arg:"param",value:param})}return new CoderNumber(coerceFunc,size/8,match[1]==="int",param.name)}var match=param.type.match(paramTypeBytes);if(match){var size=parseInt(match[1]);if(size===0||size>32){errors.throwError("invalid bytes length",errors.INVALID_ARGUMENT,{arg:"param",value:param})}return new CoderFixedBytes(coerceFunc,size,param.name)}var match=param.type.match(paramTypeArray);if(match){var size=parseInt(match[2]||"-1");param=properties_1.shallowCopy(param);param.type=match[1];param=properties_1.deepCopy(param);return new CoderArray(coerceFunc,getParamCoder(coerceFunc,param),size,param.name)}if(param.type.substring(0,5)==="tuple"){return getTupleParamCoder(coerceFunc,param.components,param.name)}if(param.type===""){return new CoderNull(coerceFunc,param.name)}errors.throwError("invalid type",errors.INVALID_ARGUMENT,{arg:"type",value:param.type});return null}var AbiCoder=function(){function AbiCoder(coerceFunc){errors.checkNew(this,AbiCoder);if(!coerceFunc){coerceFunc=exports.defaultCoerceFunc}properties_1.defineReadOnly(this,"coerceFunc",coerceFunc)}AbiCoder.prototype.encode=function(types,values){if(types.length!==values.length){errors.throwError("types/values length mismatch",errors.INVALID_ARGUMENT,{count:{types:types.length,values:values.length},value:{types:types,values:values}})}var coders=[];types.forEach(function(type){var typeObject=null;if(typeof type==="string"){typeObject=parseParam(type)}else{typeObject=type}coders.push(getParamCoder(this.coerceFunc,typeObject))},this);return bytes_1.hexlify(new CoderTuple(this.coerceFunc,coders,"_").encode(values))};AbiCoder.prototype.decode=function(types,data){var coders=[];types.forEach(function(type){var typeObject=null;if(typeof type==="string"){typeObject=parseParam(type)}else{typeObject=properties_1.deepCopy(type)}coders.push(getParamCoder(this.coerceFunc,typeObject))},this);return new CoderTuple(this.coerceFunc,coders,"_").decode(bytes_1.arrayify(data),0).value};return AbiCoder}();exports.AbiCoder=AbiCoder;exports.defaultAbiCoder=new AbiCoder},{"../constants":3,"../errors":5,"./address":59,"./bignumber":61,"./bytes":62,"./properties":72,"./utf8":83}],59:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var bn_js_1=__importDefault(require("bn.js"));var bytes_1=require("./bytes");var keccak256_1=require("./keccak256");var rlp_1=require("./rlp");var errors=require("../errors");function getChecksumAddress(address){if(typeof address!=="string"||!address.match(/^0x[0-9A-Fa-f]{40}$/)){errors.throwError("invalid address",errors.INVALID_ARGUMENT,{arg:"address",value:address})}address=address.toLowerCase();var chars=address.substring(2).split("");var hashed=new Uint8Array(40);for(var i_1=0;i_1<40;i_1++){hashed[i_1]=chars[i_1].charCodeAt(0)}hashed=bytes_1.arrayify(keccak256_1.keccak256(hashed));for(var i=0;i<40;i+=2){if(hashed[i>>1]>>4>=8){chars[i]=chars[i].toUpperCase()}if((hashed[i>>1]&15)>=8){chars[i+1]=chars[i+1].toUpperCase()}}return"0x"+chars.join("")}var MAX_SAFE_INTEGER=9007199254740991;function log10(x){if(Math.log10){return Math.log10(x)}return Math.log(x)/Math.LN10}var ibanLookup={};for(var i=0;i<10;i++){ibanLookup[String(i)]=String(i)}for(var i=0;i<26;i++){ibanLookup[String.fromCharCode(65+i)]=String(10+i)}var safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(address){address=address.toUpperCase();address=address.substring(4)+address.substring(0,2)+"00";var expanded="";address.split("").forEach(function(c){expanded+=ibanLookup[c]});while(expanded.length>=safeDigits){var block=expanded.substring(0,safeDigits);expanded=parseInt(block,10)%97+expanded.substring(block.length)}var checksum=String(98-parseInt(expanded,10)%97);while(checksum.length<2){checksum="0"+checksum}return checksum}function getAddress(address){var result=null;if(typeof address!=="string"){errors.throwError("invalid address",errors.INVALID_ARGUMENT,{arg:"address",value:address})}if(address.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(address.substring(0,2)!=="0x"){address="0x"+address}result=getChecksumAddress(address);if(address.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&result!==address){errors.throwError("bad address checksum",errors.INVALID_ARGUMENT,{arg:"address",value:address})}}else if(address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){if(address.substring(2,4)!==ibanChecksum(address)){errors.throwError("bad icap checksum",errors.INVALID_ARGUMENT,{arg:"address",value:address})}result=new bn_js_1.default.BN(address.substring(4),36).toString(16);while(result.length<40){result="0"+result}result=getChecksumAddress("0x"+result)}else{errors.throwError("invalid address",errors.INVALID_ARGUMENT,{arg:"address",value:address})}return result}exports.getAddress=getAddress;function getIcapAddress(address){var base36=new bn_js_1.default.BN(getAddress(address).substring(2),16).toString(36).toUpperCase();while(base36.length<30){base36="0"+base36}return"XE"+ibanChecksum("XE00"+base36)+base36}exports.getIcapAddress=getIcapAddress;function getContractAddress(transaction){if(!transaction.from){throw new Error("missing from address")}var nonce=transaction.nonce;return getAddress("0x"+keccak256_1.keccak256(rlp_1.encode([getAddress(transaction.from),bytes_1.stripZeros(bytes_1.hexlify(nonce))])).substring(26))}exports.getContractAddress=getContractAddress},{"../errors":5,"./bytes":62,"./keccak256":69,"./rlp":74,"bn.js":9}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bytes_1=require("../utils/bytes");module.exports={decode:function(textData){textData=atob(textData);var data=[];for(var i=0;i<textData.length;i++){data.push(textData.charCodeAt(i))}return bytes_1.arrayify(data)},encode:function(data){data=bytes_1.arrayify(data);var textData="";for(var i=0;i<data.length;i++){textData+=String.fromCharCode(data[i])}return btoa(textData)}}},{"../utils/bytes":62}],61:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var bn_js_1=__importDefault(require("bn.js"));var bytes_1=require("./bytes");var properties_1=require("./properties");var errors=__importStar(require("../errors"));var BN_1=new bn_js_1.default.BN((-1));function toHex(bn){var value=bn.toString(16);if(value[0]==="-"){if(value.length%2===0){return"-0x0"+value.substring(1)}return"-0x"+value.substring(1)}if(value.length%2===1){return"0x0"+value}return"0x"+value}function toBN(value){return _bnify(bigNumberify(value))}function toBigNumber(bn){return new BigNumber(toHex(bn))}function _bnify(value){var hex=value._hex;if(hex[0]==="-"){return new bn_js_1.default.BN(hex.substring(3),16).mul(BN_1)}return new bn_js_1.default.BN(hex.substring(2),16)}var BigNumber=function(){function BigNumber(value){errors.checkNew(this,BigNumber);properties_1.setType(this,"BigNumber");if(typeof value==="string"){if(bytes_1.isHexString(value)){if(value=="0x"){value="0x0"}properties_1.defineReadOnly(this,"_hex",value)}else if(value[0]==="-"&&bytes_1.isHexString(value.substring(1))){properties_1.defineReadOnly(this,"_hex",value)}else if(value.match(/^-?[0-9]*$/)){if(value==""){value="0"}properties_1.defineReadOnly(this,"_hex",toHex(new bn_js_1.default.BN(value)))}else{errors.throwError("invalid BigNumber string value",errors.INVALID_ARGUMENT,{arg:"value",value:value})}}else if(typeof value==="number"){if(parseInt(String(value))!==value){errors.throwError("underflow",errors.NUMERIC_FAULT,{operation:"setValue",fault:"underflow",value:value,outputValue:parseInt(String(value))})}try{properties_1.defineReadOnly(this,"_hex",toHex(new bn_js_1.default.BN(value)))}catch(error){errors.throwError("overflow",errors.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:error.message})}}else if(value instanceof BigNumber){properties_1.defineReadOnly(this,"_hex",value._hex)}else if(value.toHexString){properties_1.defineReadOnly(this,"_hex",toHex(toBN(value.toHexString())))}else if(value._hex&&bytes_1.isHexString(value._hex)){properties_1.defineReadOnly(this,"_hex",value._hex)}else if(bytes_1.isArrayish(value)){properties_1.defineReadOnly(this,"_hex",toHex(new bn_js_1.default.BN(bytes_1.hexlify(value).substring(2),16)))}else{errors.throwError("invalid BigNumber value",errors.INVALID_ARGUMENT,{arg:"value",value:value})}}BigNumber.prototype.fromTwos=function(value){return toBigNumber(_bnify(this).fromTwos(value))};BigNumber.prototype.toTwos=function(value){return toBigNumber(_bnify(this).toTwos(value))};BigNumber.prototype.add=function(other){return toBigNumber(_bnify(this).add(toBN(other)))};BigNumber.prototype.sub=function(other){return toBigNumber(_bnify(this).sub(toBN(other)))};BigNumber.prototype.div=function(other){var o=bigNumberify(other);if(o.isZero()){errors.throwError("division by zero",errors.NUMERIC_FAULT,{operation:"divide",fault:"division by zero"})}return toBigNumber(_bnify(this).div(toBN(other)))};BigNumber.prototype.mul=function(other){return toBigNumber(_bnify(this).mul(toBN(other)))};BigNumber.prototype.mod=function(other){return toBigNumber(_bnify(this).mod(toBN(other)))};BigNumber.prototype.pow=function(other){return toBigNumber(_bnify(this).pow(toBN(other)))};BigNumber.prototype.maskn=function(value){return toBigNumber(_bnify(this).maskn(value))};BigNumber.prototype.eq=function(other){return _bnify(this).eq(toBN(other))};BigNumber.prototype.lt=function(other){return _bnify(this).lt(toBN(other))};BigNumber.prototype.lte=function(other){return _bnify(this).lte(toBN(other))};BigNumber.prototype.gt=function(other){return _bnify(this).gt(toBN(other))};BigNumber.prototype.gte=function(other){return _bnify(this).gte(toBN(other))};BigNumber.prototype.isZero=function(){return _bnify(this).isZero()};BigNumber.prototype.toNumber=function(){try{return _bnify(this).toNumber()}catch(error){errors.throwError("overflow",errors.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:error.message})}return null};BigNumber.prototype.toString=function(){return _bnify(this).toString(10)};BigNumber.prototype.toHexString=function(){return this._hex};BigNumber.isBigNumber=function(value){return properties_1.isType(value,"BigNumber")};return BigNumber}();exports.BigNumber=BigNumber;function bigNumberify(value){if(BigNumber.isBigNumber(value)){return value}return new BigNumber(value)}exports.bigNumberify=bigNumberify},{"../errors":5,"./bytes":62,"./properties":72,"bn.js":9}],62:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var errors=__importStar(require("../errors"));function isHexable(value){return!!value.toHexString}exports.isHexable=isHexable;function addSlice(array){if(array.slice){return array}array.slice=function(){var args=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(array,args))};return array}function isArrayish(value){if(!value||parseInt(String(value.length))!=value.length||typeof value==="string"){return false}for(var i=0;i<value.length;i++){var v=value[i];if(v<0||v>=256||parseInt(String(v))!=v){return false}}return true}exports.isArrayish=isArrayish;function arrayify(value){if(value==null){errors.throwError("cannot convert null value to array",errors.INVALID_ARGUMENT,{arg:"value",value:value})}if(isHexable(value)){value=value.toHexString()}if(typeof value==="string"){var match=value.match(/^(0x)?[0-9a-fA-F]*$/);if(!match){errors.throwError("invalid hexidecimal string",errors.INVALID_ARGUMENT,{arg:"value",value:value})}if(match[1]!=="0x"){errors.throwError("hex string must have 0x prefix",errors.INVALID_ARGUMENT,{arg:"value",value:value})}value=value.substring(2);if(value.length%2){value="0"+value}var result=[];for(var i=0;i<value.length;i+=2){result.push(parseInt(value.substr(i,2),16))}return addSlice(new Uint8Array(result))}if(isArrayish(value)){return addSlice(new Uint8Array(value))}errors.throwError("invalid arrayify value",null,{arg:"value",value:value,type:typeof value});return null}exports.arrayify=arrayify;function concat(objects){var arrays=[];var length=0;for(var i=0;i<objects.length;i++){var object=arrayify(objects[i]);arrays.push(object);length+=object.length}var result=new Uint8Array(length);var offset=0;for(var i=0;i<arrays.length;i++){result.set(arrays[i],offset);offset+=arrays[i].length}return addSlice(result)}exports.concat=concat;function stripZeros(value){var result=arrayify(value);if(result.length===0){return result}var start=0;while(result[start]===0){start++}if(start){result=result.slice(start)}return result}exports.stripZeros=stripZeros;function padZeros(value,length){value=arrayify(value);if(length<value.length){throw new Error("cannot pad")}var result=new Uint8Array(length);result.set(value,length-value.length);return addSlice(result)}exports.padZeros=padZeros;function isHexString(value,length){if(typeof value!=="string"||!value.match(/^0x[0-9A-Fa-f]*$/)){return false}if(length&&value.length!==2+2*length){return false}return true}exports.isHexString=isHexString;var HexCharacters="0123456789abcdef";function hexlify(value){if(isHexable(value)){return value.toHexString()}if(typeof value==="number"){if(value<0){errors.throwError("cannot hexlify negative value",errors.INVALID_ARGUMENT,{arg:"value",value:value})}var hex="";while(value){hex=HexCharacters[value&15]+hex;value=Math.floor(value/16)}if(hex.length){if(hex.length%2){hex="0"+hex}return"0x"+hex}return"0x00"}if(typeof value==="string"){var match=value.match(/^(0x)?[0-9a-fA-F]*$/);if(!match){errors.throwError("invalid hexidecimal string",errors.INVALID_ARGUMENT,{arg:"value",value:value})}if(match[1]!=="0x"){errors.throwError("hex string must have 0x prefix",errors.INVALID_ARGUMENT,{arg:"value",value:value})}if(value.length%2){value="0x0"+value.substring(2)}return value}if(isArrayish(value)){var result=[];for(var i=0;i<value.length;i++){var v=value[i];result.push(HexCharacters[(v&240)>>4]+HexCharacters[v&15])}return"0x"+result.join("")}errors.throwError("invalid hexlify value",null,{arg:"value",value:value});return"never"}exports.hexlify=hexlify;function hexDataLength(data){if(!isHexString(data)||data.length%2!==0){return null}return(data.length-2)/2}exports.hexDataLength=hexDataLength;function hexDataSlice(data,offset,endOffset){if(!isHexString(data)){errors.throwError("invalid hex data",errors.INVALID_ARGUMENT,{arg:"value",value:data})}if(data.length%2!==0){errors.throwError("hex data length must be even",errors.INVALID_ARGUMENT,{arg:"value",value:data})}offset=2+2*offset;if(endOffset!=null){return"0x"+data.substring(offset,2+2*endOffset)}return"0x"+data.substring(offset)}exports.hexDataSlice=hexDataSlice;function hexStripZeros(value){if(!isHexString(value)){errors.throwError("invalid hex string",errors.INVALID_ARGUMENT,{arg:"value",value:value})}while(value.length>3&&value.substring(0,3)==="0x0"){value="0x"+value.substring(3)}return value}exports.hexStripZeros=hexStripZeros;function hexZeroPad(value,length){if(!isHexString(value)){errors.throwError("invalid hex string",errors.INVALID_ARGUMENT,{arg:"value",value:value})}while(value.length<2*length+2){value="0x0"+value.substring(2)}return value}exports.hexZeroPad=hexZeroPad;function isSignature(value){return value&&value.r!=null&&value.s!=null}function splitSignature(signature){var v=0;var r="0x",s="0x";if(isSignature(signature)){if(signature.v==null&&signature.recoveryParam==null){errors.throwError("at least on of recoveryParam or v must be specified",errors.INVALID_ARGUMENT,{argument:"signature",value:signature})}r=hexZeroPad(signature.r,32);s=hexZeroPad(signature.s,32);v=signature.v;if(typeof v==="string"){v=parseInt(v,16)}var recoveryParam=signature.recoveryParam;if(recoveryParam==null&&signature.v!=null){recoveryParam=1-v%2}v=27+recoveryParam}else{var bytes=arrayify(signature);if(bytes.length!==65){throw new Error("invalid signature")}r=hexlify(bytes.slice(0,32));s=hexlify(bytes.slice(32,64));v=bytes[64];if(v!==27&&v!==28){v=27+v%2}}return{r:r,s:s,recoveryParam:v-27,v:v}}exports.splitSignature=splitSignature;function joinSignature(signature){signature=splitSignature(signature);return hexlify(concat([signature.r,signature.s,signature.recoveryParam?"0x1c":"0x1b"]))}exports.joinSignature=joinSignature},{"../errors":5}],63:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bytes_1=require("./bytes");var utf8_1=require("./utf8");var keccak256_1=require("./keccak256");var Zeros=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var Partition=new RegExp("^((.*)\\.)?([^.]+)$");var UseSTD3ASCIIRules=new RegExp("^[a-z0-9.-]*$");function namehash(name){name=name.toLowerCase();if(!name.match(UseSTD3ASCIIRules)){throw new Error("contains invalid UseSTD3ASCIIRules characters")}var result=Zeros;while(name.length){var partition=name.match(Partition);var label=utf8_1.toUtf8Bytes(partition[3]);result=keccak256_1.keccak256(bytes_1.concat([result,keccak256_1.keccak256(label)]));name=partition[2]||""}return bytes_1.hexlify(result)}exports.namehash=namehash;function id(text){return keccak256_1.keccak256(utf8_1.toUtf8Bytes(text))}exports.id=id;function hashMessage(message){var payload=bytes_1.concat([utf8_1.toUtf8Bytes("Ethereum Signed Message:\n"),utf8_1.toUtf8Bytes(String(message.length)),typeof message==="string"?utf8_1.toUtf8Bytes(message):message]);return keccak256_1.keccak256(payload)}exports.hashMessage=hashMessage},{"./bytes":62,"./keccak256":69,"./utf8":83}],64:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var errors=__importStar(require("../errors"));var lang_en_1=require("../wordlists/lang-en");var bytes_1=require("./bytes");var bignumber_1=require("./bignumber");var utf8_1=require("./utf8");var pbkdf2_1=require("./pbkdf2");var hmac_1=require("./hmac");var properties_1=require("./properties");var secp256k1_1=require("./secp256k1");var sha2_1=require("./sha2");var N=bignumber_1.bigNumberify("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");var MasterSecret=utf8_1.toUtf8Bytes("Bitcoin seed");var HardenedBit=2147483648;function getUpperMask(bits){return(1<<bits)-1<<8-bits}function getLowerMask(bits){return(1<<bits)-1}var _constructorGuard={};exports.defaultPath="m/44'/60'/0'/0/0";var HDNode=function(){function HDNode(constructorGuard,privateKey,chainCode,index,depth,mnemonic,path){errors.checkNew(this,HDNode);if(constructorGuard!==_constructorGuard){throw new Error("HDNode constructor cannot be called directly")}properties_1.defineReadOnly(this,"keyPair",new secp256k1_1.KeyPair(privateKey));properties_1.defineReadOnly(this,"privateKey",this.keyPair.privateKey);properties_1.defineReadOnly(this,"publicKey",this.keyPair.compressedPublicKey);properties_1.defineReadOnly(this,"address",secp256k1_1.computeAddress(this.publicKey));properties_1.defineReadOnly(this,"chainCode",bytes_1.hexlify(chainCode));properties_1.defineReadOnly(this,"index",index);properties_1.defineReadOnly(this,"depth",depth);properties_1.defineReadOnly(this,"mnemonic",mnemonic);properties_1.defineReadOnly(this,"path",path);properties_1.setType(this,"HDNode")}HDNode.prototype._derive=function(index){if(!this.privateKey){if(index>=HardenedBit){throw new Error("cannot derive child of neutered node")}throw new Error("not implemented")}var data=new Uint8Array(37);var mnemonic=this.mnemonic;var path=this.path;if(path){path+="/"+index}if(index&HardenedBit){data.set(bytes_1.arrayify(this.privateKey),1);if(path){path+="'"}}else{data.set(this.keyPair.publicKeyBytes)}for(var i=24;i>=0;i-=8){data[33+(i>>3)]=index>>24-i&255}var I=hmac_1.computeHmac(hmac_1.SupportedAlgorithms.sha512,this.chainCode,data);var IL=bignumber_1.bigNumberify(I.slice(0,32));var IR=I.slice(32);var ki=IL.add(this.keyPair.privateKey).mod(N);return new HDNode(_constructorGuard,bytes_1.arrayify(ki),IR,index,this.depth+1,mnemonic,path)};HDNode.prototype.derivePath=function(path){var components=path.split("/");if(components.length===0||components[0]==="m"&&this.depth!==0){throw new Error("invalid path")}if(components[0]==="m"){components.shift()}var result=this;for(var i=0;i<components.length;i++){var component=components[i];if(component.match(/^[0-9]+'$/)){var index=parseInt(component.substring(0,component.length-1));if(index>=HardenedBit){throw new Error("invalid path index - "+component)}result=result._derive(HardenedBit+index)}else if(component.match(/^[0-9]+$/)){var index=parseInt(component);if(index>=HardenedBit){throw new Error("invalid path index - "+component)}result=result._derive(index)}else{throw new Error("invlaid path component - "+component)}}return result};HDNode.isHDNode=function(value){return properties_1.isType(value,"HDNode")};return HDNode}();exports.HDNode=HDNode;function _fromSeed(seed,mnemonic){var seedArray=bytes_1.arrayify(seed);if(seedArray.length<16||seedArray.length>64){throw new Error("invalid seed")}var I=bytes_1.arrayify(hmac_1.computeHmac(hmac_1.SupportedAlgorithms.sha512,MasterSecret,seedArray));return new HDNode(_constructorGuard,I.slice(0,32),I.slice(32),0,0,mnemonic,"m")}function fromMnemonic(mnemonic,wordlist){mnemonicToEntropy(mnemonic,wordlist);return _fromSeed(mnemonicToSeed(mnemonic),mnemonic)}exports.fromMnemonic=fromMnemonic;function fromSeed(seed){return _fromSeed(seed,null)}exports.fromSeed=fromSeed;function mnemonicToSeed(mnemonic,password){if(!password){password=""}var salt=utf8_1.toUtf8Bytes("mnemonic"+password,utf8_1.UnicodeNormalizationForm.NFKD);return bytes_1.hexlify(pbkdf2_1.pbkdf2(utf8_1.toUtf8Bytes(mnemonic,utf8_1.UnicodeNormalizationForm.NFKD),salt,2048,64,"sha512"))}exports.mnemonicToSeed=mnemonicToSeed;function mnemonicToEntropy(mnemonic,wordlist){if(!wordlist){wordlist=lang_en_1.langEn}errors.checkNormalize();var words=wordlist.split(mnemonic);if(words.length%3!==0){throw new Error("invalid mnemonic")}var entropy=bytes_1.arrayify(new Uint8Array(Math.ceil(11*words.length/8)));var offset=0;for(var i=0;i<words.length;i++){var index=wordlist.getWordIndex(words[i].normalize("NFKD"));if(index===-1){throw new Error("invalid mnemonic")}for(var bit=0;bit<11;bit++){if(index&1<<10-bit){entropy[offset>>3]|=1<<7-offset%8}offset++}}var entropyBits=32*words.length/3;var checksumBits=words.length/3;var checksumMask=getUpperMask(checksumBits);var checksum=bytes_1.arrayify(sha2_1.sha256(entropy.slice(0,entropyBits/8)))[0];checksum&=checksumMask;if(checksum!==(entropy[entropy.length-1]&checksumMask)){throw new Error("invalid checksum")}return bytes_1.hexlify(entropy.slice(0,entropyBits/8))}exports.mnemonicToEntropy=mnemonicToEntropy;function entropyToMnemonic(entropy,wordlist){entropy=bytes_1.arrayify(entropy);if(entropy.length%4!==0||entropy.length<16||entropy.length>32){throw new Error("invalid entropy")}var indices=[0];var remainingBits=11;for(var i=0;i<entropy.length;i++){if(remainingBits>8){indices[indices.length-1]<<=8;indices[indices.length-1]|=entropy[i];remainingBits-=8}else{indices[indices.length-1]<<=remainingBits;indices[indices.length-1]|=entropy[i]>>8-remainingBits;indices.push(entropy[i]&getLowerMask(8-remainingBits));remainingBits+=3}}var checksum=bytes_1.arrayify(sha2_1.sha256(entropy))[0];var checksumBits=entropy.length/4;checksum&=getUpperMask(checksumBits);indices[indices.length-1]<<=checksumBits;indices[indices.length-1]|=checksum>>8-checksumBits;if(!wordlist){wordlist=lang_en_1.langEn}return wordlist.join(indices.map(function(index){return wordlist.getWord(index)}))}exports.entropyToMnemonic=entropyToMnemonic;function isValidMnemonic(mnemonic,wordlist){try{mnemonicToEntropy(mnemonic,wordlist);return true}catch(error){}return false}exports.isValidMnemonic=isValidMnemonic},{"../errors":5,"../wordlists/lang-en":88,"./bignumber":61,"./bytes":62,"./hmac":65,"./pbkdf2":71,"./properties":72,"./secp256k1":75,"./sha2":77,"./utf8":83}],65:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var hash=__importStar(require("hash.js"));var bytes_1=require("../utils/bytes");var errors=__importStar(require("../errors"));var SupportedAlgorithms;(function(SupportedAlgorithms){SupportedAlgorithms["sha256"]="sha256";SupportedAlgorithms["sha512"]="sha512"})(SupportedAlgorithms=exports.SupportedAlgorithms||(exports.SupportedAlgorithms={}));function computeHmac(algorithm,key,data){if(!SupportedAlgorithms[algorithm]){errors.throwError("unsupported algorithm "+algorithm,errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:algorithm})}return bytes_1.arrayify(hash.hmac(hash[algorithm],bytes_1.arrayify(key)).update(bytes_1.arrayify(data)).digest())}exports.computeHmac=computeHmac},{"../errors":5,"../utils/bytes":62,"hash.js":27}],66:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var abi_coder_1=require("./abi-coder");exports.AbiCoder=abi_coder_1.AbiCoder;exports.defaultAbiCoder=abi_coder_1.defaultAbiCoder;exports.formatSignature=abi_coder_1.formatSignature;exports.formatParamType=abi_coder_1.formatParamType;exports.parseSignature=abi_coder_1.parseSignature;exports.parseParamType=abi_coder_1.parseParamType;var address_1=require("./address");exports.getAddress=address_1.getAddress;exports.getContractAddress=address_1.getContractAddress;exports.getIcapAddress=address_1.getIcapAddress;var base64=__importStar(require("./base64"));exports.base64=base64;var bignumber_1=require("./bignumber");exports.BigNumber=bignumber_1.BigNumber;exports.bigNumberify=bignumber_1.bigNumberify;var bytes_1=require("./bytes");exports.arrayify=bytes_1.arrayify;exports.concat=bytes_1.concat;exports.hexDataSlice=bytes_1.hexDataSlice;exports.hexDataLength=bytes_1.hexDataLength;exports.hexlify=bytes_1.hexlify;exports.hexStripZeros=bytes_1.hexStripZeros;exports.hexZeroPad=bytes_1.hexZeroPad;exports.joinSignature=bytes_1.joinSignature;exports.padZeros=bytes_1.padZeros;exports.splitSignature=bytes_1.splitSignature;exports.stripZeros=bytes_1.stripZeros;var hash_1=require("./hash");exports.hashMessage=hash_1.hashMessage;exports.id=hash_1.id;exports.namehash=hash_1.namehash;var HDNode=__importStar(require("./hdnode"));exports.HDNode=HDNode;var interface_1=require("./interface");exports.Interface=interface_1.Interface;var json_wallet_1=require("./json-wallet");exports.getJsonWalletAddress=json_wallet_1.getJsonWalletAddress;var keccak256_1=require("./keccak256");exports.keccak256=keccak256_1.keccak256;var sha2_1=require("./sha2");exports.sha256=sha2_1.sha256;var solidity_1=require("./solidity");exports.solidityKeccak256=solidity_1.keccak256;exports.solidityPack=solidity_1.pack;exports.soliditySha256=solidity_1.sha256;var random_bytes_1=require("./random-bytes");exports.randomBytes=random_bytes_1.randomBytes;var networks_1=require("./networks");exports.getNetwork=networks_1.getNetwork;var properties_1=require("./properties");exports.checkProperties=properties_1.checkProperties;exports.deepCopy=properties_1.deepCopy;exports.defineReadOnly=properties_1.defineReadOnly;exports.resolveProperties=properties_1.resolveProperties;exports.shallowCopy=properties_1.shallowCopy;var RLP=__importStar(require("./rlp"));exports.RLP=RLP;var secp256k1_1=require("./secp256k1");exports.computeAddress=secp256k1_1.computeAddress;exports.computePublicKey=secp256k1_1.computePublicKey;exports.recoverAddress=secp256k1_1.recoverAddress;exports.recoverPublicKey=secp256k1_1.recoverPublicKey;exports.verifyMessage=secp256k1_1.verifyMessage;var signing_key_1=require("./signing-key");exports.SigningKey=signing_key_1.SigningKey;var transaction_1=require("./transaction");exports.populateTransaction=transaction_1.populateTransaction;var transaction_2=require("./transaction");exports.parseTransaction=transaction_2.parse;exports.serializeTransaction=transaction_2.serialize;var utf8_1=require("./utf8");exports.formatBytes32String=utf8_1.formatBytes32String;exports.parseBytes32String=utf8_1.parseBytes32String;exports.toUtf8Bytes=utf8_1.toUtf8Bytes;exports.toUtf8String=utf8_1.toUtf8String;var units_1=require("./units");exports.commify=units_1.commify;exports.formatEther=units_1.formatEther;exports.parseEther=units_1.parseEther;exports.formatUnits=units_1.formatUnits;exports.parseUnits=units_1.parseUnits;var web_1=require("./web");exports.fetchJson=web_1.fetchJson;var hmac_1=require("./hmac");exports.SupportedAlgorithms=hmac_1.SupportedAlgorithms;var utf8_2=require("./utf8");exports.UnicodeNormalizationForm=utf8_2.UnicodeNormalizationForm;var wordlist_1=require("./wordlist");exports.Wordlist=wordlist_1.Wordlist},{"./abi-coder":58,"./address":59,"./base64":60,"./bignumber":61,"./bytes":62,"./hash":63,"./hdnode":64,"./hmac":65,"./interface":67,"./json-wallet":68,"./keccak256":69,"./networks":70,"./properties":72,"./random-bytes":73,"./rlp":74,"./secp256k1":75,"./sha2":77,"./signing-key":79,"./solidity":80,"./transaction":81,"./units":82,"./utf8":83,"./web":84,"./wordlist":85}],67:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var address_1=require("./address");var abi_coder_1=require("./abi-coder");var bignumber_1=require("./bignumber");var bytes_1=require("./bytes");var hash_1=require("./hash");var keccak256_1=require("./keccak256");var properties_1=require("./properties");var errors=__importStar(require("../errors"));var _Indexed=function(){function _Indexed(hash){properties_1.setType(this,"Indexed");properties_1.defineReadOnly(this,"hash",hash)}return _Indexed}();var Description=function(){function Description(info){properties_1.setType(this,"Description");for(var key in info){properties_1.defineReadOnly(this,key,properties_1.deepCopy(info[key],true))}Object.freeze(this)}return Description}();var _DeployDescription=function(_super){__extends(_DeployDescription,_super);function _DeployDescription(){return _super!==null&&_super.apply(this,arguments)||this}_DeployDescription.prototype.encode=function(bytecode,params){
if(!bytes_1.isHexString(bytecode)){errors.throwError("invalid contract bytecode",errors.INVALID_ARGUMENT,{arg:"bytecode",value:bytecode})}errors.checkArgumentCount(params.length,this.inputs.length," in Interface constructor");try{return bytecode+abi_coder_1.defaultAbiCoder.encode(this.inputs,params).substring(2)}catch(error){errors.throwError("invalid constructor argument",errors.INVALID_ARGUMENT,{arg:error.arg,reason:error.reason,value:error.value})}return null};return _DeployDescription}(Description);var _FunctionDescription=function(_super){__extends(_FunctionDescription,_super);function _FunctionDescription(){return _super!==null&&_super.apply(this,arguments)||this}_FunctionDescription.prototype.encode=function(params){errors.checkArgumentCount(params.length,this.inputs.length," in interface function "+this.name);try{return this.sighash+abi_coder_1.defaultAbiCoder.encode(this.inputs,params).substring(2)}catch(error){errors.throwError("invalid input argument",errors.INVALID_ARGUMENT,{arg:error.arg,reason:error.reason,value:error.value})}return null};_FunctionDescription.prototype.decode=function(data){try{return abi_coder_1.defaultAbiCoder.decode(this.outputs,bytes_1.arrayify(data))}catch(error){errors.throwError("invalid data for function output",errors.INVALID_ARGUMENT,{arg:"data",errorArg:error.arg,errorValue:error.value,value:data,reason:error.reason})}};return _FunctionDescription}(Description);var Result=function(_super){__extends(Result,_super);function Result(){return _super!==null&&_super.apply(this,arguments)||this}return Result}(Description);var _EventDescription=function(_super){__extends(_EventDescription,_super);function _EventDescription(){return _super!==null&&_super.apply(this,arguments)||this}_EventDescription.prototype.encodeTopics=function(params){var _this=this;if(params.length>this.inputs.length){errors.throwError("too many arguments for "+this.name,errors.UNEXPECTED_ARGUMENT,{maxCount:params.length,expectedCount:this.inputs.length})}var topics=[];if(!this.anonymous){topics.push(this.topic)}params.forEach(function(arg,index){var param=_this.inputs[index];if(!param.indexed){if(arg!=null){errors.throwError("cannot filter non-indexed parameters; must be null",errors.INVALID_ARGUMENT,{argument:param.name||index,value:arg})}return}if(arg==null){topics.push(null)}else if(param.type==="string"){topics.push(hash_1.id(arg))}else if(param.type==="bytes"){topics.push(keccak256_1.keccak256(arg))}else if(param.type.indexOf("[")!==-1||param.type.substring(0,5)==="tuple"){errors.throwError("filtering with tuples or arrays not implemented yet; bug us on GitHub",errors.NOT_IMPLEMENTED,{operation:"filter(array|tuple)"})}else{if(param.type==="address"){address_1.getAddress(arg)}topics.push(bytes_1.hexZeroPad(bytes_1.hexlify(arg),32).toLowerCase())}});while(topics.length&&topics[topics.length-1]===null){topics.pop()}return topics};_EventDescription.prototype.decode=function(data,topics){if(topics!=null&&!this.anonymous){topics=topics.slice(1)}var inputIndexed=[];var inputNonIndexed=[];var inputDynamic=[];this.inputs.forEach(function(param,index){if(param.indexed){if(param.type==="string"||param.type==="bytes"||param.type.indexOf("[")>=0||param.type.substring(0,5)==="tuple"){inputIndexed.push({type:"bytes32",name:param.name||""});inputDynamic.push(true)}else{inputIndexed.push(param);inputDynamic.push(false)}}else{inputNonIndexed.push(param);inputDynamic.push(false)}});if(topics!=null){var resultIndexed=abi_coder_1.defaultAbiCoder.decode(inputIndexed,bytes_1.concat(topics))}var resultNonIndexed=abi_coder_1.defaultAbiCoder.decode(inputNonIndexed,bytes_1.arrayify(data));var result={};var nonIndexedIndex=0,indexedIndex=0;this.inputs.forEach(function(input,index){if(input.indexed){if(topics==null){result[index]=new _Indexed(null)}else if(inputDynamic[index]){result[index]=new _Indexed(resultIndexed[indexedIndex++])}else{result[index]=resultIndexed[indexedIndex++]}}else{result[index]=resultNonIndexed[nonIndexedIndex++]}if(input.name){result[input.name]=result[index]}});result.length=this.inputs.length;return new Result(result)};return _EventDescription}(Description);var _TransactionDescription=function(_super){__extends(_TransactionDescription,_super);function _TransactionDescription(){return _super!==null&&_super.apply(this,arguments)||this}return _TransactionDescription}(Description);var _LogDescription=function(_super){__extends(_LogDescription,_super);function _LogDescription(){return _super!==null&&_super.apply(this,arguments)||this}return _LogDescription}(Description);function addMethod(method){switch(method.type){case"constructor":{var description=new _DeployDescription({inputs:method.inputs,payable:method.payable==null||!!method.payable});if(!this.deployFunction){this.deployFunction=description}break}case"function":{var signature=abi_coder_1.formatSignature(method).replace(/tuple/g,"");var sighash=hash_1.id(signature).substring(0,10);var description=new _FunctionDescription({inputs:method.inputs,outputs:method.outputs,gas:method.gas,payable:method.payable==null||!!method.payable,type:method.constant?"call":"transaction",signature:signature,sighash:sighash});if(method.name&&this.functions[method.name]==null){properties_1.defineReadOnly(this.functions,method.name,description)}if(this.functions[description.signature]==null){properties_1.defineReadOnly(this.functions,description.signature,description)}break}case"event":{var signature=abi_coder_1.formatSignature(method).replace(/tuple/g,"");var description=new _EventDescription({name:method.name,signature:signature,inputs:method.inputs,topic:hash_1.id(signature),anonymous:!!method.anonymous});if(method.name&&this.events[method.name]==null){properties_1.defineReadOnly(this.events,method.name,description)}if(this.events[description.signature]==null){properties_1.defineReadOnly(this.events,description.signature,description)}break}case"fallback":break;default:console.log("WARNING: unsupported ABI type - "+method.type);break}}var Interface=function(){function Interface(abi){errors.checkNew(this,Interface);if(typeof abi==="string"){try{abi=JSON.parse(abi)}catch(error){errors.throwError("could not parse ABI JSON",errors.INVALID_ARGUMENT,{arg:"abi",errorMessage:error.message,value:abi})}if(!Array.isArray(abi)){errors.throwError("invalid abi",errors.INVALID_ARGUMENT,{arg:"abi",value:abi});return null}}properties_1.defineReadOnly(this,"functions",{});properties_1.defineReadOnly(this,"events",{});var _abi=[];abi.forEach(function(fragment){if(typeof fragment==="string"){fragment=abi_coder_1.parseSignature(fragment)}_abi.push(fragment)});properties_1.defineReadOnly(this,"abi",properties_1.deepCopy(_abi,true));_abi.forEach(addMethod,this);if(!this.deployFunction){addMethod.call(this,{type:"constructor",inputs:[]})}properties_1.setType(this,"Interface")}Interface.prototype.parseTransaction=function(tx){var sighash=tx.data.substring(0,10).toLowerCase();for(var name in this.functions){if(name.indexOf("(")===-1){continue}var func=this.functions[name];if(func.sighash===sighash){var result=abi_coder_1.defaultAbiCoder.decode(func.inputs,"0x"+tx.data.substring(10));return new _TransactionDescription({args:result,decode:func.decode,name:name,signature:func.signature,sighash:func.sighash,value:bignumber_1.bigNumberify(tx.value||null)})}}return null};Interface.prototype.parseLog=function(log){for(var name in this.events){if(name.indexOf("(")===-1){continue}var event=this.events[name];if(event.anonymous){continue}if(event.topic!==log.topics[0]){continue}return new _LogDescription({decode:event.decode,name:event.name,signature:event.signature,topic:event.topic,values:event.decode(log.data,log.topics)})}return null};Interface.isInterface=function(value){return properties_1.isType(value,"Interface")};Interface.isIndexed=function(value){return properties_1.isType(value,"Indexed")};return Interface}();exports.Interface=Interface},{"../errors":5,"./abi-coder":58,"./address":59,"./bignumber":61,"./bytes":62,"./hash":63,"./keccak256":69,"./properties":72}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var address_1=require("./address");function isCrowdsaleWallet(json){try{var data=JSON.parse(json)}catch(error){return false}return data.encseed&&data.ethaddr}exports.isCrowdsaleWallet=isCrowdsaleWallet;function isSecretStorageWallet(json){try{var data=JSON.parse(json)}catch(error){return false}if(!data.version||parseInt(data.version)!==data.version||parseInt(data.version)!==3){return false}return true}exports.isSecretStorageWallet=isSecretStorageWallet;function getJsonWalletAddress(json){if(isCrowdsaleWallet(json)){try{return address_1.getAddress(JSON.parse(json).ethaddr)}catch(error){return null}}if(isSecretStorageWallet(json)){try{return address_1.getAddress(JSON.parse(json).address)}catch(error){return null}}return null}exports.getJsonWalletAddress=getJsonWalletAddress},{"./address":59}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var sha3=require("js-sha3");var bytes_1=require("./bytes");function keccak256(data){return"0x"+sha3.keccak_256(bytes_1.arrayify(data))}exports.keccak256=keccak256},{"./bytes":62,"js-sha3":40}],70:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var errors=__importStar(require("../errors"));function ethDefaultProvider(network){return function(providers){var providerList=[];if(providers.InfuraProvider){providerList.push(new providers.InfuraProvider(network))}if(providers.EtherscanProvider){providerList.push(new providers.EtherscanProvider(network))}if(providerList.length===0){return null}if(providers.FallbackProvider){return new providers.FallbackProvider(providerList)}return providerList[0]}}function etcDefaultProvider(url,network){return function(providers){if(providers.JsonRpcProvider){return new providers.JsonRpcProvider(url,network)}return null}}var homestead={chainId:1,ensAddress:"0x314159265dd8dbb310642f98f50c066173c1259b",name:"homestead",_defaultProvider:ethDefaultProvider("homestead")};var ropsten={chainId:3,ensAddress:"0x112234455c3a32fd11230c42e7bccd4a84e02010",name:"ropsten",_defaultProvider:ethDefaultProvider("ropsten")};var networks={unspecified:{chainId:0,name:"unspecified"},homestead:homestead,mainnet:homestead,morden:{chainId:2,name:"morden"},ropsten:ropsten,testnet:ropsten,rinkeby:{chainId:4,ensAddress:"0xe7410170f87102DF0055eB195163A03B7F2Bff4A",name:"rinkeby",_defaultProvider:ethDefaultProvider("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider("kovan")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider("https://web3.gastracker.io","classic")},classicTestnet:{chainId:62,name:"classicTestnet",_defaultProvider:etcDefaultProvider("https://web3.gastracker.io/morden","classicTestnet")}};function getNetwork(network){if(network==null){return null}if(typeof network==="number"){for(var name_1 in networks){var n_1=networks[name_1];if(n_1.chainId===network){return{name:n_1.name,chainId:n_1.chainId,ensAddress:n_1.ensAddress||null,_defaultProvider:n_1._defaultProvider||null}}}return{chainId:network,name:"unknown"}}if(typeof network==="string"){var n_2=networks[network];if(n_2==null){return null}return{name:n_2.name,chainId:n_2.chainId,ensAddress:n_2.ensAddress,_defaultProvider:n_2._defaultProvider||null}}var n=networks[network.name];if(!n){if(typeof network.chainId!=="number"){errors.throwError("invalid network chainId",errors.INVALID_ARGUMENT,{arg:"network",value:network})}return network}if(network.chainId!==0&&network.chainId!==n.chainId){errors.throwError("network chainId mismatch",errors.INVALID_ARGUMENT,{arg:"network",value:network})}return{name:network.name,chainId:n.chainId,ensAddress:network.ensAddress||n.ensAddress||null,_defaultProvider:network._defaultProvider||n._defaultProvider||null}}exports.getNetwork=getNetwork},{"../errors":5}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bytes_1=require("../utils/bytes");var hmac_1=require("./hmac");function pbkdf2(password,salt,iterations,keylen,hashAlgorithm){password=bytes_1.arrayify(password);salt=bytes_1.arrayify(salt);var hLen;var l=1;var DK=new Uint8Array(keylen);var block1=new Uint8Array(salt.length+4);block1.set(salt);var r;var T;for(var i=1;i<=l;i++){block1[salt.length]=i>>24&255;block1[salt.length+1]=i>>16&255;block1[salt.length+2]=i>>8&255;block1[salt.length+3]=i&255;var U=hmac_1.computeHmac(hashAlgorithm,password,block1);if(!hLen){hLen=U.length;T=new Uint8Array(hLen);l=Math.ceil(keylen/hLen);r=keylen-(l-1)*hLen}T.set(U);for(var j=1;j<iterations;j++){U=hmac_1.computeHmac(hashAlgorithm,password,U);for(var k=0;k<hLen;k++)T[k]^=U[k]}var destPos=(i-1)*hLen;var len=i===l?r:hLen;DK.set(bytes_1.arrayify(T).slice(0,len),destPos)}return bytes_1.arrayify(DK)}exports.pbkdf2=pbkdf2},{"../utils/bytes":62,"./hmac":65}],72:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var errors=__importStar(require("../errors"));function defineReadOnly(object,name,value){Object.defineProperty(object,name,{enumerable:true,value:value,writable:false})}exports.defineReadOnly=defineReadOnly;function setType(object,type){Object.defineProperty(object,"_ethersType",{configurable:false,value:type,writable:false})}exports.setType=setType;function isType(object,type){return object&&object._ethersType===type}exports.isType=isType;function resolveProperties(object){var result={};var promises=[];Object.keys(object).forEach(function(key){var value=object[key];if(value instanceof Promise){promises.push(value.then(function(value){result[key]=value;return null}))}else{result[key]=value}});return Promise.all(promises).then(function(){return result})}exports.resolveProperties=resolveProperties;function checkProperties(object,properties){if(!object||typeof object!=="object"){errors.throwError("invalid object",errors.INVALID_ARGUMENT,{argument:"object",value:object})}Object.keys(object).forEach(function(key){if(!properties[key]){errors.throwError("invalid object key - "+key,errors.INVALID_ARGUMENT,{argument:"transaction",value:object,key:key})}})}exports.checkProperties=checkProperties;function shallowCopy(object){var result={};for(var key in object){result[key]=object[key]}return result}exports.shallowCopy=shallowCopy;var opaque={boolean:true,number:true,string:true};function deepCopy(object,frozen){if(object===undefined||object===null||opaque[typeof object]){return object}if(Array.isArray(object)){var result=object.map(function(item){return deepCopy(item,frozen)});if(frozen){Object.freeze(result)}return result}if(typeof object==="object"){if(isType(object,"BigNumber")){return object}if(isType(object,"Description")){return object}if(isType(object,"Indexed")){return object}var result={};for(var key in object){var value=object[key];if(value===undefined){continue}defineReadOnly(result,key,deepCopy(value,frozen))}if(frozen){Object.freeze(result)}return result}if(typeof object==="function"){return object}throw new Error("Cannot deepCopy "+typeof object)}exports.deepCopy=deepCopy;function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}function inheritable(parent){return function(child){inherits(child,parent);defineReadOnly(child,"inherits",inheritable(child))}}exports.inheritable=inheritable},{"../errors":5}],73:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bytes_1=require("../utils/bytes");var properties_1=require("../utils/properties");var crypto=global.crypto||global.msCrypto;if(!crypto||!crypto.getRandomValues){console.log("WARNING: Missing strong random number source; using weak randomBytes");crypto={getRandomValues:function(buffer){for(var round=0;round<20;round++){for(var i=0;i<buffer.length;i++){if(round){buffer[i]^=Math.trunc(256*Math.random())}else{buffer[i]=Math.trunc(256*Math.random())}}}return buffer},_weakCrypto:true}}function randomBytes(length){if(length<=0||length>1024||parseInt(String(length))!=length){throw new Error("invalid length")}var result=new Uint8Array(length);crypto.getRandomValues(result);return bytes_1.arrayify(result)}exports.randomBytes=randomBytes;if(crypto._weakCrypto===true){properties_1.defineReadOnly(randomBytes,"_weakCrypto",true)}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/bytes":62,"../utils/properties":72}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bytes_1=require("./bytes");function arrayifyInteger(value){var result=[];while(value){result.unshift(value&255);value>>=8}return result}function unarrayifyInteger(data,offset,length){var result=0;for(var i=0;i<length;i++){result=result*256+data[offset+i]}return result}function _encode(object){if(Array.isArray(object)){var payload=[];object.forEach(function(child){payload=payload.concat(_encode(child))});if(payload.length<=55){payload.unshift(192+payload.length);return payload}var length=arrayifyInteger(payload.length);length.unshift(247+length.length);return length.concat(payload)}var data=Array.prototype.slice.call(bytes_1.arrayify(object));if(data.length===1&&data[0]<=127){return data}else if(data.length<=55){data.unshift(128+data.length);return data}var length=arrayifyInteger(data.length);length.unshift(183+length.length);return length.concat(data)}function encode(object){return bytes_1.hexlify(_encode(object))}exports.encode=encode;function _decodeChildren(data,offset,childOffset,length){var result=[];while(childOffset<offset+1+length){var decoded=_decode(data,childOffset);result.push(decoded.result);childOffset+=decoded.consumed;if(childOffset>offset+1+length){throw new Error("invalid rlp")}}return{consumed:1+length,result:result}}function _decode(data,offset){if(data.length===0){throw new Error("invalid rlp data")}if(data[offset]>=248){var lengthLength=data[offset]-247;if(offset+1+lengthLength>data.length){throw new Error("too short")}var length=unarrayifyInteger(data,offset+1,lengthLength);if(offset+1+lengthLength+length>data.length){throw new Error("to short")}return _decodeChildren(data,offset,offset+1+lengthLength,lengthLength+length)}else if(data[offset]>=192){var length=data[offset]-192;if(offset+1+length>data.length){throw new Error("invalid rlp data")}return _decodeChildren(data,offset,offset+1,length)}else if(data[offset]>=184){var lengthLength=data[offset]-183;if(offset+1+lengthLength>data.length){throw new Error("invalid rlp data")}var length=unarrayifyInteger(data,offset+1,lengthLength);if(offset+1+lengthLength+length>data.length){throw new Error("invalid rlp data")}var result=bytes_1.hexlify(data.slice(offset+1+lengthLength,offset+1+lengthLength+length));return{consumed:1+lengthLength+length,result:result}}else if(data[offset]>=128){var length=data[offset]-128;if(offset+1+length>data.length){throw new Error("invlaid rlp data")}var result=bytes_1.hexlify(data.slice(offset+1,offset+1+length));return{consumed:1+length,result:result}}return{consumed:1,result:bytes_1.hexlify(data[offset])}}function decode(data){var bytes=bytes_1.arrayify(data);var decoded=_decode(bytes,0);if(decoded.consumed!==bytes.length){throw new Error("invalid rlp data")}return decoded.result}exports.decode=decode},{"./bytes":62}],75:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var elliptic_1=require("elliptic");var address_1=require("./address");var bytes_1=require("./bytes");var hash_1=require("./hash");var keccak256_1=require("./keccak256");var properties_1=require("./properties");var errors=__importStar(require("../errors"));var _curve=null;function getCurve(){if(!_curve){_curve=new elliptic_1.ec("secp256k1")}return _curve}var KeyPair=function(){function KeyPair(privateKey){var keyPair=getCurve().keyFromPrivate(bytes_1.arrayify(privateKey));properties_1.defineReadOnly(this,"privateKey",bytes_1.hexlify(keyPair.priv.toArray("be",32)));properties_1.defineReadOnly(this,"publicKey","0x"+keyPair.getPublic(false,"hex"));properties_1.defineReadOnly(this,"compressedPublicKey","0x"+keyPair.getPublic(true,"hex"));properties_1.defineReadOnly(this,"publicKeyBytes",keyPair.getPublic().encode(null,true))}KeyPair.prototype.sign=function(digest){var keyPair=getCurve().keyFromPrivate(bytes_1.arrayify(this.privateKey));var signature=keyPair.sign(bytes_1.arrayify(digest),{canonical:true});return{recoveryParam:signature.recoveryParam,r:bytes_1.hexZeroPad("0x"+signature.r.toString(16),32),s:bytes_1.hexZeroPad("0x"+signature.s.toString(16),32),v:27+signature.recoveryParam}};KeyPair.prototype.computeSharedSecret=function(otherKey){var keyPair=getCurve().keyFromPrivate(bytes_1.arrayify(this.privateKey));var otherKeyPair=getCurve().keyFromPublic(bytes_1.arrayify(computePublicKey(otherKey)));return bytes_1.hexZeroPad("0x"+keyPair.derive(otherKeyPair.getPublic()).toString(16),32)};return KeyPair}();exports.KeyPair=KeyPair;function computePublicKey(key,compressed){var bytes=bytes_1.arrayify(key);if(bytes.length===32){var keyPair=new KeyPair(bytes);if(compressed){return keyPair.compressedPublicKey}return keyPair.publicKey}else if(bytes.length===33){if(compressed){return bytes_1.hexlify(bytes)}return"0x"+getCurve().keyFromPublic(bytes).getPublic(false,"hex")}else if(bytes.length===65){if(!compressed){return bytes_1.hexlify(bytes)}return"0x"+getCurve().keyFromPublic(bytes).getPublic(true,"hex")}errors.throwError("invalid public or private key",errors.INVALID_ARGUMENT,{arg:"key",value:"[REDACTED]"});return null}exports.computePublicKey=computePublicKey;function computeAddress(key){var publicKey="0x"+computePublicKey(key).slice(4);return address_1.getAddress("0x"+keccak256_1.keccak256(publicKey).substring(26))}exports.computeAddress=computeAddress;function recoverPublicKey(digest,signature){var sig=bytes_1.splitSignature(signature);var rs={r:bytes_1.arrayify(sig.r),s:bytes_1.arrayify(sig.s)};return"0x"+getCurve().recoverPubKey(bytes_1.arrayify(digest),rs,sig.recoveryParam).encode("hex",false)}exports.recoverPublicKey=recoverPublicKey;function recoverAddress(digest,signature){return computeAddress(recoverPublicKey(bytes_1.arrayify(digest),signature))}exports.recoverAddress=recoverAddress;function verifyMessage(message,signature){return recoverAddress(hash_1.hashMessage(message),signature)}exports.verifyMessage=verifyMessage},{"../errors":5,"./address":59,"./bytes":62,"./hash":63,"./keccak256":69,"./properties":72,elliptic:12}],76:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var aes_js_1=__importDefault(require("aes-js"));var scrypt_js_1=__importDefault(require("scrypt-js"));var uuid_1=__importDefault(require("uuid"));var signing_key_1=require("./signing-key");var HDNode=__importStar(require("./hdnode"));var address_1=require("./address");var bytes_1=require("./bytes");var pbkdf2_1=require("./pbkdf2");var keccak256_1=require("./keccak256");var utf8_1=require("./utf8");var random_bytes_1=require("./random-bytes");function looseArrayify(hexString){if(typeof hexString==="string"&&hexString.substring(0,2)!=="0x"){hexString="0x"+hexString}return bytes_1.arrayify(hexString)}function zpad(value,length){value=String(value);while(value.length<length){value="0"+value}return value}function getPassword(password){if(typeof password==="string"){return utf8_1.toUtf8Bytes(password,utf8_1.UnicodeNormalizationForm.NFKC)}return bytes_1.arrayify(password)}function searchPath(object,path){var currentChild=object;var comps=path.toLowerCase().split("/");for(var i=0;i<comps.length;i++){var matchingChild=null;for(var key in currentChild){if(key.toLowerCase()===comps[i]){matchingChild=currentChild[key];break}}if(matchingChild===null){return null}currentChild=matchingChild}return currentChild}function decryptCrowdsale(json,password){var data=JSON.parse(json);password=getPassword(password);var ethaddr=address_1.getAddress(searchPath(data,"ethaddr"));var encseed=looseArrayify(searchPath(data,"encseed"));if(!encseed||encseed.length%16!==0){throw new Error("invalid encseed")}var key=pbkdf2_1.pbkdf2(password,password,2e3,32,"sha256").slice(0,16);var iv=encseed.slice(0,16);var encryptedSeed=encseed.slice(16);var aesCbc=new aes_js_1.default.ModeOfOperation.cbc(key,iv);var seed=bytes_1.arrayify(aesCbc.decrypt(encryptedSeed));seed=aes_js_1.default.padding.pkcs7.strip(seed);var seedHex="";for(var i=0;i<seed.length;i++){seedHex+=String.fromCharCode(seed[i])}var seedHexBytes=utf8_1.toUtf8Bytes(seedHex);var signingKey=new signing_key_1.SigningKey(keccak256_1.keccak256(seedHexBytes));if(signingKey.address!==ethaddr){throw new Error("corrupt crowdsale wallet")}return signingKey}exports.decryptCrowdsale=decryptCrowdsale;function decrypt(json,password,progressCallback){var data=JSON.parse(json);var passwordBytes=getPassword(password);var decrypt=function(key,ciphertext){var cipher=searchPath(data,"crypto/cipher");if(cipher==="aes-128-ctr"){var iv=looseArrayify(searchPath(data,"crypto/cipherparams/iv"));var counter=new aes_js_1.default.Counter(iv);var aesCtr=new aes_js_1.default.ModeOfOperation.ctr(key,counter);return bytes_1.arrayify(aesCtr.decrypt(ciphertext))}return null};var computeMAC=function(derivedHalf,ciphertext){return keccak256_1.keccak256(bytes_1.concat([derivedHalf,ciphertext]))};var getSigningKey=function(key,reject){var ciphertext=looseArrayify(searchPath(data,"crypto/ciphertext"));var computedMAC=bytes_1.hexlify(computeMAC(key.slice(16,32),ciphertext)).substring(2);if(computedMAC!==searchPath(data,"crypto/mac").toLowerCase()){reject(new Error("invalid password"));return null}var privateKey=decrypt(key.slice(0,16),ciphertext);var mnemonicKey=key.slice(32,64);if(!privateKey){reject(new Error("unsupported cipher"));return null}var signingKey=new signing_key_1.SigningKey(privateKey);if(signingKey.address!==address_1.getAddress(data.address)){reject(new Error("address mismatch"));return null}if(searchPath(data,"x-ethers/version")==="0.1"){var mnemonicCiphertext=looseArrayify(searchPath(data,"x-ethers/mnemonicCiphertext"));var mnemonicIv=looseArrayify(searchPath(data,"x-ethers/mnemonicCounter"));var mnemonicCounter=new aes_js_1.default.Counter(mnemonicIv);var mnemonicAesCtr=new aes_js_1.default.ModeOfOperation.ctr(mnemonicKey,mnemonicCounter);var path=searchPath(data,"x-ethers/path")||HDNode.defaultPath;var entropy=bytes_1.arrayify(mnemonicAesCtr.decrypt(mnemonicCiphertext));var mnemonic=HDNode.entropyToMnemonic(entropy);var node=HDNode.fromMnemonic(mnemonic).derivePath(path);if(node.privateKey!=bytes_1.hexlify(privateKey)){reject(new Error("mnemonic mismatch"));return null}signingKey=new signing_key_1.SigningKey(node)}return signingKey};return new Promise(function(resolve,reject){var kdf=searchPath(data,"crypto/kdf");if(kdf&&typeof kdf==="string"){if(kdf.toLowerCase()==="scrypt"){var salt=looseArrayify(searchPath(data,"crypto/kdfparams/salt"));var N=parseInt(searchPath(data,"crypto/kdfparams/n"));var r=parseInt(searchPath(data,"crypto/kdfparams/r"));var p=parseInt(searchPath(data,"crypto/kdfparams/p"));if(!N||!r||!p){reject(new Error("unsupported key-derivation function parameters"));return}if((N&N-1)!==0){reject(new Error("unsupported key-derivation function parameter value for N"));return}var dkLen=parseInt(searchPath(data,"crypto/kdfparams/dklen"));if(dkLen!==32){reject(new Error("unsupported key-derivation derived-key length"));return}if(progressCallback){progressCallback(0)}scrypt_js_1.default(passwordBytes,salt,N,r,p,64,function(error,progress,key){if(error){error.progress=progress;reject(error)}else if(key){key=bytes_1.arrayify(key);var signingKey=getSigningKey(key,reject);if(!signingKey){return}if(progressCallback){progressCallback(1)}resolve(signingKey)}else if(progressCallback){return progressCallback(progress)}})}else if(kdf.toLowerCase()==="pbkdf2"){var salt=looseArrayify(searchPath(data,"crypto/kdfparams/salt"));var prfFunc=null;var prf=searchPath(data,"crypto/kdfparams/prf");if(prf==="hmac-sha256"){prfFunc="sha256"}else if(prf==="hmac-sha512"){prfFunc="sha512"}else{reject(new Error("unsupported prf"));return}var c=parseInt(searchPath(data,"crypto/kdfparams/c"));var dkLen=parseInt(searchPath(data,"crypto/kdfparams/dklen"));if(dkLen!==32){reject(new Error("unsupported key-derivation derived-key length"));return}var key=pbkdf2_1.pbkdf2(passwordBytes,salt,c,dkLen,prfFunc);var signingKey=getSigningKey(key,reject);if(!signingKey){return}resolve(signingKey)}else{reject(new Error("unsupported key-derivation function"))}}else{reject(new Error("unsupported key-derivation function"))}})}exports.decrypt=decrypt;function encrypt(privateKey,password,options,progressCallback){if(typeof options==="function"&&!progressCallback){progressCallback=options;options={}}if(!options){options={}}var privateKeyBytes=null;if(signing_key_1.SigningKey.isSigningKey(privateKey)){privateKeyBytes=bytes_1.arrayify(privateKey.privateKey)}else{privateKeyBytes=bytes_1.arrayify(privateKey)}if(privateKeyBytes.length!==32){throw new Error("invalid private key")}var passwordBytes=getPassword(password);var entropy=null;if(options.entropy){entropy=bytes_1.arrayify(options.entropy)}if(options.mnemonic){if(entropy){if(HDNode.entropyToMnemonic(entropy)!==options.mnemonic){throw new Error("entropy and mnemonic mismatch")}}else{entropy=bytes_1.arrayify(HDNode.mnemonicToEntropy(options.mnemonic))}}var path=options.path;if(entropy&&!path){path=HDNode.defaultPath}var client=options.client;if(!client){client="ethers.js"}var salt=null;if(options.salt){salt=bytes_1.arrayify(options.salt)}else{salt=random_bytes_1.randomBytes(32)}var iv=null;if(options.iv){iv=bytes_1.arrayify(options.iv);if(iv.length!==16){throw new Error("invalid iv")}}else{iv=random_bytes_1.randomBytes(16)}var uuidRandom=null;if(options.uuid){uuidRandom=bytes_1.arrayify(options.uuid);if(uuidRandom.length!==16){throw new Error("invalid uuid")}}else{uuidRandom=random_bytes_1.randomBytes(16)}var N=1<<17,r=8,p=1;if(options.scrypt){if(options.scrypt.N){N=options.scrypt.N}if(options.scrypt.r){r=options.scrypt.r}if(options.scrypt.p){p=options.scrypt.p}}return new Promise(function(resolve,reject){if(progressCallback){progressCallback(0)}scrypt_js_1.default(passwordBytes,salt,N,r,p,64,function(error,progress,key){if(error){error.progress=progress;reject(error)}else if(key){key=bytes_1.arrayify(key);var derivedKey=key.slice(0,16);var macPrefix=key.slice(16,32);var mnemonicKey=key.slice(32,64);var address=new signing_key_1.SigningKey(privateKeyBytes).address;var counter=new aes_js_1.default.Counter(iv);var aesCtr=new aes_js_1.default.ModeOfOperation.ctr(derivedKey,counter);var ciphertext=bytes_1.arrayify(aesCtr.encrypt(privateKeyBytes));var mac=keccak256_1.keccak256(bytes_1.concat([macPrefix,ciphertext]));
var data={address:address.substring(2).toLowerCase(),id:uuid_1.default.v4({random:uuidRandom}),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:bytes_1.hexlify(iv).substring(2)},ciphertext:bytes_1.hexlify(ciphertext).substring(2),kdf:"scrypt",kdfparams:{salt:bytes_1.hexlify(salt).substring(2),n:N,dklen:32,p:p,r:r},mac:mac.substring(2)}};if(entropy){var mnemonicIv=random_bytes_1.randomBytes(16);var mnemonicCounter=new aes_js_1.default.Counter(mnemonicIv);var mnemonicAesCtr=new aes_js_1.default.ModeOfOperation.ctr(mnemonicKey,mnemonicCounter);var mnemonicCiphertext=bytes_1.arrayify(mnemonicAesCtr.encrypt(entropy));var now=new Date;var timestamp=now.getUTCFullYear()+"-"+zpad(now.getUTCMonth()+1,2)+"-"+zpad(now.getUTCDate(),2)+"T"+zpad(now.getUTCHours(),2)+"-"+zpad(now.getUTCMinutes(),2)+"-"+zpad(now.getUTCSeconds(),2)+".0Z";data["x-ethers"]={client:client,gethFilename:"UTC--"+timestamp+"--"+data.address,mnemonicCounter:bytes_1.hexlify(mnemonicIv).substring(2),mnemonicCiphertext:bytes_1.hexlify(mnemonicCiphertext).substring(2),version:"0.1"}}if(progressCallback){progressCallback(1)}resolve(JSON.stringify(data))}else if(progressCallback){return progressCallback(progress)}})})}exports.encrypt=encrypt},{"./address":59,"./bytes":62,"./hdnode":64,"./keccak256":69,"./pbkdf2":71,"./random-bytes":73,"./signing-key":79,"./utf8":83,"aes-js":8,"scrypt-js":43,uuid:47}],77:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var hash_js_1=__importDefault(require("hash.js"));var bytes_1=require("./bytes");function sha256(data){return"0x"+hash_js_1.default.sha256().update(bytes_1.arrayify(data)).digest("hex")}exports.sha256=sha256;function sha512(data){return"0x"+hash_js_1.default.sha512().update(bytes_1.arrayify(data)).digest("hex")}exports.sha512=sha512},{"./bytes":62,"hash.js":27}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});require("setimmediate");exports.platform="browser"},{setimmediate:44}],79:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var hdnode_1=require("./hdnode");var bytes_1=require("./bytes");var properties_1=require("./properties");var secp256k1_1=require("./secp256k1");var errors=__importStar(require("../errors"));var SigningKey=function(){function SigningKey(privateKey){errors.checkNew(this,SigningKey);var privateKeyBytes=null;if(hdnode_1.HDNode.isHDNode(privateKey)){properties_1.defineReadOnly(this,"mnemonic",privateKey.mnemonic);properties_1.defineReadOnly(this,"path",privateKey.path);privateKeyBytes=bytes_1.arrayify(privateKey.privateKey)}else{if(typeof privateKey==="string"&&privateKey.match(/^[0-9a-f]*$/i)&&privateKey.length===64){privateKey="0x"+privateKey}privateKeyBytes=bytes_1.arrayify(privateKey)}try{if(privateKeyBytes.length!==32){errors.throwError("exactly 32 bytes required",errors.INVALID_ARGUMENT,{arg:"privateKey",value:"[REDACTED]"})}}catch(error){var params={arg:"privateKey",reason:error.reason,value:"[REDACTED]"};if(error.value){if(typeof error.value.length==="number"){params.length=error.value.length}params.type=typeof error.value}errors.throwError("invalid private key",error.code,params)}properties_1.defineReadOnly(this,"privateKey",bytes_1.hexlify(privateKeyBytes));properties_1.defineReadOnly(this,"keyPair",new secp256k1_1.KeyPair(privateKeyBytes));properties_1.defineReadOnly(this,"publicKey",this.keyPair.publicKey);properties_1.defineReadOnly(this,"address",secp256k1_1.computeAddress(this.keyPair.publicKey));properties_1.setType(this,"SigningKey")}SigningKey.prototype.signDigest=function(digest){return this.keyPair.sign(digest)};SigningKey.prototype.computeSharedSecret=function(key){return this.keyPair.computeSharedSecret(bytes_1.arrayify(key))};SigningKey.isSigningKey=function(value){return properties_1.isType(value,"SigningKey")};return SigningKey}();exports.SigningKey=SigningKey},{"../errors":5,"./bytes":62,"./hdnode":64,"./properties":72,"./secp256k1":75}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bignumber_1=require("./bignumber");var bytes_1=require("./bytes");var utf8_1=require("./utf8");var keccak256_1=require("./keccak256");var sha2_1=require("./sha2");var regexBytes=new RegExp("^bytes([0-9]+)$");var regexNumber=new RegExp("^(u?int)([0-9]*)$");var regexArray=new RegExp("^(.*)\\[([0-9]*)\\]$");var Zeros="0000000000000000000000000000000000000000000000000000000000000000";function _pack(type,value,isArray){switch(type){case"address":if(isArray){return bytes_1.padZeros(value,32)}return bytes_1.arrayify(value);case"string":return utf8_1.toUtf8Bytes(value);case"bytes":return bytes_1.arrayify(value);case"bool":value=value?"0x01":"0x00";if(isArray){return bytes_1.padZeros(value,32)}return bytes_1.arrayify(value)}var match=type.match(regexNumber);if(match){var size=parseInt(match[2]||"256");if(size%8!=0||size===0||size>256){throw new Error("invalid number type - "+type)}if(isArray){size=256}value=bignumber_1.bigNumberify(value).toTwos(size);return bytes_1.padZeros(value,size/8)}match=type.match(regexBytes);if(match){var size=parseInt(match[1]);if(String(size)!=match[1]||size===0||size>32){throw new Error("invalid number type - "+type)}if(bytes_1.arrayify(value).byteLength!==size){throw new Error("invalid value for "+type)}if(isArray){return bytes_1.arrayify((value+Zeros).substring(0,66))}return value}match=type.match(regexArray);if(match&&Array.isArray(value)){var baseType=match[1];var count=parseInt(match[2]||String(value.length));if(count!=value.length){throw new Error("invalid value for "+type)}var result=[];value.forEach(function(value){result.push(_pack(baseType,value,true))});return bytes_1.concat(result)}throw new Error("unknown type - "+type)}function pack(types,values){if(types.length!=values.length){throw new Error("type/value count mismatch")}var tight=[];types.forEach(function(type,index){tight.push(_pack(type,values[index]))});return bytes_1.hexlify(bytes_1.concat(tight))}exports.pack=pack;function keccak256(types,values){return keccak256_1.keccak256(pack(types,values))}exports.keccak256=keccak256;function sha256(types,values){return sha2_1.sha256(pack(types,values))}exports.sha256=sha256},{"./bignumber":61,"./bytes":62,"./keccak256":69,"./sha2":77,"./utf8":83}],81:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var constants_1=require("../constants");var errors=__importStar(require("../errors"));var secp256k1_1=require("./secp256k1");var address_1=require("./address");var bignumber_1=require("./bignumber");var bytes_1=require("./bytes");var keccak256_1=require("./keccak256");var properties_1=require("./properties");var RLP=__importStar(require("./rlp"));var abstract_provider_1=require("../providers/abstract-provider");function handleAddress(value){if(value==="0x"){return null}return address_1.getAddress(value)}function handleNumber(value){if(value==="0x"){return constants_1.Zero}return bignumber_1.bigNumberify(value)}var transactionFields=[{name:"nonce",maxLength:32},{name:"gasPrice",maxLength:32},{name:"gasLimit",maxLength:32},{name:"to",length:20},{name:"value",maxLength:32},{name:"data"}];var allowedTransactionKeys={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true};function serialize(transaction,signature){properties_1.checkProperties(transaction,allowedTransactionKeys);var raw=[];transactionFields.forEach(function(fieldInfo){var value=transaction[fieldInfo.name]||[];value=bytes_1.arrayify(bytes_1.hexlify(value));if(fieldInfo.length&&value.length!==fieldInfo.length&&value.length>0){errors.throwError("invalid length for "+fieldInfo.name,errors.INVALID_ARGUMENT,{arg:"transaction"+fieldInfo.name,value:value})}if(fieldInfo.maxLength){value=bytes_1.stripZeros(value);if(value.length>fieldInfo.maxLength){errors.throwError("invalid length for "+fieldInfo.name,errors.INVALID_ARGUMENT,{arg:"transaction"+fieldInfo.name,value:value})}}raw.push(bytes_1.hexlify(value))});if(transaction.chainId!=null&&transaction.chainId!==0){raw.push(bytes_1.hexlify(transaction.chainId));raw.push("0x");raw.push("0x")}var unsignedTransaction=RLP.encode(raw);if(!signature){return unsignedTransaction}var sig=bytes_1.splitSignature(signature);var v=27+sig.recoveryParam;if(raw.length===9){raw.pop();raw.pop();raw.pop();v+=transaction.chainId*2+8}raw.push(bytes_1.hexlify(v));raw.push(bytes_1.stripZeros(bytes_1.arrayify(sig.r)));raw.push(bytes_1.stripZeros(bytes_1.arrayify(sig.s)));return RLP.encode(raw)}exports.serialize=serialize;function parse(rawTransaction){var transaction=RLP.decode(rawTransaction);if(transaction.length!==9&&transaction.length!==6){errors.throwError("invalid raw transaction",errors.INVALID_ARGUMENT,{arg:"rawTransactin",value:rawTransaction})}var tx={nonce:handleNumber(transaction[0]).toNumber(),gasPrice:handleNumber(transaction[1]),gasLimit:handleNumber(transaction[2]),to:handleAddress(transaction[3]),value:handleNumber(transaction[4]),data:transaction[5],chainId:0};if(transaction.length===6){return tx}try{tx.v=bignumber_1.bigNumberify(transaction[6]).toNumber()}catch(error){console.log(error);return tx}tx.r=bytes_1.hexZeroPad(transaction[7],32);tx.s=bytes_1.hexZeroPad(transaction[8],32);if(bignumber_1.bigNumberify(tx.r).isZero()&&bignumber_1.bigNumberify(tx.s).isZero()){tx.chainId=tx.v;tx.v=0}else{tx.chainId=Math.floor((tx.v-35)/2);if(tx.chainId<0){tx.chainId=0}var recoveryParam=tx.v-27;var raw=transaction.slice(0,6);if(tx.chainId!==0){raw.push(bytes_1.hexlify(tx.chainId));raw.push("0x");raw.push("0x");recoveryParam-=tx.chainId*2+8}var digest=keccak256_1.keccak256(RLP.encode(raw));try{tx.from=secp256k1_1.recoverAddress(digest,{r:bytes_1.hexlify(tx.r),s:bytes_1.hexlify(tx.s),recoveryParam:recoveryParam})}catch(error){console.log(error)}tx.hash=keccak256_1.keccak256(rawTransaction)}return tx}exports.parse=parse;function populateTransaction(transaction,provider,from){if(!abstract_provider_1.Provider.isProvider(provider)){errors.throwError("missing provider",errors.INVALID_ARGUMENT,{argument:"provider",value:provider})}properties_1.checkProperties(transaction,allowedTransactionKeys);var tx=properties_1.shallowCopy(transaction);if(tx.to!=null){tx.to=provider.resolveName(tx.to)}if(tx.gasPrice==null){tx.gasPrice=provider.getGasPrice()}if(tx.nonce==null){tx.nonce=provider.getTransactionCount(from)}if(tx.gasLimit==null){var estimate=properties_1.shallowCopy(tx);estimate.from=from;tx.gasLimit=provider.estimateGas(estimate)}if(tx.chainId==null){tx.chainId=provider.getNetwork().then(function(network){return network.chainId})}return properties_1.resolveProperties(tx)}exports.populateTransaction=populateTransaction},{"../constants":3,"../errors":5,"../providers/abstract-provider":49,"./address":59,"./bignumber":61,"./bytes":62,"./keccak256":69,"./properties":72,"./rlp":74,"./secp256k1":75}],82:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var constants_1=require("../constants");var errors=__importStar(require("../errors"));var bignumber_1=require("./bignumber");var names=["wei","kwei","Mwei","Gwei","szabo","finney","ether"];var unitInfos={};function _getUnitInfo(value){return{decimals:value.length-1,tenPower:bignumber_1.bigNumberify(value)}}(function(){var value="1";names.forEach(function(name){var info=_getUnitInfo(value);unitInfos[name.toLowerCase()]=info;unitInfos[String(info.decimals)]=info;value+="000"})})();function getUnitInfo(name){var info=unitInfos[String(name).toLowerCase()];if(!info&&typeof name==="number"&&parseInt(String(name))==name&&name>=0&&name<=256){var value="1";for(var i=0;i<name;i++){value+="0"}info=_getUnitInfo(value)}if(!info){errors.throwError("invalid unitType",errors.INVALID_ARGUMENT,{argument:"name",value:name})}return info}function commify(value){var comps=String(value).split(".");if(comps.length>2||!comps[0].match(/^-?[0-9]*$/)||comps[1]&&!comps[1].match(/^[0-9]*$/)||value==="."||value==="-."){errors.throwError("invalid value",errors.INVALID_ARGUMENT,{argument:"value",value:value})}var whole=comps[0];var negative="";if(whole.substring(0,1)==="-"){negative="-";whole=whole.substring(1)}while(whole.substring(0,1)==="0"){whole=whole.substring(1)}if(whole===""){whole="0"}var suffix="";if(comps.length===2){suffix="."+(comps[1]||"0")}var formatted=[];while(whole.length){if(whole.length<=3){formatted.unshift(whole);break}else{var index=whole.length-3;formatted.unshift(whole.substring(index));whole=whole.substring(0,index)}}return negative+formatted.join(",")+suffix}exports.commify=commify;function formatUnits(value,unitType){var unitInfo=getUnitInfo(unitType);value=bignumber_1.bigNumberify(value);var negative=value.lt(constants_1.Zero);if(negative){value=value.mul(constants_1.NegativeOne)}var fraction=value.mod(unitInfo.tenPower).toString();while(fraction.length<unitInfo.decimals){fraction="0"+fraction}fraction=fraction.match(/^([0-9]*[1-9]|0)(0*)/)[1];var whole=value.div(unitInfo.tenPower).toString();value=whole+"."+fraction;if(negative){value="-"+value}return value}exports.formatUnits=formatUnits;function parseUnits(value,unitType){if(unitType==null){unitType=18}var unitInfo=getUnitInfo(unitType);if(typeof value!=="string"||!value.match(/^-?[0-9.,]+$/)){errors.throwError("invalid decimal value",errors.INVALID_ARGUMENT,{arg:"value",value:value})}if(unitInfo.decimals===0){return bignumber_1.bigNumberify(value)}var negative=value.substring(0,1)==="-";if(negative){value=value.substring(1)}if(value==="."){errors.throwError("missing value",errors.INVALID_ARGUMENT,{arg:"value",value:value})}var comps=value.split(".");if(comps.length>2){errors.throwError("too many decimal points",errors.INVALID_ARGUMENT,{arg:"value",value:value})}var whole=comps[0],fraction=comps[1];if(!whole){whole="0"}if(!fraction){fraction="0"}if(fraction.length>unitInfo.decimals){errors.throwError("underflow occurred",errors.NUMERIC_FAULT,{operation:"division",fault:"underflow"})}while(fraction.length<unitInfo.decimals){fraction+="0"}var wholeValue=bignumber_1.bigNumberify(whole);var fractionValue=bignumber_1.bigNumberify(fraction);var wei=wholeValue.mul(unitInfo.tenPower).add(fractionValue);if(negative){wei=wei.mul(constants_1.NegativeOne)}return wei}exports.parseUnits=parseUnits;function formatEther(wei){return formatUnits(wei,18)}exports.formatEther=formatEther;function parseEther(ether){return parseUnits(ether,18)}exports.parseEther=parseEther},{"../constants":3,"../errors":5,"./bignumber":61}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var constants_1=require("../constants");var errors_1=require("../errors");var bytes_1=require("./bytes");var UnicodeNormalizationForm;(function(UnicodeNormalizationForm){UnicodeNormalizationForm["current"]="";UnicodeNormalizationForm["NFC"]="NFC";UnicodeNormalizationForm["NFD"]="NFD";UnicodeNormalizationForm["NFKC"]="NFKC";UnicodeNormalizationForm["NFKD"]="NFKD"})(UnicodeNormalizationForm=exports.UnicodeNormalizationForm||(exports.UnicodeNormalizationForm={}));function toUtf8Bytes(str,form){if(form===void 0){form=UnicodeNormalizationForm.current}if(form!=UnicodeNormalizationForm.current){errors_1.checkNormalize();str=str.normalize(form)}var result=[];for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c<128){result.push(c)}else if(c<2048){result.push(c>>6|192);result.push(c&63|128)}else if((c&64512)==55296){i++;var c2=str.charCodeAt(i);if(i>=str.length||(c2&64512)!==56320){throw new Error("invalid utf-8 string")}c=65536+((c&1023)<<10)+(c2&1023);result.push(c>>18|240);result.push(c>>12&63|128);result.push(c>>6&63|128);result.push(c&63|128)}else{result.push(c>>12|224);result.push(c>>6&63|128);result.push(c&63|128)}}return bytes_1.arrayify(result)}exports.toUtf8Bytes=toUtf8Bytes;function toUtf8String(bytes,ignoreErrors){bytes=bytes_1.arrayify(bytes);var result="";var i=0;while(i<bytes.length){var c=bytes[i++];if(c>>7===0){result+=String.fromCharCode(c);continue}var extraLength=null;var overlongMask=null;if((c&224)===192){extraLength=1;overlongMask=127}else if((c&240)===224){extraLength=2;overlongMask=2047}else if((c&248)===240){extraLength=3;overlongMask=65535}else{if(!ignoreErrors){if((c&192)===128){throw new Error("invalid utf8 byte sequence; unexpected continuation byte")}throw new Error("invalid utf8 byte sequence; invalid prefix")}continue}if(i+extraLength>bytes.length){if(!ignoreErrors){throw new Error("invalid utf8 byte sequence; too short")}for(;i<bytes.length;i++){if(bytes[i]>>6!==2){break}}continue}var res=c&(1<<8-extraLength-1)-1;for(var j=0;j<extraLength;j++){var nextChar=bytes[i];if((nextChar&192)!=128){res=null;break}res=res<<6|nextChar&63;i++}if(res===null){if(!ignoreErrors){throw new Error("invalid utf8 byte sequence; invalid continuation byte")}continue}if(res<=overlongMask){if(!ignoreErrors){throw new Error("invalid utf8 byte sequence; overlong")}continue}if(res>1114111){if(!ignoreErrors){throw new Error("invalid utf8 byte sequence; out-of-range")}continue}if(res>=55296&&res<=57343){if(!ignoreErrors){throw new Error("invalid utf8 byte sequence; utf-16 surrogate")}continue}if(res<=65535){result+=String.fromCharCode(res);continue}res-=65536;result+=String.fromCharCode((res>>10&1023)+55296,(res&1023)+56320)}return result}exports.toUtf8String=toUtf8String;function formatBytes32String(text){var bytes=toUtf8Bytes(text);if(bytes.length>31){throw new Error("bytes32 string must be less than 32 bytes")}return bytes_1.hexlify(bytes_1.concat([bytes,constants_1.HashZero]).slice(0,32))}exports.formatBytes32String=formatBytes32String;function parseBytes32String(bytes){var data=bytes_1.arrayify(bytes);if(data.length!==32){throw new Error("invalid bytes32 - not 32 bytes long")}if(data[31]!==0){throw new Error("invalid bytes32 sdtring - no null terminator")}var length=31;while(data[length-1]===0){length--}return toUtf8String(data.slice(0,length))}exports.parseBytes32String=parseBytes32String},{"../constants":3,"../errors":5,"./bytes":62}],84:[function(require,module,exports){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var xmlhttprequest_1=require("xmlhttprequest");var base64_1=require("./base64");var properties_1=require("./properties");var utf8_1=require("./utf8");var errors=__importStar(require("../errors"));function fetchJson(connection,json,processFunc){var headers={};var url=null;var timeout=2*60*1e3;if(typeof connection==="string"){url=connection}else if(typeof connection==="object"){if(connection.url==null){errors.throwError("missing URL",errors.MISSING_ARGUMENT,{arg:"url"})}url=connection.url;if(typeof connection.timeout==="number"&&connection.timeout>0){timeout=connection.timeout}if(connection.headers){for(var key in connection.headers){headers[key.toLowerCase()]={key:key,value:String(connection.headers[key])}}}if(connection.user!=null&&connection.password!=null){if(url.substring(0,6)!=="https:"&&connection.allowInsecure!==true){errors.throwError("basic authentication requires a secure https url",errors.INVALID_ARGUMENT,{arg:"url",url:url,user:connection.user,password:"[REDACTED]"})}var authorization=connection.user+":"+connection.password;headers["authorization"]={key:"Authorization",value:"Basic "+base64_1.encode(utf8_1.toUtf8Bytes(authorization))}}}return new Promise(function(resolve,reject){var request=new xmlhttprequest_1.XMLHttpRequest;var timer=null;timer=setTimeout(function(){if(timer==null){return}timer=null;reject(new Error("timeout"));setTimeout(function(){request.abort()},0)},timeout);var cancelTimeout=function(){if(timer==null){return}clearTimeout(timer);timer=null};if(json){request.open("POST",url,true);headers["content-type"]={key:"Content-Type",value:"application/json"}}else{request.open("GET",url,true)}Object.keys(headers).forEach(function(key){var header=headers[key];request.setRequestHeader(header.key,header.value)});request.onreadystatechange=function(){if(request.readyState!==4){return}if(request.status!=200){cancelTimeout();var error=new Error("invalid response - "+request.status);error.statusCode=request.status;if(request.responseText){error.responseText=request.responseText}reject(error);return}var result=null;try{result=JSON.parse(request.responseText)}catch(error){cancelTimeout();var jsonError=new Error("invalid json response");jsonError.orginialError=error;jsonError.responseText=request.responseText;jsonError.url=url;reject(jsonError);return}if(processFunc){try{result=processFunc(result)}catch(error){cancelTimeout();error.url=url;error.body=json;error.responseText=request.responseText;reject(error);return}}cancelTimeout();resolve(result)};request.onerror=function(error){cancelTimeout();reject(error)};try{if(json){request.send(json)}else{request.send()}}catch(error){cancelTimeout();var connectionError=new Error("connection error");connectionError.error=error;reject(connectionError)}})}exports.fetchJson=fetchJson;function poll(func,options){if(!options){options={}}options=properties_1.shallowCopy(options);if(options.floor==null){options.floor=0}if(options.ceiling==null){options.ceiling=1e4}if(options.interval==null){options.interval=250}return new Promise(function(resolve,reject){var timer=null;var done=false;var cancel=function(){if(done){return false}done=true;if(timer){clearTimeout(timer)}return true};if(options.timeout){timer=setTimeout(function(){if(cancel()){reject(new Error("timeout"))}},options.timeout)}var attempt=0;function check(){return func().then(function(result){if(result!==undefined){if(cancel()){resolve(result)}}else if(options.onceBlock){options.onceBlock.once("block",check)}else if(!done){attempt++;var timeout=options.interval*parseInt(String(Math.random()*Math.pow(2,attempt)));if(timeout<options.floor){timeout=options.floor}if(timeout>options.ceiling){timeout=options.ceiling}setTimeout(check,timeout)}return null},function(error){if(cancel()){reject(error)}})}check()})}exports.poll=poll},{"../errors":5,"./base64":60,"./properties":72,"./utf8":83,xmlhttprequest:48}],85:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var exportWordlist=false;var hash_1=require("../utils/hash");var properties_1=require("../utils/properties");function check(wordlist){var words=[];for(var i=0;i<2048;i++){var word=wordlist.getWord(i);if(i!==wordlist.getWordIndex(word)){return"0x"}words.push(word)}return hash_1.id(words.join("\n")+"\n")}exports.check=check;var Wordlist=function(){function Wordlist(locale){properties_1.defineReadOnly(this,"locale",locale)}Wordlist.prototype.split=function(mnemonic){return mnemonic.toLowerCase().split(/ +/g)};Wordlist.prototype.join=function(words){return words.join(" ")};return Wordlist}();exports.Wordlist=Wordlist;function register(lang,name){if(!name){name=lang.locale}if(exportWordlist){var g=global;if(!g.wordlists){properties_1.defineReadOnly(g,"wordlists",{})}if(!g.wordlists[name]){properties_1.defineReadOnly(g.wordlists,name,lang)}if(g.ethers&&g.ethers.wordlists){if(!g.ethers.wordlists[name]){properties_1.defineReadOnly(g.ethers.wordlists,name,lang)}}}}exports.register=register}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/hash":63,"../utils/properties":72}],86:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var bytes_1=require("./utils/bytes");var hash_1=require("./utils/hash");var hdnode_1=require("./utils/hdnode");var json_wallet_1=require("./utils/json-wallet");var keccak256_1=require("./utils/keccak256");var properties_1=require("./utils/properties");var random_bytes_1=require("./utils/random-bytes");var secretStorage=__importStar(require("./utils/secret-storage"));var signing_key_1=require("./utils/signing-key");var transaction_1=require("./utils/transaction");var abstract_signer_1=require("./abstract-signer");var abstract_provider_1=require("./providers/abstract-provider");var errors=__importStar(require("./errors"));var Wallet=function(_super){__extends(Wallet,_super);function Wallet(privateKey,provider){var _this=_super.call(this)||this;errors.checkNew(_this,Wallet);if(signing_key_1.SigningKey.isSigningKey(privateKey)){properties_1.defineReadOnly(_this,"signingKey",privateKey)}else{properties_1.defineReadOnly(_this,"signingKey",new signing_key_1.SigningKey(privateKey))}properties_1.defineReadOnly(_this,"provider",provider);return _this}Object.defineProperty(Wallet.prototype,"address",{get:function(){return this.signingKey.address},enumerable:true,configurable:true});Object.defineProperty(Wallet.prototype,"mnemonic",{get:function(){return this.signingKey.mnemonic},enumerable:true,configurable:true});Object.defineProperty(Wallet.prototype,"path",{get:function(){return this.signingKey.mnemonic},enumerable:true,configurable:true});Object.defineProperty(Wallet.prototype,"privateKey",{get:function(){return this.signingKey.privateKey},enumerable:true,configurable:true});Wallet.prototype.connect=function(provider){if(!abstract_provider_1.Provider.isProvider(provider)){errors.throwError("invalid provider",errors.INVALID_ARGUMENT,{argument:"provider",value:provider})}return new Wallet(this.signingKey,provider)};Wallet.prototype.getAddress=function(){return Promise.resolve(this.address)};Wallet.prototype.sign=function(transaction){var _this=this;return properties_1.resolveProperties(transaction).then(function(tx){var rawTx=transaction_1.serialize(tx);var signature=_this.signingKey.signDigest(keccak256_1.keccak256(rawTx));return transaction_1.serialize(tx,signature)})};Wallet.prototype.signMessage=function(message){return Promise.resolve(bytes_1.joinSignature(this.signingKey.signDigest(hash_1.hashMessage(message))))};Wallet.prototype.getBalance=function(blockTag){if(!this.provider){throw new Error("missing provider")}return this.provider.getBalance(this.address,blockTag)};Wallet.prototype.getTransactionCount=function(blockTag){if(!this.provider){throw new Error("missing provider")}return this.provider.getTransactionCount(this.address,blockTag)};Wallet.prototype.sendTransaction=function(transaction){var _this=this;return transaction_1.populateTransaction(transaction,this.provider,this.address).then(function(tx){return _this.sign(tx).then(function(signedTransaction){return _this.provider.sendTransaction(signedTransaction)})})};Wallet.prototype.encrypt=function(password,options,progressCallback){if(typeof options==="function"&&!progressCallback){progressCallback=options;options={}}if(progressCallback&&typeof progressCallback!=="function"){throw new Error("invalid callback")}if(!options){options={}}if(this.mnemonic){options=properties_1.shallowCopy(options);options.mnemonic=this.mnemonic;options.path=this.path}return secretStorage.encrypt(this.privateKey,password,options,progressCallback)};Wallet.createRandom=function(options){var entropy=random_bytes_1.randomBytes(16);if(!options){options={}}if(options.extraEntropy){entropy=bytes_1.arrayify(keccak256_1.keccak256(bytes_1.concat([entropy,options.extraEntropy])).substring(0,34))}var mnemonic=hdnode_1.entropyToMnemonic(entropy,options.locale);return Wallet.fromMnemonic(mnemonic,options.path,options.locale)};Wallet.fromEncryptedJson=function(json,password,progressCallback){if(json_wallet_1.isCrowdsaleWallet(json)){try{if(progressCallback){progressCallback(0)}var privateKey=secretStorage.decryptCrowdsale(json,password);if(progressCallback){progressCallback(1)}return Promise.resolve(new Wallet(privateKey))}catch(error){return Promise.reject(error)}}else if(json_wallet_1.isSecretStorageWallet(json)){return secretStorage.decrypt(json,password,progressCallback).then(function(signingKey){return new Wallet(signingKey)})}return Promise.reject("invalid wallet JSON")};Wallet.fromMnemonic=function(mnemonic,path,wordlist){if(!path){path=hdnode_1.defaultPath}return new Wallet(hdnode_1.fromMnemonic(mnemonic,wordlist).derivePath(path))};return Wallet}(abstract_signer_1.Signer);exports.Wallet=Wallet},{"./abstract-signer":2,"./errors":5,"./providers/abstract-provider":49,"./utils/bytes":62,"./utils/hash":63,"./utils/hdnode":64,"./utils/json-wallet":68,"./utils/keccak256":69,"./utils/properties":72,"./utils/random-bytes":73,"./utils/secret-storage":76,"./utils/signing-key":79,"./utils/transaction":81}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var lang_en_1=require("../wordlists/lang-en");var en=lang_en_1.langEn;exports.en=en},{"../wordlists/lang-en":88}],88:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var wordlist_1=require("../utils/wordlist");var words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";
var wordlist=null;function loadWords(lang){if(wordlist!=null){return}wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" ");if(wordlist_1.check(lang)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"){wordlist=null;throw new Error("BIP39 Wordlist for en (English) FAILED")}}var LangEn=function(_super){__extends(LangEn,_super);function LangEn(){return _super.call(this,"en")||this}LangEn.prototype.getWord=function(index){loadWords(this);return wordlist[index]};LangEn.prototype.getWordIndex=function(word){loadWords(this);return wordlist.indexOf(word)};return LangEn}(wordlist_1.Wordlist);var langEn=new LangEn;exports.langEn=langEn;wordlist_1.register(langEn)},{"../utils/wordlist":85}]},{},[7])(7)});
</script>
        <script type="text/javascript">/* ./static/script.js */ (function(window){var ethers=window.ethers;var defaultUrl="https://welcome.ethers.space/";var walletUrl="https://wallet.ethers.space/";function forEach(root,selector,callback){if(arguments.length===2){callback=selector;selector=root;root=document}Array.prototype.forEach.call(root.querySelectorAll(selector),function(el){callback(el)})}function get(id){if(id.match(/^[A-Za-z0-9_-]$/)){return document.getElementById(id)}else{return document.querySelector(id)}}function timer(timeout,result){return new Promise(function(resolve,reject){setTimeout(function(){resolve(result)},timeout)})}function ethersLog(){var args=Array.prototype.slice.call(arguments);args.unshift("[Ethers Container]");var onlyStrings=true;args.forEach(function(arg){if(typeof arg!=="string"){onlyStrings=false}});if(onlyStrings){args=[args.join(" ")]}console.log.apply(console,args)}function fuzzyEther(value){var comps=ethers.utils.formatEther(value).split(".");if(comps[1].length>5){comps[1]=String(Math.round(parseInt(comps[1].substring(0,6))/10));while(comps[1].length<5){comps[1]="0"+comps[1]}}return comps.join(".")}function normalizePassword(password){return new ethers.utils.toUtf8Bytes(password.normalize("NFKC"))}function copyObject(object){var result={};for(var key in object){result[key]=object[key]}return result}function commify(value){return String(value).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function defineProperty(object,name,value){Object.defineProperty(object,name,{enumerable:true,value:value,writable:false})}function defineLookup(object,name,getter,setter){var def={enumerable:true,get:getter};if(setter){def.set=setter}Object.defineProperty(object,name,def)}function defineCallback(object,name){var callback=null;Object.defineProperty(object,name,{enumerable:true,get:function(){return callback},set:function(func){callback=func}})}function defineEventListener(object){var events={};var addListener=function(name,type,callback){if(!events[name]){events[name]=[]}events[name].push({callback:callback,type:type});return object};defineProperty(object,"on",function(name,callback){return addListener(name,"on",callback)});defineProperty(object,"once",function(name,callback){return addListener(name,"once",callback)});defineProperty(object,"removeListener",function(name,callback){if(!callback){delete events[name];return}var listeners=events[name];for(var i=0;i<listeners.length;i++){if(listeners[i].callback!==callback){continue}listeners.splice(i,1);return}if(listeners.length==0){delete events[name]}return object});defineProperty(object,"emit",function(name){var listeners=events[name];if(!listeners){return}var args=Array.prototype.slice.call(arguments,1);var remove=[];listeners.forEach(function(listener,index){if(listener.type==="once"){removed.unshift(index)}setTimeout(function(){try{listener.callback.apply(object,args)}catch(error){error.eventName=name;error.eventArgs=args;throw error}},0)});remove.forEach(function(index){events.splice(index,1)});return object});return object}var Store=function(){function Store(key){if(!(this instanceof Store)){throw new Error("missing new")}defineProperty(this,"key",key);defineEventListener(this)}defineProperty(Store.prototype,"_load",function(){var json=localStorage.getItem(this.key);var data={};if(json){try{data=JSON.parse(json)}catch(error){ethersLog(error)}}return data});defineProperty(Store.prototype,"get",function(key){return this._load()[key]});defineProperty(Store.prototype,"set",function(key,value){var values=this._load();var oldValue=values[key];values[key]=value;localStorage.setItem(this.key,JSON.stringify(values));this.emit("changed",key,value,oldValue)});return Store}();function getGasPrices(){var gasPriceUrl="./ethers.io/gas-prices-v2.raw";var gasPriceSigner="0xcf49182a885E87fD55f4215def0f56EC71bB7511";return new Promise(function(resolve,reject){var request=new XMLHttpRequest;request.open("GET",gasPriceUrl,true);request.onload=function(){if(request.status>=200&&request.status<400){var data=request.responseText.trim();var tx=ethers.Wallet.parseTransaction(data);if(tx.from!==gasPriceSigner){reject(new Error("invalid gas price signer"))}else{try{data=JSON.parse(ethers.utils.toUtf8String(tx.data));var result=[];for(var i=0;i<data.titles.length;i++){result.push({title:data.titles[i],subtitle:data.subtitles[i],price:ethers.utils.bigNumberify(data.prices[i])})}resolve(result)}catch(error){ethersLog(error);reject("invalid payload")}}}else{reject(new Error("server error"))}};request.onerror=function(){reject(new Error("connection error"))};request.send()})}var settings=new Store("ethers.io-settings");var navigation=function(){var navigation=defineEventListener({});var divHeader=document.getElementById("header");var divControllers=document.getElementById("controllers");var divLogo=document.getElementById("logo");var divTemplates=document.getElementById("templates");var controllers=[];var divCancel=document.getElementById("cancel");var divAppContainer=document.getElementById("app-container");function setupCancel(enable){if(enable){divCancel.onclick=function(){navigation.clear(true)};document.onkeyup=function(event){if(event.keyCode==27){navigation.clear(true)}};divCancel.classList.remove("hidden");divAppContainer.classList.add("blur")}else{divCancel.onclick=undefined;document.onkeyup=undefined;divCancel.classList.add("hidden");divAppContainer.classList.remove("blur")}}function adjustHeader(){var height=50;var topController=controllers[controllers.length-1];if(topController){height=topController.div.offsetHeight}if(controllers.length<=1){logo.classList.remove("hidden")}else{logo.classList.add("hidden")}divHeader.style.transform="translateY("+-(600-height)+"px)";divControllers.style.transform="translateY("+(600-height)+"px)";setupCancel(controllers.length>1)}function Controller(div,options){if(!(this instanceof Controller)){throw new Error("missing new")}if(!options){options={}}defineProperty(this,"div",div);var self=this;forEach(div,".button a",function(el){el.onclick=function(){if(self.onbutton){self.onbutton.call(self,el)}}});defineCallback(this,"onbutton");defineCallback(this,"oncancel");defineCallback(this,"ondrag");defineCallback(this,"ondrop");defineCallback(this,"onsubmit");defineCallback(this,"onchange");var button=this.query(".button a");defineLookup(this,"enabled",function(){return!button.classList.contains("disabled")},function(value){button.classList[value?"remove":"add"]("disabled")});var input=this.query(".input-container input");if(input){defineLookup(this,"value",function(){return input.value},function(value){input.value=value});var self=this;function submit(){if(self.enabled&&self.onsubmit){input.blur();self.onsubmit.call(self,input.value)}}input.onkeyup=function(event){if(event.which===13){submit()}};this.onbutton=function(){submit()};input.oninput=function(){if(self.onchange){self.onchange.call(self,self.value)}};if(options.focus==null||!options.focus){setTimeout(function(){input.focus()},50)}}}defineProperty(Controller.prototype,"populate",function(suffix,value,allowHtml){forEach(this.div,".populate-"+suffix,function(el){if(el.tagName==="INPUT"){el.value=value}else{if(allowHtml){el.innerHTML=value}else{el.textContent=value}}})});defineLookup(Controller.prototype,"cancellable",function(){return divCancel.onclick!=null},function(value){setupCancel(!!value)});defineProperty(Controller.prototype,"query",function(selector){return this.div.querySelector(selector)});function getTopController(){return controllers[controllers.length-1]}var entered=[];document.body.ondragover=function(event){event.preventDefault();event.stopPropagation();var topController=getTopController();if(!topController.ondrag&&!topController.ondrop){return}event.dataTransfer.dropEffect="copy"};document.body.ondragenter=function(){event.preventDefault();event.stopPropagation();var enteredIndex=entered.indexOf(event.target);if(enteredIndex>=0){ethersLog("This should not happen",entered)}entered.push(event.target);var topController=getTopController();if(topController.ondrag){topController.ondrag.call(topController,true)}};document.body.ondragleave=function(event){event.preventDefault();event.stopPropagation();var enteredIndex=entered.indexOf(event.target);if(enteredIndex===-1){ethersLog("This should not happen",entered)}entered.splice(enteredIndex,1);var topController=getTopController();if(topController.ondrag&&entered.length===0){topController.ondrag.call(topController,false)}};document.body.ondrop=function(event){var files=event.dataTransfer.files;event.preventDefault();event.stopPropagation();var topController=getTopController();if(!topController.ondrag){return}entered=[];setTimeout(function(){topController.ondrag.call(topController,false)},0);if(files.length!==1){return}if(!topController.ondrop){return}var ondrop=topController.ondrop;var fileReader=new FileReader;fileReader.onload=function(e){ondrop.call(topController,e.target.result)};fileReader.readAsText(files[0])};defineProperty(navigation,"push",function(template){var nodes=divTemplates.getElementsByClassName("nav-"+template);if(nodes.length!==1){throw new Error("invalid template name - "+template)}var animated=document.body.classList.contains("animated");var div=nodes[0].cloneNode(true);if(animated){div.classList.add("right")}var controller=new Controller(div);defineProperty(controller,"depth",controllers.length);divControllers.appendChild(div);var topController=controllers[controllers.length-1];if(topController){topController.div.classList.add("left")}controllers.push(controller);if(animated){setTimeout(function(){div.classList.remove("right");adjustHeader()},100)}else{setTimeout(function(){adjustHeader()},0)}return controller});defineProperty(navigation,"pop",function(){if(controllers.length<=1){return}var topController=controllers[controllers.length-1];topController.div.classList.add("right");setTimeout(function(){topController.div.parentNode.removeChild(topController.div)},1100);controllers.splice(controllers.length-1,1);var controller=controllers[controllers.length-1];if(controller){controller.div.classList.remove("left")}adjustHeader()});defineProperty(navigation,"clear",function(purge){if(controllers.length>1){var topController=controllers[controllers.length-1];if(purge){if(topController.oncancel){topController.oncancel()}topController.div.classList.add("hidden")}else{topController.div.classList.add("left")}setTimeout(function(){topController.div.remove()},1e3);for(var i=1;i<controllers.length-1;i++){controllers[i].div.remove()}controllers.splice(1,controllers.length-1)}controllers[0].div.classList.remove("left");adjustHeader()});defineProperty(navigation,"pushProgress",function(){var controller=navigation.push("progress");var cancelled=false;controller.oncancel=function(){cancelled=true};var divBar=controller.query(".progress-bar");var divPercent=controller.query(".populate-percent");defineProperty(controller,"updateProgress",function(percent){if(percent===1){divBar.classList.add("complete")}percent=100*(.1+.9*percent);divBar.style.width=String(percent)+"%";divPercent.textContent=parseInt(percent)+"%";return cancelled});return controller});defineProperty(navigation,"pushNotice",function(title,blurb){if(!title){title=""}if(!blurb){blurb=""}var controller=navigation.push("notice");controller.populate("title",title);controller.populate("blurb",blurb);defineCallback(controller,"ondone");var timer=null;function complete(){if(timer===null){return}clearTimeout(timer);timer=null;navigation.clear();if(controller.ondone){controller.ondone.call(controller)}}controller.oncancel=function(){complete()};timer=setTimeout(complete,5e3);return controller});function AccountController(div){defineProperty(this,"div",div);defineCallback(this,"onselect");defineCallback(this,"onedit");defineCallback(this,"onremove")}defineProperty(AccountController.prototype,"remove",function(){this.div.remove()});defineLookup(AccountController.prototype,"locked",function(){return this.div.querySelector(".lock-state").classList.contains("locked")},function(value){this.div.querySelector(".lock-state").classList[!!value?"add":"remove"]("locked")});defineProperty(AccountController.prototype,"select",function(){var div=this.div;forEach(".accounts > div",function(el){el.classList[el===div?"add":"remove"]("selected")})});var divAccounts=document.querySelector("#account-list .accounts");var metamaskAccountController=null;defineProperty(navigation,"addAccount",function(address,json,nickname){var nodes=divTemplates.getElementsByClassName("account");if(nodes.length!==1){throw new Error("invalid account template")}var div=nodes[0].cloneNode(true);forEach(div,".populate-nickname",function(el){el.value=nickname});var controller=new AccountController(div);div.querySelector(".action.edit").onclick=function(){var input=div.querySelector("input.nickname");var nickname=input.value.trim();input.readOnly=false;input.focus();document.body.classList.add("editing-account");function submit(){var value=input.value;input.readOnly=true;input.blur();document.body.classList.remove("editing-account");if(value!==nickname){navigation.emit("didEditAccount",controller,value);if(controller.onedit){controller.onedit.call(controller,value)}}}input.onkeyup=function(event){if(event.which===13){submit()}};input.onblur=submit};div.querySelector(".action.remove").onclick=function(){navigation.emit("didRemoveAccount",controller);if(controller.onremove){controller.onremove.call(controller)}};div.querySelector(".clickable").onclick=function(){navigation.emit("didSelectAccount",controller);if(controller.onselect){controller.onselect.call(controller)}};var anchor=div.querySelector(".action.download a");anchor.setAttribute("download","wallet.json");anchor.setAttribute("href","data:text/plain;base64,"+btoa(json));var nextDiv=null;if(!json){metamaskAccountController=controller}else if(metamaskAccountController){nextDiv=metamaskAccountController.div}divAccounts.insertBefore(div,nextDiv);return controller});(function(){var spanAddressBar=document.querySelector(".address-bar span");var divAddressBar=document.querySelector(".address-bar div");var inputAddressBar=document.querySelector(".address-bar input");var scheme=null;var url=null;var pendingUrl=null;var pendingCursor=null;function encodeFragment(url){url=encodeURI(url).replace(/#/g,"%23");if(url.substring(0,8)==="https://"){return"#!/app-link/"+url.substring(8)}else if(url.substring(0,7)==="http://"){return"#!/app-link-insecure/"+url.substring(7)}throw new Error("invalid url")}function decodeFragment(fragment){fragment=decodeURI(fragment.replace(/%23/g,"#"));if(fragment.substring(0,12)==="#!/app-link/"){return"https://"+fragment.substring(12)}else if(fragment.substring(0,21)==="#!/app-link-insecure/"){return"http://"+fragment.substring(21)}throw new Error("invalid fragment")}function setUrl(value,updateState){var comps=value.split("://");if(comps.length!==2||!{http:true,https:true}[comps[0].toLowerCase()]){throw new Error("invalid URL")}if(updateState){var state={url:value};var fragmentUrl=location.href.split("#")[0]+encodeFragment(value);history[updateState+"State"](state,"",fragmentUrl)}scheme=comps[0];url=comps[1];spanAddressBar.textContent=scheme+"://";inputAddressBar.value=url}defineLookup(navigation,"url",function(){return scheme+"://"+url},function(value){setUrl(value,"push")});try{var fragmentUrl=decodeFragment(location.hash);ethersLog("Found Fragment URL:",fragmentUrl);setUrl(fragmentUrl,"replace")}catch(error){ethersLog("Default Frament URL:",defaultUrl);setUrl(defaultUrl,"replace")}window.onpopstate=function(event){setUrl(event.state?event.state.url:decodeFragment(location.hash));navigation.emit("didChangeUrl",navigation.url)};function commitUrl(value){pendinglUrl=null;url=value;inputAddressBar.value=url;setUrl(navigation.url,"push");navigation.emit("didChangeUrl",navigation.url)}function update(){inputAddressBar.classList[inputAddressBar.value===url?"add":"remove"]("matches")}spanAddressBar.onclick=function(){inputAddressBar.focus()};divAddressBar.onclick=function(){if(pendingUrl&&pendingUrl!==url){commitUrl(pendingUrl)}};inputAddressBar.onfocus=function(){if(pendingUrl&&pendingUrl!==inputAddressBar.value){inputAddressBar.value=pendingUrl;if(partialCursor!=null){var cursor=partialCursor;setTimeout(function(){inputAddressBar.setSelectionRange(cursor,cursor)},0)}}document.body.classList.add("editing-url");update()};inputAddressBar.onblur=function(){pendingUrl=null;partialCursor=null;if(inputAddressBar.value!==url){pendingUrl=inputAddressBar.value;var cursor=inputAddressBar.selectionStart;if(cursor!=null&&cursor===inputAddressBar.selectionEnd){partialCursor=cursor}}document.body.classList.remove("editing-url");inputAddressBar.value=url};inputAddressBar.onkeyup=function(event){if(event.which===13){commitUrl(inputAddressBar.value);inputAddressBar.blur()}};inputAddressBar.oninput=update})();return navigation}();var network=function(){var network=null;switch(location.hostname){case"ethers.io":case"ethers.local":network="homestead";break;case"rinkeby.ethers.io":case"rinkeby.ethers.local":network="rinkeby";break;case"testnet.ethers.io":case"ropsten.ethers.io":case"ropsten.ethers.local":network="ropsten";break;case"kovan.ethers.io":case"kovan.ethers.local":network="kovan";break;case"custom-rpc.ethers.io":case"custom-rpc.ethers.local":network="test";break;case"etc-morden.github.io":case"etc-morden.github.local":network="classicTestnet";break;default:break}if(!network){ethersLog("WARNING: no network detected; defaulting to homestead");network="homestead"}return network}();defineProperty(ethers,"versionHash","0xb35772daa7ace30a38392a0709de771f08708b72ae537f0aecd67e65d32647ac");var provider=null;if(network==="test"){(function(){var query={};location.search.substring(1).split(/&/g).forEach(function(pair){comps=pair.split("=");if(comps.length!=2){return}query[comps[0]]=comps[1]});var scheme="http";if(query.scheme==="https"){scheme="https"}var host="localhost";if(query.host&&query.host.match(/^[A-Za-z0-9-.]+$/)){host=query.host}var path="/";if(query.path&&query.path.match(/^[A-Za-z0-9._~\/@+-]*$/)){path=query.path}network=scheme+"://"+host+":"+parseInt(query.port||"8545")+path;var networkInfo={chainId:parseInt(query.chainId||43),ensAddress:query.ensAddress||undefined,name:"test"};provider=new ethers.providers.JsonRpcProvider(network,networkInfo);ethersLog("Connected JSON-RPC Provider: url="+network+", chainId="+provider.chainId)})()}else{provider=ethers.getDefaultProvider(network);ethersLog("Connected Provider: network="+provider.name+", chainId="+provider.chainId)}var wallet=function(){var wallet=defineEventListener({});var accountPrefix="ethers.io-account-";var accountExtendedPrefix="x-ethers.io-account-";var gasLimitTiers=[21e3,75e3,15e4,25e4,5e5,75e4,15e5];function getTransactionInfo(tx){return Promise.all([tx.to?provider.getCode(tx.to):Promise.resolve("INVALID"),provider.estimateGas(tx),provider.getTransactionCount(tx.from),getGasPrices()]).then(function(result){var gasLimit=21e3;var transfer=true;if(result[0]!=="0x"){transfer=false;gasLimit=result[1].toNumber();gasLimit=parseInt(gasLimit*1.1);var found=false;for(var i=0;i<gasLimitTiers.length;i++){if(gasLimitTiers[i]<gasLimit){continue}gasLimit=gasLimitTiers[i];found=true;break}if(!found){throw new Error("invalid transaction gas limit")}}return{gasLimit:gasLimit,gasPrices:result[3],nonce:result[2],transfer:transfer}})}function Account(json){if(!(this instanceof Account)){throw new Error("missing new")}var data=JSON.parse(json);defineProperty(this,"json",json);var self=this;var wallet=null;function unlockAccount(){var controller=navigation.push("password");controller.populate("title","Unlock Account");controller.populate("blurb","Enter your password to unlock your account.");controller.populate("action","UNLOCK");return new Promise(function(resolve,reject){function decrypt(password){var progressController=navigation.pushProgress();progressController.populate("title","Decrypting Account");progressController.populate("blurb","Decrypting your account. Please wait.");ethers.Wallet.fromEncryptedJson(json,password,progressController.updateProgress).then(function(account){wallet=account;wallet.provider=provider;self.emit("didUnlock");setTimeout(function(){resolve()},500)},function(error){if(error.message==="cancelled"){reject(new Error("cancelled"));return}navigation.pop()})}controller.onsubmit=function(password){decrypt(password)}})}defineProperty(this,"address",ethers.utils.getAddress(data.address));defineLookup(this,"locked",function(){return wallet===null});defineProperty(this,"lock",function(){if(wallet===null){return}wallet=null;this.emit("didLock")});defineProperty(this,"send",function(tx){navigation.clear(true);tx={from:this.address,to:tx.to,value:tx.value,data:tx.data,gasPrice:0,gasLimit:15e5};var transactionInfo=getTransactionInfo(tx);var seq=Promise.resolve();if(this.locked){seq=seq.then(function(){var controller=navigation.push("transaction-summary");controller.populate("address",tx.to||"Create New Contract");controller.populate("amount",ethers.utils.formatEther(tx.value||"0x0"));controller.populate("data-length",ethers.utils.arrayify(tx.data||"0x").length+" bytes");return new Promise(function(resolve,reject){controller.oncancel=function(){reject(new Error("cancelled"))};controller.onbutton=function(){resolve()}})});seq=seq.then(function(){return unlockAccount()})}seq=seq.then(function(){var controller=navigation.push("transaction");controller.enabled=false;if(tx.to){controller.populate("address",tx.to)}else{controller.populate("address","(calculating)");controller.populate("header-address","Create Contract:")}controller.populate("amount",ethers.utils.formatEther(tx.value||"0x0"));controller.populate("data-length",ethers.utils.arrayify(tx.data||"0x").length+" bytes");return transactionInfo.then(function(result){function updateFee(div,index,price){console.log("updatePrice",price);forEach(divOptions,".selected",function(el){el.classList.remove("selected")});div.classList.add("selected");divOptions.style.transform="translateY("+(-1+-26*index)+"px)";controller.populate("fee",fuzzyEther(price.mul(result.gasLimit)));tx.gasPrice=price}tx.nonce=result.nonce;if(!tx.to){controller.populate("address",ethers.utils.getContractAddress(tx))}if(!result.transfer){controller.populate("header-gas-limit","Maximum Gas Limit");controller.populate("header-fee","Maximum Fee")}controller.populate("gas-limit",commify(result.gasLimit));tx.gasLimit=result.gasLimit;var templateOption=document.querySelector("#templates .option");var divOptions=controller.query(".options-container .options");result.gasPrices.forEach(function(gasPrice,index){var price=gasPrice.price;console.log("gg",price);var div=templateOption.cloneNode(true);var comps=gasPrice.title.toLowerCase().split(/ |-/g);for(var i=0;i<comps.length;i++){comps[i]=comps[i].substring(0,1).toUpperCase()+comps[i].substring(1)}div.querySelector(".populate-name").textContent=comps.join(" ");var match=gasPrice.subtitle.match(/^completes in (.*)$/);div.querySelector(".populate-duration").textContent=match[1]||gasPrice.subtitle;div.querySelector(".populate-price").textContent=ethers.utils.formatUnits(price,9)+" Gwei";divOptions.appendChild(div);div.onclick=function(){updateFee(div,index,price)};if(index===0){updateFee(div,index,price)}});controller.enabled=true;return new Promise(function(resolve,reject){controller.oncancel=function(){reject(new Error("cancelled"))};controller.onbutton=function(el){var controller=navigation.push("button");controller.populate("title","Sending Transaction");controller.populate("blurb","Please wait.");controller.populate("action","OK");controller.enabled=false;controller.onbutton=function(){navigation.pop()};controller.cancellable=false;wallet.sendTransaction(tx).then(function(tx){self.emit("didSendTransaction",tx);var controller=navigation.pushNotice("Transaction Sent","Your transaction has successfully been sent to the Ethereum network.");controller.ondone=function(){resolve(tx)}},function(error){ethersLog(error);controller.populate("blurb","Error: "+error.message);controller.enabled=true})}})})});return seq});var hexChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function showMessage(messageData){var controller=navigation.push("message");var ascii=true;var dataString="";for(var i=0;i<messageData.length;i++){var c=messageData[i];dataString+=hexChars[c>>4]+hexChars[c&15];if(i%8===7){dataString+=" "}if((c<32||c>=127)&&c!==13){ascii=false}}if(ascii){controller.populate("message",ethers.utils.toUtf8String(messageData).replace(/\\n/g,"FOO"))}else{controller.populate("header","Data");controller.populate("message",dataString)}return controller}defineProperty(this,"signMessage",function(message){navigation.clear(true);var messageData=ethers.utils.arrayify(message);var seq=Promise.resolve();if(this.locked){seq=seq.then(function(){var controller=showMessage(messageData);controller.populate("action","UNLOCK ACCOUNT...");return new Promise(function(resolve,reject){controller.oncancel=function(){reject(new Error("cancelled"))};controller.onbutton=function(){resolve()}})});seq=seq.then(function(){return unlockAccount()})}seq=seq.then(function(){var controller=showMessage(messageData);return new Promise(function(resolve,reject){controller.oncancel=function(){reject(new Error("cancelled"))};controller.onbutton=function(){resolve()}})});seq=seq.then(function(){navigation.clear();return wallet.signMessage(messageData)});return seq});var store=new Store(accountExtendedPrefix+this.address);defineLookup(this,"nickname",function(){return store.get("nickname")||"Ethers Account"},function(value){if(typeof value!=="string"){throw new Error("invalid nickname")}if(this.nickname!==value){this.emit("didChangeNickname",this,value)}store.set("nickname",value)});defineLookup(this,"balance",function(){return ethers.utils.bigNumberify(store.get("balance")||"0")});var updateBalance=function(balance){if(balance.toString()===store.get("balance")){return}store.set("balance",balance.toString());this.emit("didChangeBalance",balance)}.bind(this);provider.on(this.address,function(balance){updateBalance(balance)});provider.getBalance(this.address).then(function(balance){updateBalance(balance)});defineEventListener(this)}defineProperty(Account.prototype,"remove",function(){var self=this;return new Promise(function(resolve,reject){var controller=navigation.push("notice");controller.populate("title","Verify JSON Wallet Backup");controller.populate("blurb","Drag and drop the JSON Wallet backup here to verify you have a valid copy.");controller.oncancel=function(){reject(new Error("cancelled"))};controller.ondrag=function(dragging){};controller.ondrop=function(content){if(content===self.json){self.controller.remove();delete accounts[self.address];localStorage.removeItem(accountPrefix+self.address);self.emit("didRemove");var controller=navigation.pushNotice("Account Removed",'The "'+self.nickname+'" has been removed from this browser');controller.ondone=function(){resolve()}}else{ethersLog("JSON file does not match")}}})});function MetaMaskAccount(web3){if(!(this instanceof MetaMaskAccount)){throw new Error("missing new")}defineProperty(this,"isMetaMask",true);defineProperty(this,"web3",web3);defineProperty(this,"provider",new ethers.providers.Web3Provider(web3.currentProvider));defineProperty(this,"signer",this.provider.getSigner());defineProperty(this,"nickname",web3.currentProvider.isMetaMask?"MetaMask":"Injected Web3");defineEventListener(this);this._balance=ethers.utils.bigNumberify(0);var self=this;function updateBalance(){var address=self.address;if(!address){return}provider.getBalance(address).then(function(balance){self._balance=balance;self.emit("didChangeBalance",balance)})}var self=this;var lastAddress=null;function check(){var address=self.address;if(address!==lastAddress){if(address&&!lastAddress){self.emit("didUnlock",self)}else if(!address&&lastAddress){self.emit("didLock",self)}else{updateBalance();self.emit("didChangeAddress",self)}lastAddress=address}}provider.onblock=updateBalance;updateBalance();setInterval(check,500);check()}defineLookup(MetaMaskAccount.prototype,"balance",function(){return this._balance});defineLookup(MetaMaskAccount.prototype,"locked",function(){return this.address==null});defineLookup(MetaMaskAccount.prototype,"address",function(){if(this.web3.eth.defaultAccount&&parseInt(this.web3.version.network)===provider.chainId){return ethers.utils.getAddress(this.web3.eth.defaultAccount)}return null});defineProperty(MetaMaskAccount.prototype,"unlock",function(){var self=this;var result=this.address;if(result){return Promise.resolve(result)}return new Promise(function(resolve,reject){var controller=navigation.push("notice");controller.populate("title","Unlock MetaMask");controller.populate("blurb",'Plese unlock MetaMask and select a "'+network+'" account.');var timer=setInterval(function(){var result=self.address;if(!result){return}if(timer===null){return}clearInterval(timer);timer=null;resolve(result);navigation.pop()},250);controller.oncancel=function(){if(timer===null){return}clearInterval(timer);timer=null;reject(new Error("cancelled"))}})});defineProperty(MetaMaskAccount.prototype,"send",function(tx){return this.signer.sendTransaction(tx)});defineProperty(MetaMaskAccount.prototype,"signMessage",function(message){var self=this;return this.unlock().then(function(address){return self.signer.signMessage(message).catch(function(error){throw new Error("cancelled")})})});var currentAccount=null;function updateCurrentAccount(account,initial){if(account===currentAccount){return}currentAccount=account;if(!initial){wallet.emit("didChangeCurrentAccount",account?account.address:null);if(!account){settings.set("activeAccount",null)}else if(account.isMetaMask){settings.set("activeAccount","injected")}else{settings.set("activeAccount",account.address)}}if(account){account.controller.select()}document.body.classList[account&&account.isMetaMask&&account.locked?"add":"remove"]("locked")}var accounts={};function installAccount(account){["didChangeAddress","didChangeBalance","didChangeNickname","didLock","didRemove","didSendTransaction","didSignMessage","didUnlock"].forEach(function(event){account.on(event,function(){var args=Array.prototype.slice.call(arguments);args.unshift(account.address);args.unshift(event);wallet.emit.apply(wallet,args)})});accounts[account.address]=account;var controller=navigation.addAccount(account.address,account.json,account.nickname);account.controller=controller;if(account.isMetaMask){controller.div.classList.add("metamask");function update(){if(currentAccount===account){wallet.emit("didChangeCurrentAccount",account.address)}}account.on("didLock",update);account.on("didUnlock",update);account.on("didChangeAddress",update)}else{controller.onremove=function(){account.remove().then(function(){controller.remove()})};controller.onedit=function(value){account.nickname=value}}controller.onselect=function(){updateCurrentAccount(account);controller.select()};account.on("didLock",function(account){controller.locked=true});account.on("didUnlock",function(account){controller.locked=false});controller.locked=account.locked;return controller}(function(){var first=null;for(var key in localStorage){var match=key.match(/^ethers\.io-account-(.*)$/);if(match){var address=ethers.utils.getAddress(match[1]);var data=JSON.parse(localStorage.getItem(key));var account=new Account(data.json);if(account.address!==address){throw new Error("address mismatch")}account.controller=installAccount(account);if(!first){first=account}}}var activeAddress=settings.get("activeAccount");if(window.web3&&window.web3.currentProvider){var metamask=new MetaMaskAccount(window.web3);metamask.controller=installAccount(metamask);if(activeAddress==="injected"){activeAddress=null;first=metamask}}var account=accounts[activeAddress]||first||null;updateCurrentAccount(account,true)})();ethersLog("Initial Account:",currentAccount);defineProperty(wallet,"addAccount",function(){function getPassword(){return new Promise(function(resolve,reject){var controller=navigation.push("password");
controller.populate("title","Choose Password");controller.populate("blurb","Choose a password for encrypting your account. Your password must be at least 6 characters long.");controller.populate("action","NEXT");controller.enabled=false;controller.oncancel=function(){reject(new Error("cancelled"))};controller.onchange=function(){this.enabled=this.value.length>=6};controller.onsubmit=function(password){var controller=navigation.push("password");controller.populate("title","Confirm Password");controller.populate("blurb","Confirm your password.");controller.populate("action","CONFIRM");controller.enabled=false;controller.oncancel=function(){reject(new Error("cancelled"))};controller.onchange=function(){this.enabled=this.value===password};controller.onsubmit=function(confirmPassword){if(password!==confirmPassword){reject(new Error("should not happen"));return}resolve(password)}}})}function encrypt(wallet){return getPassword().then(function(password){password=normalizePassword(password);var progressController=navigation.pushProgress();progressController.populate("title","Encrypting Account");progressController.populate("blurb","Encrypting your account. Please wait.");var options={scrypt:{N:1<<17}};return wallet.encrypt(password,options,progressController.updateProgress).then(function(wallet){return timer(500,wallet)})})}function verifyJson(json){var controller=navigation.push("button");controller.populate("title","Download JSON Wallet Backup");controller.populate("blurb","Keep this file <b>SAFE</b> and <b>do NOT</b> forget your password. Anyone with this file and your password can steal your ether. If you forget your password or lose this file, your ether <b>cannot</b> be recovered.",true);controller.populate("action","DOWNLOAD");var anchor=controller.query(".button a");anchor.setAttribute("download","wallet.json");anchor.setAttribute("href","data:text/plain;base64,"+btoa(json));return new Promise(function(resolve,reject){controller.onbutton=function(){var controller=navigation.push("notice");controller.populate("title","Verify JSON Wallet Backup");controller.populate("blurb","Drag and drop your JSON Wallet Backup to verify it.");controller.oncancel=function(){reject(new Error("cancelled"))};controller.ondrag=function(dragging){};controller.ondrop=function(contents){if(contents===json){resolve(json)}}};controller.oncancel=function(){reject(new Error("cancelled"))}})}function done(json,resolve,method){var account=new Account(json);installAccount(account);var key=accountPrefix+account.address;if(!localStorage.getItem(key)){var data={address:account.address,createdData:parseInt((new Date).getTime()),json:json,method:method||"unknown",version:1};localStorage.setItem(key,JSON.stringify(data));accounts[account.address]=account;wallet.emit("didAddAccount",account)}var controller=navigation.push("button");controller.populate("title","Done");controller.populate("blurb","Your encrypted account has been added to this browser. Keep you private key safe and do <b>NOT</b> forget your password. We do not keep any data on any server and cannot recover a lost account.",true);controller.populate("action","OK");controller.onbutton=function(){navigation.clear();resolve(account.address)}}function getWallet(text){text=text.trim();if(text.split(/ /g).length==12){if(ethers.HDNode.isValidMnemonic(text)){return{generate:function(){return ethers.Wallet.fromMnemonic(text)},method:"mnemonic"}}}else if(text.match(/^(0x)?[0-9a-f]{64}$/i)){return{generate:function(){return new ethers.Wallet(text)},method:"rawkey"}}return null}return new Promise(function(resolve,reject){var controller=navigation.push("add-account");controller.onbutton=function(el){var name=el.getAttribute("data-name");if(name==="create"){encrypt(ethers.Wallet.createRandom()).then(function(json){return verifyJson(json)}).then(function(json){return done(json,resolve,"created")}).catch(function(error){navigation.clear();reject(error)})}else if(name==="import"){var controller=navigation.push("import",{focus:false});controller.enabled=false;controller.onchange=function(text){this.enabled=!!getWallet(text)};controller.onsubmit=function(text){var walletInfo=getWallet(text);encrypt(walletInfo.generate()).then(function(json){return done(json,resolve,walletInfo.method)}).catch(function(error){reject(error)})};controller.ondrag=function(dragging){this.enabled=dragging};controller.ondrop=function(contents){const address=ethers.utils.getJsonWalletAddress(contents);if(address===null){this.enabled=false;return}var controller=navigation.push("password");controller.populate("title","Import Account");controller.oncancel=function(){reject(new Error("cancelled"))};controller.onsubmit=function(password){password=normalizePassword(password);var progressController=navigation.pushProgress();progressController.populate("title","Enter JSON Account Password");ethers.Wallet.fromEncryptedJson(contents,password,progressController.updateProgress).then(function(account){return timer(500,account)}).then(function(account){return done(contents,resolve,"imported")}).catch(function(error){if(error.message==="cancelled"){reject(error);return}navigation.pop()})}};controller.oncancel=function(){reject(new Error("cancelled"))}}}})});defineProperty(wallet,"get",function(address){return accounts[ethers.utils.getAddress(address)]});defineProperty(wallet,"list",function(){return Object.keys(accounts)});defineLookup(wallet,"currentAccount",function(){return currentAccount});function setNoAccount(){if(Object.keys(accounts).length===0){document.body.classList.add("no-account");updateCurrentAccount(null)}else{document.body.classList.remove("no-account");if(currentAccount&&(!currentAccount.isMetaMask&&!accounts[currentAccount.address])){currentAccount=null}if(!currentAccount){updateCurrentAccount(accounts[Object.keys(accounts)[0]])}}}wallet.on("didRemove",function(account){setNoAccount()});wallet.on("didAddAccount",function(account){setNoAccount()});setNoAccount();return wallet}();(function(){var divAppContainer=document.getElementById("app-container");var nextApplicationId=1;function Application(origin,url){if(!(this instanceof Application)){throw new Error("missing new")}defineProperty(this,"origin",origin);defineProperty(this,"url",url);defineProperty(this,"id",nextApplicationId++);defineProperty(this,"iframe",document.createElement("iframe"))}defineProperty(Application.prototype,"launch",function(){this.iframe.src=this.url});var currentApplication=null;var addressBar=document.querySelector(".address-bar input");function load(url){var originMatch=url.match(/^(https?:\/\/[^\/]*)/);if(!originMatch){return Promise.reject(new Error("invalid origin"))}var origin=originMatch[1];function go(){if(currentApplication){currentApplication.iframe.remove()}currentApplication=new Application(origin,url);divAppContainer.appendChild(currentApplication.iframe);currentApplication.launch()}var insecureUntil=parseInt(settings.get("insecureUntil")||"0");if(origin.substring(0,5)==="https"||insecureUntil>(new Date).getTime()){go();return Promise.resolve(url)}else{navigation.clear(true);return new Promise(function(resolve,reject){var controller=navigation.push("button");controller.populate("title","Warning - Insecure Connection");controller.populate("blurb","You are about to load an Ethereum dApp over an insecure HTTP connection. This is <b>NOT</b> recommended for most users. Only developers should continue. Allow insecure dApps for 30 minutes?",true);controller.populate("action","Enable Insecure dApps");controller.onbutton=function(){go();navigation.clear();settings.set("insecureUntil",String((new Date).getTime()+30*60*1e3));resolve(url)};controller.oncancel=function(){reject(new Error("cancelled"))}})}}function send(payload){payload.ethers="v\n";currentApplication.iframe.contentWindow.postMessage(payload,currentApplication.url)}wallet.on("didChangeCurrentAccount",function(address){send({action:"accountChanged",account:address})});window.addEventListener("message",function(event){if(!currentApplication||event.source!==currentApplication.iframe.contentWindow){return}var application=currentApplication;if(event.origin!==application.origin){return}var data=event.data;if(data.ethers!=="v\n"){return}var params=data.params;function sendMessage(messageId,results){if(currentApplication.id!==application.id){return}send({id:messageId,result:results})}function sendError(messageId,message){if(currentApplication.id!==application.id){return}send({id:messageId,error:message})}switch(data.action){case"ready":var title="ethers.io";if(typeof params.title==="string"){var safeTitle=params.title.match(/^[A-Za-z0-9 ._]*/);if(safeTitle){safeTitle=safeTitle[0].trim();if(safeTitle.length){title=safeTitle+" - ethers.io"}}}document.title=title;send({action:"ready",account:wallet.currentAccount?wallet.currentAccount.address:null,network:network});break;case"getAccount":sendMessage(data.id,wallet.currentAccount?wallet.currentAccount.address:null);break;case"getNetwork":if(network==="ropsten"){sendMessage(data.id,"testnet")}else if(network==="homestead"){sendMessage(data.id,"mainnet")}else{sendMessage(data.id,network)}break;case"loadApplication":load(params.url).then(function(url){navigation.url=params.url},function(error){ethersLog(error);sendError(data.id,"cancelled")});break;case"notify":try{Modal.notify("Application â€” "+application.name,ensureString(params.message))}catch(error){sendError(data.id,"unknown error")}break;case"sendTransaction":if(!wallet.currentAccount){sendError(data.id,"cancelled");break}wallet.currentAccount.send(params.transaction).then(function(tx){var hexTx={};for(var key in tx){hexTx[key]=ethers.utils.hexlify(tx[key])}ethersLog("Send",hexTx);sendMessage(data.id,hexTx)},function(error){if(error.message==="cancelled"){sendError(data.id,"cancelled")}else{ethersLog("Error Sending Transaction: "+error.message);sendError(data.id,"unknown error")}});break;case"signMessage":if(!wallet.currentAccount){sendError(data.id,"cancelled");break}wallet.currentAccount.signMessage(params.message).then(function(signature){sendMessage(data.id,signature)},function(error){if(error.message==="cancelled"){sendError(data.id,"cancelled")}else{sendError(data.id,"unknown error")}});break;default:ethersLog("Unknown action: "+data.action);sendError(data.id,"invalid command")}},false);setTimeout(function(){load(navigation.url).then(function(url){ethersLog("Loaded:",url)},function(error){ethersLog(error)})},0);navigation.on("didChangeUrl",function(url){load(url)});get(".button a.wallet").onclick=function(){var url=walletUrl;load(url).then(function(url){navigation.url=url},function(error){ethersLog(error)})};get(".button a.home").onclick=function(){load(defaultUrl).then(function(url){navigation.url=defaultUrl},function(error){ethersLog(error)})}})();var controllerWallet=navigation.push("wallet");controllerWallet.update=function(){if(!wallet.currentAccount){controllerWallet.populate("address","no account");controllerWallet.populate("nickname","");controllerWallet.populate("balance-whole","");controllerWallet.populate("balance-decimal","");return}controllerWallet.populate("address",wallet.currentAccount.address);controllerWallet.populate("nickname",wallet.currentAccount.nickname);var comps=fuzzyEther(wallet.currentAccount.balance).split(".");controllerWallet.populate("balance-whole",comps[0]);controllerWallet.populate("balance-decimal",comps[1])};controllerWallet.update();(function(){var input=controllerWallet.query("input");input.onclick=function(){input.setSelectionRange(0,input.value.length)}})();wallet.on("didChangeBalance",function(address,balance){controllerWallet.update()});wallet.on("didChangeNickname",function(address,nickname){controllerWallet.update()});wallet.on("didChangeCurrentAccount",function(address){controllerWallet.update()});wallet.on("didLock",function(address){controllerWallet.update()});wallet.on("didUnlock",function(address){controllerWallet.update()});wallet.on("didChangeAddress",function(address){controllerWallet.update()});forEach(".add-account",function(el){el.onclick=function(){wallet.addAccount().then(function(address){ethersLog("Added Account",address)},function(error){ethersLog("Error",error)})}});setTimeout(function(){document.body.classList.add("animated")},200);ethersLog("Ready")})(window);
</script>
    </body>
</html>
